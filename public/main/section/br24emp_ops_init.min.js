var app_ops={mainmenu:{index:{init:function(){function e(e){return(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,(function(e){var a="number";return/^"/.test(e)?a=/:$/.test(e)?"key":"string":/true|false/.test(e)?a="boolean":/null/.test(e)&&(a="null"),'<span class="'+a+'">'+e+"</span>"}))}app.util.period(),app.util.nprogressinit(),$(".previous-surround, .next-surround").css("display","none"),$(".button").not(".isDisabled").on("click",(function(){"_blank"!==$(this).attr("target")&&(app.util.nprogressinit(),NProgress.start())})),$(".button[target='_blank']").not(".isDisabled").on("click",(function(){NProgress.done()})),window.onload=function(){NProgress.done(),app.util.fullscreenloading_end(),window.autoPollrefreshIntervalId_ASAP=null;$("#pause_refresh").on("click",(function(){if($(this).hasClass("_paused_")){$(this).removeClass("_paused_");var e=$(this).html();$(this).html(e.replace("*","")),window.location.reload()}else clearInterval(window.autoPollrefreshIntervalId_ASAP),$(this).addClass("_paused_"),$(this).html($(this).html()+"*")})),window.autoPollrefreshIntervalId_ASAP=setInterval((function(){window.location.reload()}),5e3),$("pre.sf-dump").css("z-index","1"),""==$("#task_downloads_files_not_finished_processing").html()&&$("#task_downloads_files_not_finished_processing").html(e(JSON.stringify(app.data.task_downloads_files_not_finished_processing,void 0,4))),""==$("#upload_files_not_finished_processing").html()&&$("#upload_files_not_finished_processing").html(e(JSON.stringify(app.data.upload_files_not_finished_processing,void 0,4))),""==$("#task_manual_downloads_files_not_finished_processing").html()&&$("#task_manual_downloads_files_not_finished_processing").html(e(JSON.stringify(app.data.task_manual_downloads_files_not_finished_processing,void 0,4))),""==$("#worker_jobs_table").html()&&$("#worker_jobs_table").html(e(JSON.stringify(app.data.worker_jobs_table,void 0,4))),""==$("#worker_failedjobs_table").html()&&$("#worker_failedjobs_table").html(e(JSON.stringify(app.data.worker_failedjobs_table,void 0,4)))}}}},contract_mass_upload_docs:{index:{init:function(){app.util.period(),$(".previous-surround, .next-surround").css("display","none"),NProgress.configure({parent:"#progress-bar-parent",showSpinner:!1}),app.util.fixedheaderviewporthandler(),app_ops.contract_mass_upload_docs.index.table()},table:function(){app.util.nprogressdone(),$(".button").not(".isDisabled").on("click",(function(){"_blank"!==$(this).attr("target")&&(app.util.nprogressinit(),NProgress.start())})),$(".button[target='_blank']").not(".isDisabled").on("click",(function(){NProgress.done()}));var select_list_employee_list=app.data.selectize_employee_list_formated_json,select_selected_list_employee_has_family_member_json=app.data.selectize_selected_employee_has_family_members_in_company_formated_json;select_selected_list_employee_has_family_member=select_selected_list_employee_has_family_member_json.map((function(e){return e.fk_is_br24_employee}));var case_id_uploading_to=null,encrypted_case_id_uploading_to=null,$is_br24_employee_select=$("#is_br24_employee").selectize({plugins:["remove_button","optgroup_columns"],persist:!1,maxItems:200,mode:"single",placeholder:"-- SELECT CASE ID TO UPLOAD TO --",valueField:["case_id"],labelField:"case_id",searchField:["case_id","xml_title_contents","xml_jobid_title"],options:select_list_employee_list,items:select_selected_list_employee_has_family_member,hideSelected:!0,openOnFocus:!1,closeAfterSelect:!0,render:{item:function(e,a){return"<div>"+(e.case_id?'<span class="case_id"><u><b>'+e.case_id+"</b></u></span>":"")+'<span style="color: #ccc">&nbsp;</span>'+(e.xml_jobid_title?' <i class="fa fa-angle-double-right text-danger"></i> ':"")+(e.xml_jobid_title?'<span class="xml_jobid_title" style="font-size: 9px; color: #1cd;"><b>'+e.xml_jobid_title+"</b></span>":"")+"<br>"+(e.xml_title_contents?'<span class="xml_title_contents" style="font-size: 10px;">'+e.xml_title_contents+"</span>":"")+"</div>"},option:function(e,a){e.xml_title_contents||e.email,e.xml_title_contents&&e.email;return'<div style="margin: 10px; border: 1px solid #000; padding: 10px;"><span class="label label-primary">'+e.case_id+'</span><span style="color: #ccc">&nbsp;</span>'+(e.xml_jobid_title?' <i class="fa fa-angle-double-right text-danger"></i> ':"")+(e.xml_jobid_title?'<span class="xml_jobid_title" style="font-size: 9px; color: #1cd;"><b>'+e.xml_jobid_title+"</b></span>":"")+"<br>"+(e.xml_title_contents?'<span class="xml_title_contents" style="font-size: 10px;">'+e.xml_title_contents+"</span>":"")+"</div>"}},onChange:function(e){case_id_uploading_to=$("#is_br24_employee").val()[0],$.each(select_list_employee_list,(function(e,a){if(a.case_id==case_id_uploading_to)return encrypted_case_id_uploading_to=a.encrypted_case_id,a.try>=1&&$.alert({title:"Already Uploaded previously to this caseID= "+case_id_uploading_to,content:"the files for caseID= "+case_id_uploading_to+" from the previous attempt will all be deleted and replaced with these new files. No backup is being made",type:"warning"}),!1})),null==case_id_uploading_to?$(".fileinput-upload-button").css("display","none"):$(".fileinput-upload-button").css("display",""),0!=fstack.length&&0!=count_files_success&&fstack.length==count_files_success&&($("input[data-ident=upload_contract_mass_upload_file]").fileinput("clear"),count_files_success=0,fstack=[])},onInitialize:function(e){case_id_uploading_to=$("#is_br24_employee").val()[0],$.each(select_list_employee_list,(function(e,a){if(a.case_id==case_id_uploading_to)return encrypted_case_id_uploading_to=a.encrypted_case_id,a.try>=1&&$.alert({title:"Already Uploaded previously to this caseID= "+case_id_uploading_to,content:"the files for caseID= "+case_id_uploading_to+" from the previous attempt will all be deleted and replaced with these new files. No backup is being made",type:"warning"}),!1})),null==case_id_uploading_to?$(".fileinput-upload-button").css("display","none"):$(".fileinput-upload-button").css("display","")}}),is_br24_employee_select_selectize=$is_br24_employee_select[0].selectize,is_br24_employee_select_old_options=is_br24_employee_select_selectize.settings,selectize_focus_handler=function(e,a){var t=$(".selectize-control").outerWidth();$(".selectize-dropdown-content").css("width",t).css("height",600)};is_br24_employee_select_selectize.on("focus",selectize_focus_handler);var item_remove_handler=function(e,a){case_id_uploading_to=null,encrypted_case_id_uploading_to=null};is_br24_employee_select_selectize.on("item_remove",item_remove_handler),$(window).resize((function(){var e=$(".selectize-control").outerWidth();$(".selectize-dropdown-content").css("width",e).css("height",600)}));var count_files_success=0,fstack=[],dropzone_isvisible_check=null;$(document).ready((function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$("#manage_mass_upload_contracts_table").data("token")},timeout:6e5}),$("input[data-ident=upload_contract_mass_upload_file]").fileinput({language:app.data.locale,maxFileCount:800,maxFileSize:4194304,uploadUrl:app.data.urlPostMassUploadContracts,uploadAsync:!0,showUpload:!0,previewFileType:"any",showClose:!1,showCaption:!0,showBrowse:!0,browseClass:"btn btn-primary btn-file btn-fileinput-k",browseIcon:'<i class="glyphicon glyphicon-folder-open"></i> ',showUploadedThumbs:!0,showPreview:!0,showRemove:!0,showUpload:!0,showUploadStats:!0,allowedPreviewTypes:["image","html","text","video","audio","flash"],allowedPreviewMimeTypes:["text/plain"],disabledPreviewExtensions:["dng"],layoutTemplates:{actions:'<div class="file-actions">\n<div class="file-footer-buttons">\n{delete}</div>\n</div>\n<div class="clearfix"></div>',main1:"<div class='input-group {class}'>\n   <div class='input-group-btn input-group-prepend'>\n       {browse}\n       {upload}\n       {remove}\n   </div>\n   {caption}\n</div>{preview}\n",preview:'<div class="file-preview {class}">\n    {close}\n    <div class="close fileinput-remove">×</div>\n    <div class="file-preview-status text-center text-success"></div>\n    <div class="kv-fileinput-error"></div>\n    <div class="{dropClass}">\n    <div class="file-preview-thumbnails">\n    </div>\n    <div class="clearfix"></div>    </div>\n</div>',progress:'<div class="progress">\n    <div class="progress-bar progress-bar-success progress-bar-striped text-center" role="progressbar" aria-valuenow="{percent}" aria-valuemin="0" aria-valuemax="100" style="width:{percent}%;">\n        {status}\n     </div>\n</div>\n{stats}',stats:'<div class="text-info file-upload-stats"><span class="pending-time">{pendingTime}</span> <span class="upload-speed">{uploadSpeed}</span></div>'},preferIconicPreview:!1,previewFileIconSettings:{doc:'<i class="glyphicon glyphicon-file text-primary"></i>',xls:'<i class="glyphicon glyphicon-file text-success"></i>',ppt:'<i class="glyphicon glyphicon-file text-danger"></i>',pdf:'<i class="glyphicon glyphicon-file text-danger"></i>',zip:'<i class="glyphicon glyphicon-file text-muted"></i>',txt:'<i class="glyphicon glyphicon-file text-info"></i>',mov:'<i class="glyphicon glyphicon-file text-warning"></i>',mp3:'<i class="glyphicon glyphicon-file text-warning"></i>',indd:'<i class="glyphicon glyphicon-file text-primary"></i>',dng:'<i class="glyphicon glyphicon-file text-primary"></i>'},hideThumbnailContent:!1,previewFileExtSettings:{doc:function(e){return e.match(/(doc|docx)$/i)},xls:function(e){return e.match(/(xls|xlsx)$/i)},ppt:function(e){return e.match(/(ppt|pptx)$/i)},pdf:function(e){return e.match(/(pdf)$/i)},zip:function(e){return e.match(/(zip|rar|tar|gzip|gz|7z)$/i)},htm:function(e){return e.match(/(htm|html)$/i)},txt:function(e){return e.match(/(txt|ini|csv|java|php|js|css)$/i)},mov:function(e){return e.match(/(avi|mpg|mkv|mov|mp4|3gp|webm|wmv)$/i)},mp3:function(e){return e.match(/(mp3|wav)$/i)},indd:function(e){return e.match(/(indd)$/i)},dng:function(e){return e.match(/(dng)$/i)}},uploadExtraData:function(e,a){return{case_id:case_id_uploading_to,encrypted_case_id:encrypted_case_id_uploading_to}}}).on("filebeforeload",(function(e,a,t,l){0!=fstack.length&&0!=count_files_success&&fstack.length==count_files_success&&($("input[data-ident=upload_contract_mass_upload_file]").fileinput("clear"),count_files_success=0,fstack=[])})).on("fileloaded",(function(e,a,t,l,s){})).on("filebatchselected",(function(e,a){console.log("filebatchselected");var t=$("input[data-ident=upload_contract_mass_upload_file]").fileinput("getFileStack");fstack=[],$.each(t,(function(e,a){void 0!==a&&fstack.push(a)})),console.log("Files selected - "+fstack.length),console.log(fstack),null==case_id_uploading_to&&$(".fileinput-upload-button").css("display","none")})).on("fileselect",(function(event,numFiles,label){console.log("file selected");var res=label.split("."),extension=res[res.length-1];"zip"!=extension&&"rar"!=extension||$.alert({title:"At this moment uploading ."+extension+" is not supported due to the handling on amazon side",content:"the files for caseID= "+case_id_uploading_to+" will not be uploaded.",type:"red",draggable:!1,backgroundDismiss:"ok",escapeKey:!0,animateFromElement:!1,onAction:function(e){$(".jconfirm.jconfirm-light.jconfirm-open").remove()},buttons:{ok:{btnClass:"btn-primary text-white",keys:["enter"],text:eval("app.translations."+app.data.locale+".okay_text"),action:function(){return event.stopPropagation(),$("input[data-ident=upload_contract_mass_upload_file]").fileinput("clear"),is_br24_employee_select_selectize.enable(),$(".remove-single").css("display",""),$(".close.fileinput-remove").css("display",""),!1}}}}),$(".file-drop-zone").css("height","100%"),$("#upload_contract_mass_upload").prop("disabled",!1)})).on("filecleared",(function(e){console.log("filecleared"),count_files_success=0,fstack=[]})).on("filereset",(function(e){console.log("filereset")})).on("filepreremove",(function(e,a,t){console.log("id = "+a+", index = "+t)})).on("fileremoved",(function(e,a,t){console.log("fileremoved");var l=$("input[data-ident=upload_contract_mass_upload_file]").fileinput("getFileStack");fstack=[],$.each(l,(function(e,a){void 0!==a&&fstack.push(a)})),console.log("Files selected - "+fstack.length),console.log(fstack)})).on("fileuploaded",(function(e,a,t,l){console.log("fileuploaded"),1==a.jqXHR.responseJSON.success&&count_files_success++})).on("filebatchuploadsuccess",(function(e,a){console.log("filebatchuploadsuccess")})).on("filebatchuploadcomplete",(function(e,a,t){if(console.log("filebatchuploadcomplete"),console.log(fstack.length),console.log(count_files_success),fstack.length==count_files_success){is_br24_employee_select_selectize.enable(),$(".remove-single").css("display",""),$(".close.fileinput-remove").css("display",""),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var l={case_id:case_id_uploading_to,encrypted_case_id:encrypted_case_id_uploading_to,fstack:JSON.stringify(fstack)};app.ajax.jsonGET(app.data.oppC_getTriggerManualUploadStartEventOfCaseID,l,null,(function(){1==app.ajax.result.success?($.alert({title:"Files saved to Download Upload Server",content:"the files for caseID= "+case_id_uploading_to+" have been entered into the upload queue. It will be zipped and uploaded to s3 momentarily.",type:"green"}),count_files_success=0,fstack=[]):$.alert({title:"Files saved to Download Upload Server but there were errors",content:"the files for caseID= "+case_id_uploading_to+" have been entered into the upload queue. But there were errors when trying to zip. "+app.ajax.result.unzip_log,type:"red"}),app.util.fullscreenloading_end()}))}else is_br24_employee_select_selectize.enable(),$(".remove-single").css("display",""),$(".close.fileinput-remove").css("display",""),app.util.fullscreenloading_end(),$.alert({title:"Fail!",content:"Fail",type:"red"})})).on("filepreupload",(function(e,a,t,l){})).on("fileimagesloaded",(function(e){console.log("fileimagesloaded")})).on("fileduplicateerror",(function(e,a,t,l,s,o,n){})).on("fileuploaderror",(function(e,a,t){a.form,a.files,a.extra,a.response,a.reader;console.log("File upload error",a.index,a.fileId,t),$.alert({title:"File Fail error!",boxWidth:"700px",useBootstrap:!1,content:t,type:"red"}),$("input[data-ident=upload_contract_mass_upload_file]").fileinput("cancel"),is_br24_employee_select_selectize.enable(),$(".remove-single").css("display",""),$(".close.fileinput-remove").css("display","")})),$(".fileinput-upload-button").click((function(e){app.util.fullscreenloading_start(),is_br24_employee_select_selectize.disable(),$(".remove-single").css("display","none"),$(".close.fileinput-remove").css("display","none")})),$("input.file-caption-name").prop("disabled",!0).css("cursor","pointer"),$("input.file-caption-name").click((function(e){e.stopPropagation(),$("input[type=file]").trigger("click")})),$("input[type=file]").change((function(){$("input.file-caption-name").val($(this).val())})),$("div.file-caption").click((function(e){e.stopPropagation(),$("input[type=file]").trigger("click")})),$("div.file-drop-zone").css("cursor","pointer"),$("div.file-drop-zone").click((function(e){e.stopPropagation(),$("input[type=file]").trigger("click")})),$(".kv-file-remove").click((function(e){e.stopImmediatePropagation()})),$(".kv-file-download").click((function(e){e.stopImmediatePropagation()})),$(".file-preview-thumbnails").click((function(e){e.stopImmediatePropagation()})),$(".kv-fileinput-error").click((function(e){e.stopImmediatePropagation()})),$(".fileinput-upload").click((function(e){count_files_success=0}));var constantlychecking_if_timer=setInterval((function(){1==$("div.file-drop-zone-title").is(":visible")?$("div.file-drop-zone-title").css("cursor","pointer"):$("div.file-preview-frame").css("cursor","pointer"),1==$(".popover").is(":visible")&&$(".popover").css("z-index","20000000")}),500)}))}}},manage_downloadlist:{profile:{init:function(){$(window).on("load",(function(){app.util.period(),$(".previous-surround, .next-surround").css("display","none"),NProgress.configure({parent:"#ibox-title",showSpinner:!1}),app_ops.manage_downloadlist.profile.init_next(),app.util.fixedheaderviewporthandler(),console.log("manage_downloadlist.index"),window.newdataimported=!1}))},init_next:function(){var e=document.referrer,a=[];if(null!==JSON.parse(localStorage.getItem("Br24_"+app.env()+"_managedownloadlistinfo_oomrbnoa"))){null==e||""==e?($(".loader").append('<span style="position: absolute; top: 45%; left: 50%; transform: translateX(-50%) translateY(-50%); font-size: 22px; color: red; text-align:center">Another Manage downloadlist tab is open already.<br>for security reasons only one instance is allowed<br><a style="font-size:10px" href="/downloadlist">Back Home</a></span>'),NProgress.done(),$(".navbar-nav").remove(),$(".ibox-content").remove(),$(".loader").css("background","rgb(249,249,249, 0.5"),$(".nav-tabs").remove(),$(".ibox-title").remove(),$(".tab-content").remove()):($(".loader").append('<span style="position: absolute; top: 45%; left: 50%; transform: translateX(-50%) translateY(-50%); font-size: 22px; color: red; text-align:center">Another Manage downloadlist tab is open already.<br>for security reasons only one instance is allowed<br><a style="font-size:10px" href="/downloadlist">Back Home</a></span>'),NProgress.done(),$(".loader").css("background","rgb(249,249,249, 0.5"),$(".ibox-content").remove(),$(".nav-tabs").remove(),$(".tab-content").remove(),$(".navbar-nav").remove(),$(".ibox-title").remove()),$("#br24-navbar").children().length<=0&&(console.log("try reloading again but clear cache first"),localStorage.removeItem("Br24_"+app.env()+"_managedownloadlistinfo_oomrbnoa"),window.location.reload())}else{a.oomrbnoa={managedownloadlist_browsertabstatus:"open",timestamp:(new Date).getTime()},localStorage.setItem("Br24_"+app.env()+"_managedownloadlistinfo_oomrbnoa",JSON.stringify(a.oomrbnoa)),app_ops.manage_downloadlist.profile.get_downloadlistInfo_tab();var t=1;$(document).ajaxStop((function(){1==t&&(app_ops.manage_downloadlist.profile.add_edit_downloadlist_colorbox(),t=2)})),window.onbeforeunload=function(){},window.onunload=function(){localStorage.removeItem("Br24_"+app.env()+"_managedownloadlistinfo_oomrbnoa")}}},add_edit_downloadlist_colorbox:function(){app_ops.manage_downloadlist.profile.downloadlist_table(),app_ops.manage_downloadlist.profile.handlefixedheaderpinning()},downloadlist_table:function(){var prefered_dateFormat=null,patt=null,prefered_dateFormat_placeholder=null,number_format_per_locale=null,delimiter_for_splitting_variable=null,numberformat_locale=null;"vi"===app.data.locale||"en"===app.data.locale?(prefered_dateFormat="dd/mm/yy",prefered_dateFormat_placeholder="dd/mm/yyyy",patt=new RegExp("^([0]?[1-9]|[1|2][0-9]|[3][0|1])[./-]([0]?[1-9]|[1][0-2])[./-]([0-9]{4}|[0-9]{2})$"),delimiter_for_splitting_variable="/"):"de"===app.data.locale&&(prefered_dateFormat="dd.mm.yy",prefered_dateFormat_placeholder="dd.mm.yyyy",patt=new RegExp("^([0]?[1-9]|[1|2][0-9]|[3][0|1])[./-]([0]?[1-9]|[1][0-2])[./-]([0-9]{4}|[0-9]{2})$"),delimiter_for_splitting_variable="."),"VND"==app.data.currency?(number_format_per_locale="#,##0.## ₫",numberformat_locale="vi"):"USD"==app.data.currency?(number_format_per_locale="$ #,##0.00",numberformat_locale="en"):"EUR"==app.data.currency?(number_format_per_locale="€ #,##0.00",numberformat_locale="de"):(number_format_per_locale="#,##0.## ₫",numberformat_locale="vi");var global_search_value="",byStatus_value="",byCompanyPosition_value="",byCompanyDepartment_value="",byEditorLevel_value="",byEnabledDisabled_value="",byJobStatus_value="";window.byHideShowColumn_value="",window.byShowColumn_value="",window.byHideColumn_value="";var byAssignee_value="",byToolClient_value="",default_datepicker_date_value=app.data.default_datepicker_date,prev_month_min_date_value=app.data.minDatefordatefromfilter,maxDatefordatefromfilter_prep=app.data.maxDatefordatefromfilter,min_date_value=app.data.timesheet_period.firstdateofMonth,max_date_value=app.data.timesheet_period.lastdateofMonth,prev_min_date_value=app.data.timesheet_period.firstdateofMonth,prev_max_date_value=app.data.timesheet_period.lastdateofMonth,minD_YYYY="",minD_MM="",minD_DD="",maxD_YYYY="",maxD_MM="",maxD_DD="",report_date_value=null,prev_month_from=prev_month_min_date_value.split(delimiter_for_splitting_variable),max_month_from=maxDatefordatefromfilter_prep.split(delimiter_for_splitting_variable),from=min_date_value.split("-"),to_date=max_date_value.split("-");("vi"===app.data.locale||"en"===app.data.locale||"de"===app.data.locale)&&(minD_YYYY=parseInt(prev_month_from[2]),minD_MM=parseInt(prev_month_from[1])-1,minD_DD=parseInt(prev_month_from[0]),maxD_YYYY=parseInt(max_month_from[2]),maxD_MM=parseInt(max_month_from[1])-1,maxD_DD=parseInt(max_month_from[0]));var default_datepicker_date=default_datepicker_date_value.split("-"),default_minD_YYYY=parseInt(default_datepicker_date[0]),default_minD_MM=parseInt(default_datepicker_date[1])-1,default_minD_DD=parseInt(default_datepicker_date[2]),defaultDateVARIABLE=new Date(default_minD_YYYY,default_minD_MM,default_minD_DD),editing_configuration=null,keep_track_of_last_clicked_item_to_react_after_reload=null,keep_track_of_last_clicked_item_data_attribute_to_react_after_reload=null,keep_track_of_input_changes_to_assist_screen_load_input_disable=null,keep_track_of_last_clicked_easyautocomplete_to_reopen=null,keep_track_of_last_clicked_item_to_react_after_reload_2=null,keep_track_of_last_clicked_item_data_attribute_to_react_after_reload_2=null,only_trigger_once=null,re_open_requested=null,reopen_refreshIntervalId=null,reopen_timer=function(){reopen_refreshIntervalId=setInterval((function(){$(".dataTable tbody td.parent."+keep_track_of_last_clicked_item_to_react_after_reload_2+"[data-employee='"+keep_track_of_last_clicked_item_data_attribute_to_react_after_reload_2+"']").trigger("click"),clearInterval(reopen_refreshIntervalId),keep_track_of_last_clicked_easyautocomplete_to_reopen=null,keep_track_of_last_clicked_item_to_react_after_reload_2=null,keep_track_of_last_clicked_item_data_attribute_to_react_after_reload_2=null}),100)},filter_load=JSON.parse(sessionStorage.getItem("Br24_"+app.env()+"_managedownloadlistTable_table_downloadlistTable"));if(null!==filter_load&&(""!==filter_load.filters.global_search&&(global_search_value=filter_load.filters.global_search),""!==filter_load.filters.byStatus&&(byStatus_value=filter_load.filters.byStatus),""!==filter_load.filters.byTeam&&(byCompanyDepartment_value=filter_load.filters.byTeam),""!==filter_load.filters.byPosition&&(byCompanyPosition_value=filter_load.filters.byPosition),""!==filter_load.filters.byEditor_level&&(byEditorLevel_value=filter_load.filters.byEditor_level),""!==filter_load.filters.byEnabledDisabled&&(byEnabledDisabled_value=filter_load.filters.byEnabledDisabled),""!==filter_load.filters.byJobStatus&&(byJobStatus_value=filter_load.filters.byJobStatus),""!==filter_load.filters.byHideShowColumn_val&&(window.byHideShowColumn_value=filter_load.filters.byHideShowColumn_val),""!==filter_load.filters.byShowColumn&&(window.byShowColumn_value=filter_load.filters.byShowColumn),""!==filter_load.filters.byHideColumn&&(window.byHideColumn_value=filter_load.filters.byHideColumn),""!==filter_load.filters.byAssignee&&(byAssignee_value=filter_load.filters.byAssignee),""!==filter_load.filters.byToolClient&&(byToolClient_value=filter_load.filters.byToolClient)),"Chrome"==app.data.browser_detected)var broswer_columnDefs=[{targets:[0],width:"10px"},{targets:[1],width:"10px"},{targets:[2],width:"70px"},{targets:[3],width:"10px"},{targets:[4],width:"10px"},{targets:[5],width:"10px"},{targets:[6],width:"10px"},{targets:[7],width:"10px"},{targets:[8],width:"30px"},{targets:[9],width:"5px"},{targets:[10],width:"200px"},{targets:[12],width:"100px"},{targets:[12],width:"5px"},{targets:[13],width:"30px"},{targets:[14],width:"60px"},{targets:[15,16,17],width:"10px"}],browser_columns=[{orderable:!0,searchable:!0,data:"case_id",className:"number_of_pictures_col_width"},{orderable:!1,searchable:!0,data:"xml_jobid_title",className:"number_of_pictures_col_width"},{orderable:!1,searchable:!0,data:"xml_title_contents",className:"xml_title_contents_col_width"},{orderable:!1,searchable:!0,data:"number_of_pictures",className:"extra_small_col_width"},{orderable:!1,searchable:!0,data:"instructions_col",className:"extra_small_col_width"},{orderable:!1,searchable:!0,data:"preview_col",className:"extra_small_col_width two_weeks_checkbox_col"},{orderable:!1,searchable:!0,data:"output_files_col",className:"extra_small_col_width"},{orderable:!0,searchable:!1,data:"delivery_time",name:"expected_delivery_date_coalesce_sortorder",className:"delivery_time_col_width"},{orderable:!1,searchable:!1,data:"assignees",className:"assignee_tags_col_width"},{orderable:!1,searchable:!1,data:"custom_row_color_input",className:"hidden extra_small_col_width"},{orderable:!1,searchable:!1,data:"internal_notes",className:"internal_notes_col_width"},{orderable:!1,searchable:!1,data:"job_from",className:"hidden extra_small_col_width"},{orderable:!1,searchable:!1,data:"rating",className:"hidden assignee_tags_col_width"},{orderable:!1,searchable:!1,data:"tags",className:"assignee_tags_col_width"},{orderable:!0,searchable:!0,data:"job_status",name:"status_grouping_sort_order",className:"modified_dates_col_with"},{orderable:!0,searchable:!0,data:"created_at",name:"created_at_sortorder",className:"modified_dates_col_with"},{orderable:!1,searchable:!1,data:"last_updated_by",className:"modified_dates_col_with"},{orderable:!0,searchable:!1,data:"last_updated",name:"last_updated_sortorder",className:"modified_dates_col_with"}];else if("Firefox"==app.data.browser_detected)var broswer_columnDefs=[{targets:[0],width:"10px"},{targets:[1],width:"10px"},{targets:[2],width:"10px"},{targets:[3],width:"10px"},{targets:[4],width:"10px"},{targets:[5],width:"10px"},{targets:[6],width:"10px"},{targets:[7],width:"10px"},{targets:[8],width:"10px"},{targets:[9],width:"5px"},{targets:[10],width:"10px"},{targets:[11],width:"10px"},{targets:[12],width:"5px"},{targets:[13],width:"10px"},{targets:[14],width:"10px"},{targets:[15,16,17],width:"10px"}],browser_columns=[{orderable:!0,searchable:!0,data:"case_id",className:"number_of_pictures_col_width"},{orderable:!1,searchable:!0,data:"xml_jobid_title",className:"number_of_pictures_col_width"},{orderable:!1,searchable:!0,data:"xml_title_contents",className:"xml_title_contents_col_width"},{orderable:!1,searchable:!0,data:"number_of_pictures",className:"extra_small_col_width"},{orderable:!1,searchable:!0,data:"instructions_col",className:"extra_small_col_width"},{orderable:!1,searchable:!0,data:"preview_col",className:"extra_small_col_width two_weeks_checkbox_col"},{orderable:!1,searchable:!0,data:"output_files_col",className:"extra_small_col_width"},{orderable:!0,searchable:!1,data:"delivery_time",name:"expected_delivery_date_coalesce_sortorder",className:"delivery_time_col_width"},{orderable:!1,searchable:!1,data:"assignees",className:"assignee_tags_col_width"},{orderable:!1,searchable:!1,data:"custom_row_color_input",className:"hidden extra_small_col_width"},{orderable:!1,searchable:!1,data:"internal_notes",className:"internal_notes_col_width"},{orderable:!1,searchable:!1,data:"job_from",className:"hidden extra_small_col_width"},{orderable:!1,searchable:!1,data:"rating",className:"hidden assignee_tags_col_width"},{orderable:!1,searchable:!1,data:"tags",className:"assignee_tags_col_width"},{orderable:!0,searchable:!0,data:"job_status",name:"status_grouping_sort_order",className:"modified_dates_col_with"},{orderable:!0,searchable:!0,data:"created_at",name:"created_at_sortorder",className:"modified_dates_col_with"},{orderable:!1,searchable:!1,data:"last_updated_by",className:"modified_dates_col_with"},{orderable:!0,searchable:!1,data:"last_updated",name:"last_updated_sortorder",className:"modified_dates_col_with"}];else var broswer_columnDefs=[{targets:[0],width:"10px"},{targets:[1],width:"10px"},{targets:[2],width:"70px"},{targets:[3],width:"10px"},{targets:[4],width:"10px"},{targets:[5],width:"10px"},{targets:[6],width:"10px"},{targets:[7],width:"10px"},{targets:[8],width:"30px"},{targets:[9],width:"5px"},{targets:[10],width:"200px"},{targets:[11],width:"100px"},{targets:[12],width:"5px"},{targets:[13],width:"30px"},{targets:[14],width:"60px"},{targets:[15,16,17],width:"10px"}],browser_columns=[{orderable:!0,searchable:!0,data:"case_id",className:"number_of_pictures_col_width"},{orderable:!1,searchable:!0,data:"xml_jobid_title",className:"number_of_pictures_col_width"},{orderable:!1,searchable:!0,data:"xml_title_contents",className:"xml_title_contents_col_width"},{orderable:!1,searchable:!0,data:"number_of_pictures",className:"extra_small_col_width"},{orderable:!1,searchable:!0,data:"instructions_col",className:"extra_small_col_width"},{orderable:!1,searchable:!0,data:"preview_col",className:"extra_small_col_width two_weeks_checkbox_col"},{orderable:!1,searchable:!0,data:"output_files_col",className:"extra_small_col_width"},{orderable:!0,searchable:!1,data:"delivery_time",name:"expected_delivery_date_coalesce_sortorder",className:"delivery_time_col_width"},{orderable:!1,searchable:!1,data:"assignees",className:"assignee_tags_col_width"},{orderable:!1,searchable:!1,data:"custom_row_color_input",className:"hidden extra_small_col_width"},{orderable:!1,searchable:!1,data:"internal_notes",className:"internal_notes_col_width"},{orderable:!1,searchable:!1,data:"job_from",className:"hidden extra_small_col_width"},{orderable:!1,searchable:!1,data:"rating",className:"hidden assignee_tags_col_width"},{orderable:!1,searchable:!1,data:"tags",className:"assignee_tags_col_width"},{orderable:!0,searchable:!0,data:"job_status",name:"status_grouping_sort_order",className:"modified_dates_col_with"},{orderable:!0,searchable:!0,data:"created_at",name:"created_at_sortorder",className:"modified_dates_col_with"},{orderable:!1,searchable:!1,data:"last_updated_by",className:"modified_dates_col_with"},{orderable:!0,searchable:!1,data:"last_updated",name:"last_updated_sortorder",className:"modified_dates_col_with"}];window.downloadlisttable=$("#downloadlistTable").DataTable({pageLength:app.conf.table.pageLength,lengthMenu:app.conf.table.lengthMenu,processing:!0,serverSide:!0,bFilter:!0,ordering:!0,responsive:!0,scrollCollapse:!0,bAutoWidth:!0,fixedHeader:{header:!0,footer:!0,headerOffset:0,footerOffset:0},aaSorting:[],stateSave:!0,stateDuration:-1,searching:!1,stateSaveCallback:function(e,a){var t=$("#status_filter option:selected").map((function(){return $(this).val()})).get().join("|"),l=$("#team_filter option:selected").map((function(){return $(this).val()})).get().join("|"),s=$("#position_filter option:selected").map((function(){return $(this).val()})).get().join("|"),o=$("#editor_level_filter option:selected").map((function(){return $(this).val()})).get().join("|"),n=$("#jobstatus_filter option:selected").map((function(){return $(this).val()})).get().join("|"),i=$("#assignees_filter option:selected").map((function(){return $(this).val()})).get().join("|"),r=$("#tool_client_filter option:selected").map((function(){return $(this).val()})).get().join("|"),d=$("#global_search_filter").val(),c=prefered_dateFormat;a.filters={status_cb:t,team_cb:l,position_cb:s,editor_level_cb:o,job_status_cb:n,assignee_cb:i,tool_client_cb:r,byEnabledDisabled:byEnabledDisabled_value,byStatus:byStatus_value,byTeam:byCompanyDepartment_value,byPosition:byCompanyPosition_value,byEditor_level:byEditorLevel_value,byJobStatus:byJobStatus_value,byAssignee:byAssignee_value,byToolClient:byToolClient_value,byHideShowColumn_val:window.byHideShowColumn_value,byHideColumn:window.byHideColumn_value,byShowColumn:window.byShowColumn_value,locale_date_format:c,global_search:d},sessionStorage.setItem("Br24_"+app.env()+"_managedownloadlistTable_table_"+e.sInstance,JSON.stringify(a))},stateLoadCallback:function(e){return JSON.parse(sessionStorage.getItem("Br24_"+app.env()+"_managedownloadlistTable_table_"+e.sInstance))},oLanguage:{sProcessing:"<div class='loader_blank'></div><div class='processingblured'>"+eval("app.translations."+app.data.locale+".please_wait_loading")+"<br><img src='../img/loader.gif'></div><div class='no_blurtext'>"+eval("app.translations."+app.data.locale+".please_wait_loading")+"<br><img src='../img/loader.gif'></div>",sZeroRecords:eval("app.translations."+app.data.locale+".no_downloadlist_added")},ajax:{url:app.data.getdownloadlistinfo_db_table,dataSrc:"data",type:"POST",beforeSend:function(e,a){a.crossDomain||e.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},data:function(e){e.report_date_value=report_date_value,e.locale_date_format=prefered_dateFormat,e.global_search_value=global_search_value,e.byStatus_value=byStatus_value,e.byCompanyPosition_value=byCompanyPosition_value,e.byCompanyDepartment_value=byCompanyDepartment_value,e.byEditorLevel_value=byEditorLevel_value,e.byJobStatus_value=byJobStatus_value,e.byEnabledDisabled_value=byEnabledDisabled_value,e.byAssignee_value=byAssignee_value,e.byToolClient_value=byToolClient_value}},columnDefs:broswer_columnDefs,columns:browser_columns,order:[[7,"asc"]],rowGroup:{dataSrc:"expected_delivery_time_custom_grouping",startRender:function(e,a){return $('<tr style="height: 5px; max-height: 5px;" class="group group-start"><td style="font-size: 5px; height: 5px; max-height: 5px;" class="status_grouping_style unselectable" colspan="17"><div style="text-align: left; margin-left: 10px"></div></td></tr>')}},dom:'<".controlsfortable"<"#export_buttonlocation.html5buttons">rl<"#custom_visibility_buttons">f<"#custom_global_filter.dataTables_filter"><"#jobstatus_filter.dataTables_filter"><"#assignees_filter.dataTables_filter"><"#tool_client_buttons.dataTables_filter"><"#editor_level_filter.dataTables_filter"><"#team_filter.dataTables_filter"><"#position_filter.dataTables_filter"><"#status_filter.dataTables_filter"><"#birthdaytodate_filter.dataTables_filter"><"#birthdayfromdate_filter.dataTables_filter"><"#birthmonths_filter.dataTables_filter"><"#clear_filter.html5buttons"><"clearfix"><".table_block"<".table_float_left"i><".table_float_right"p>>>t<".controlsfortable"p>',createdRow:function(e,a,t){var s="";s=void 0===a.custom_color_rgb||null===a.custom_color_rgb?"":"#"+a.custom_color_rgb,$("td",e).parent().attr("data-rowindex",t).css("background-color",s),$("td",e).parent().attr("data-encrypted_case_id",a.encrypted_case_id);if("Chrome"==app.data.browser_detected)var o="file://192.168.1.3/jobs/";else if("Firefox"==app.data.browser_detected)o="file://///192.168.1.3/jobs/";else o="file://192.168.1.3/jobs/";$.each(a,(function(t,l){if(t.indexOf("case_id")>=0&&$("td",e).eq(0).html('<a class="button keyboardshortcutcombinationtolinktosharedfolder" style="text-decoration: none; font-weight: 900;" data-backup_href="" data-alt_href="'+o+a.case_id+'/" href="/uploadfiles/'+a.encrypted_case_id+'" target="_blank">'+a.case_id_display+"</a>"),t.indexOf("xml_jobid_title")>=0){if(""==a.xml_jobid_title)var s="";else s='<a class="button keyboardshortcutcombinationtolinktosharedfolder" style="text-decoration: none; font-weight: 900;" data-backup_href="" data-alt_href="'+o+a.case_id+'/" href="/uploadfiles/'+a.encrypted_case_id+'" target="_blank">'+a.xml_jobid_title_display+"</a>";$("td",e).eq(1).html(s)}if(t.indexOf("internal_notes")>=0&&($("td",e).eq(10).css("cursor","pointer").css("text-align","left").css("vertical-align","top").css("word-break","break-word").addClass("change_internal_notes").addClass("internal_notes"),$("td",e).eq(10).attr("data-case_id",a.case_id).attr("data-date_ts",a.idx).addClass("parent").css("padding","")),t.indexOf("instructions_col")>=0){if($("td",e).eq(4).css("cursor","pointer").addClass("change_instructions_col").addClass("instructions_col"),$("td",e).eq(4).attr("data-case_id",a.case_id).attr("data-date_ts",a.idx).addClass("parent").css("padding",""),""==a.xml_jobinfoproduction)var n="";else n='<span class="instructions_popover" data-container="body" data-toggle="popover" data-placement="bottom" data-content="'+a.xml_jobinfoproduction+'">'+a.instructions_col+"</span>";$("td",e).eq(4).html(n)}if(t.indexOf("preview_col")>=0&&($("td",e).eq(5).css("cursor","pointer").addClass("change_preview_col").addClass("preview_col"),$("td",e).eq(5).attr("data-case_id",a.case_id).attr("data-date_ts",a.idx).addClass("parent").css("padding","")),t.indexOf("number_of_pictures")>=0){if(null==a.number_of_pictures_example)var i="&nbsp;&nbsp;&nbsp;&nbsp;";else i=a.number_of_pictures_example;if(null==a.number_of_pictures_new)var r="&nbsp;&nbsp;&nbsp;&nbsp;";else r=a.number_of_pictures_new;$("td",e).eq(3).html('<div style="width: 100%; position:relative; padding: 4px"><div style="display:inline-block; width: 33.33%;">'+i+'</div><div style="display:inline-block; width: 33.33%;">|</div><div style="display:inline-block; width: 33.33%;">'+r+"</div></div>")}if(t.indexOf("output_files_col")>=0){if(null==a.output_number_of_pictures_expected)var d="&nbsp;&nbsp;&nbsp;&nbsp;";else d=a.output_number_of_pictures_expected;if(null==a.output_number_of_pictures_real)var c="&nbsp;&nbsp;&nbsp;&nbsp;";else c=a.output_number_of_pictures_real;$("td",e).eq(6).addClass("change_output_files_col").addClass("output_files_col"),$("td",e).eq(6).attr("data-case_id",a.case_id).attr("data-date_ts",a.idx).addClass("parent").css("padding",""),$("td",e).eq(6).html('<div class="manual_change_output_files_col"  style="width: 100%; position:relative; padding: 4px"><div class="output_number_of_pictures_expected" style="display:inline-block; width: 33.33%;">'+d+'</div><div style="display:inline-block; width: 33.33%;">|</div><div class="output_number_of_pictures_real" style="display:inline-block; width: 33.33%;">'+c+"</div></div>")}if(t.indexOf("rating")>=0){if(null==a.custom_job_star_rating_comment)var _="",p='<i name="edit_custom_star_rating_comment_'+a.idx+'" style="display: none; margin-left: 8px; font-size: 17px; cursor: pointer;" class="fa fa-edit"></i>';else _=a.custom_job_star_rating_comment,p='<i name="edit_custom_star_rating_comment_'+a.idx+'" style="margin-left: 8px; font-size: 17px; cursor: pointer;" class="fa fa-edit"></i>';$("td",e).eq(12).html('<div data-html="true" data-container="body" data-toggle="popover" data-placement="top" data-trigger="hover" data-content="'+_+'"><div name="edit_custom_star_rating_'+a.idx+'" class="rateit" data-rateit-value="'+a.rating+'" data-rateit-ispreset="true" data-rateit-readonly="false"></div>'+p+"</div>"),$("td",e).eq(12).addClass("change_rating").addClass("rating"),$("td",e).eq(12).attr("data-case_id",a.case_id).attr("data-date_ts",a.idx).addClass("parent").css("padding","")}if(t.indexOf("tags")>=0&&($("td",e).eq(13).css("cursor","pointer").addClass("change_tags").addClass("tags"),$("td",e).eq(13).attr("data-case_id",a.case_id).attr("data-date_ts",a.idx).addClass("parent").css("padding","")),t.indexOf("job_status")>=0&&($("td",e).eq(14).css("cursor","pointer").addClass("change_job_status").addClass("job_status"),$("td",e).eq(14).attr("data-case_id",a.case_id).attr("data-date_ts",a.idx).addClass("parent").css("padding","")),t.indexOf("assignees")>=0&&($("td",e).eq(8).css("cursor","pointer").addClass("change_assignees").addClass("assignees"),$("td",e).eq(8).attr("data-case_id",a.case_id).attr("data-date_ts",a.idx).addClass("parent").css("padding","")),t.indexOf("delivery_time")>=0&&($("td",e).eq(7).html('<span style="'+a.color_it+'">'+a.delivery_time+"</span>"),$("td",e).eq(7).css("cursor","pointer").addClass("change_delivery_time").addClass("delivery_time"),$("td",e).eq(7).attr("data-case_id",a.case_id).attr("data-date_ts",a.idx).addClass("parent").css("padding","")),t.indexOf("custom_row_color")>=0&&($("td",e).eq(9).html('<div id="colorPicker_'+a.case_id+'" class="colorPicker"><a class="color"><div class="colorInner" style="background-color: '+a.custom_color_rgb+';"></div></a><div class="track"></div><ul class="dropdown"><li></li></ul><input type="hidden" class="colorInput" value="#'+a.custom_color+'"></div>'),$("td",e).eq(9).addClass("change_custom_row_color").addClass("custom_row_color"),$("td",e).eq(9).attr("data-case_id",a.case_id).attr("data-date_ts",a.idx).addClass("parent").css("padding","").css("background-color",a.custom_color_rgb_manually_chosen)),t.indexOf("last_updated_by")>=0){if(null==a.last_updated_by)var u="";else u=a.last_updated_by;$("td",e).eq(16).html('<span style="font-size: 8px;">'+u+"</span>"),$("td",e).eq(16).addClass("last_updated_by"),$("td",e).eq(16).attr("data-case_id",a.case_id).attr("data-date_ts",a.idx).addClass("parent").css("padding","")}t.indexOf("last_updated")>=0&&($("td",e).eq(17).addClass("last_updated"),$("td",e).eq(17).attr("data-case_id",a.case_id).attr("data-date_ts",a.idx).addClass("parent").css("padding",""))}));app.data.section.indexOf("accounting"),app.data.auth_user_permissions.indexOf("WRITE accounting");""==s?$("td",e).parent().css("color","#676A6C"):function(e){var a=e.replace("rgb(","").replace(")","").split(","),t=a[0],s=a[1],o=a[2];c=[t/255,s/255,o/255];for(var n=0;n<c.length;++n)c[n]<=.03928?c[n]=c[n]/12.92:c[n]=Math.pow((c[n]+.055)/1.055,2.4);return l=.2126*c[0]+.7152*c[1]+.0722*c[2],l}($("td",e).parent().css("background-color"))>.433?$("td",e).parent().css("color","#676A6C"):$("td",e).parent().css("color","#FFFFFF");var n=parseInt(a.created_at_timestamp),i=parseInt((new Date).getTime()/1e3)-n,r=$("td",e).closest("tr");i<=7200?$(r).css("border","2px solid #f8ac59").css("-moz-box-shadow","inset 0 0 20px #f8ac59").css("-webkit-box-shadow","inset 0 0 20px #f8ac59").css("box-shadow","inset 0 0 20px #f8ac59"):$(r).css("border","").css("-moz-box-shadow","").css("-webkit-box-shadow","").css("box-shadow","")},drawCallback:function(settings){var api=this.api(),json=api.ajax.json();$(document).ready((function(){var e=JSON.parse(sessionStorage.getItem("Br24_"+app.env()+"_edit_downloadlist_scroll_position_data"));if(null!==e){if(""!==e.scroll){var a=e.scroll;$(document).scrollTop(a)}sessionStorage.removeItem("Br24_"+app.env()+"_edit_downloadlist_scroll_position_data")}})),$("input[type=search]").focus(),$(".ms-has-selections")[0]?$('a[name="clearallfilters"]').css("display","block"):$('a[name="clearallfilters"]').css("display","none");var api=this.api(),refreshTimeout=null;function isEmpty(e){for(var a in e)if(e.hasOwnProperty(a))return!1;return!0}function pad(e,a){for(var t=""+e;t.length<a;)t="0"+t;return t}$('[data-toggle="popover"]').popover({placement:"auto bottom",trigger:"manual",html:!0,animation:!1}).on("mouseenter",(function(){var e,a=this;e=a,refreshTimeout=setInterval((function(){$(e).popover("show")}),300),$(this).siblings(".popover").on("mouseleave",(function(){$(a).popover("hide")}))})).on("mouseleave",(function(){clearInterval(refreshTimeout);var e=this,a=function(){setTimeout((function(){$(".popover:hover").length?a():$(e).popover("hide")}),50)};a()})),app.util.nprogressdone();var prefered_dateFormat=null,patt=null,prefered_dateFormat_placeholder=null,number_format_per_locale=null,delimiter_for_splitting_variable=null,numberformat_locale=null;"vi"===app.data.locale||"en"===app.data.locale?(prefered_dateFormat="dd/mm/yy",prefered_dateFormat_placeholder="dd/mm/yyyy",patt=new RegExp("^([0]?[1-9]|[1|2][0-9]|[3][0|1])[./-]([0]?[1-9]|[1][0-2])[./-]([0-9]{4}|[0-9]{2})$"),delimiter_for_splitting_variable="/"):"de"===app.data.locale&&(prefered_dateFormat="dd.mm.yy",prefered_dateFormat_placeholder="dd.mm.yyyy",patt=new RegExp("^([0]?[1-9]|[1|2][0-9]|[3][0|1])[./-]([0]?[1-9]|[1][0-2])[./-]([0-9]{4}|[0-9]{2})$"),delimiter_for_splitting_variable="."),"VND"==app.data.currency?(number_format_per_locale="#,##0.## ₫",numberformat_locale="vi"):"USD"==app.data.currency?(number_format_per_locale="$ #,##0.00",numberformat_locale="en"):"EUR"==app.data.currency?(number_format_per_locale="€ #,##0.00",numberformat_locale="de"):(number_format_per_locale="#,##0.## ₫",numberformat_locale="vi"),$(".currency_number_format").formatNumber({format:number_format_per_locale,locale:numberformat_locale}),$("div[class*='colorPicker']").tinycolorpicker();var new_value=null,new_value_id=null,success_ajax_then_refresh=null;$(".dataTable tbody").off("click","td.parent.change_job_status").on("click","td.parent.change_job_status",(function(event){var target=event.target;event.preventDefault();var tr=$(this).closest("tr"),td=$(this),original_html=$(this).html(),row=window.downloadlisttable.row(tr),thecellvalue=$(this).text(),rowIndex=tr.data("rowindex"),change_status_case_Id=$(this).data("case_id"),encrypted_case_id_uploading_to=tr.data("encrypted_case_id");keep_track_of_last_clicked_item_data_attribute_to_react_after_reload=change_status_case_Id;var timestamp_Id=$(this).data("date_ts");function triggerFocus(){var e=jQuery.Event("keyup",{keyCode:65,which:65});$("#editrecord_input").focus(),$("#editrecord_input").attr("value",""),$("#editrecord_input").triggerHandler(e),$("#editrecord_input").trigger("change"),$("#editrecord_input").css("cursor","default")}if($(td).hasClass("from_amount_op")&&(keep_track_of_last_clicked_item_to_react_after_reload="change_math_operand.from_amount_op"),$(td).hasClass("to_amount_op")&&(keep_track_of_last_clicked_item_to_react_after_reload="change_math_operand.to_amount_op"),1==$("#editrecord_input").is(":visible"));else{var input=$('<input id="editrecord_input" style="color: #000; text-align:center; width: 80px; display: block; margin: 0 auto; z-index: 12;" readonly></input>');input.val(thecellvalue),td.html(input);var cell=window.downloadlisttable.cell(this),options={data:app.data.ajax_getAccountingPITMathOperatorSelectOptionList.original,getValue:function(e){return e.name},preparePostData:function(e){return e.timestamp_Id=timestamp_Id,td.css("background","url(../img/loader.gif) 50% 50% no-repeat rgba(0, 0, 0, 0)"),$("#editrecord_input").css("opacity",0),$(".easy-autocomplete-container").css("opacity",0),$(document.body).addClass("nprogress-busy").css("pointer-events","none").css("cursor","wait"),e},template:{type:"custom",method:function(e,a){if(a.name.toLowerCase()!=thecellvalue){return'<div class="key_box_tsr_bridge"><div class="key_box_tsr_penalty_manage" style="color: #000; border: 1px solid rgba(169, 169, 169, 0.5);"><span class="">'+a.name+"</span></div></div>"}}},highlightPhrase:!1,list:{maxNumberOfElements:100,match:{enabled:!1},onShowListEvent:function(){td.css("background",""),$("#editrecord_input").css("opacity",1),$(".easy-autocomplete-container").css("opacity",1),$(document.body).removeClass("nprogress-busy").css("pointer-events","auto").css("cursor","default");var e=null;$('[data-toggle="popover"]').popover({placement:"auto bottom",trigger:"manual",html:!0,animation:!1}).on("mouseenter",(function(){var a,t=this;a=t,e=setInterval((function(){$(a).popover("show")}),300),$(this).siblings(".popover").on("mouseleave",(function(){$(t).popover("hide")}))})).on("mouseleave",(function(){clearInterval(e);var a=this,t=function(){setTimeout((function(){$(".popover:hover").length?t():$(a).popover("hide")}),50)};t()})),$(".easy-autocomplete").css("width","")},onLoadEvent:function(){$(".popover").popover("hide"),clearInterval(reopen_refreshIntervalId)},onClickEvent:function(e){new_value_id=$("#editrecord_input").getSelectedItemData().id,new_value=$("#editrecord_input").getSelectedItemData().name},onChooseEvent:function(){},onHideListEvent:function(event){if($(document.body).removeClass("nprogress-busy").css("pointer-events","auto"),$(".popover").popover("hide"),null==new_value)return $("#editrecord_input").remove(),void cell.data(original_html);null!=new_value&&($(".easy-autocomplete-container").remove(),$.confirm({title:eval("app.translations."+app.data.locale+".title_text"),content:"Change the Job Status from "+thecellvalue+" to "+new_value+" ?",type:"red",draggable:!0,dragWindowGap:0,backgroundDismiss:"cancel",escapeKey:!0,animateFromElement:!1,autoClose:"ok|50",onAction:function(e){$(".jconfirm.jconfirm-light.jconfirm-open").remove()},buttons:{ok:{btnClass:"btn-primary text-white",keys:["enter"],text:eval("app.translations."+app.data.locale+".okay_text"),action:function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var e={case_id:change_status_case_Id,encrypted_case_id:encrypted_case_id_uploading_to,new_status:new_value.toLowerCase(),new_status_id:new_value_id};app.ajax.json(app.data.change_status_for_job,e,null,(function(){success_ajax_then_refresh=app.ajax.result.success,1==app.ajax.result.success?($("#editrecord_input").remove(),$(".easy-autocomplete-container").remove(),cell.data(new_value),$(".loader").css("display","none").css("cursor","auto").css("background","url(../img/loader.gif) 50% 50% no-repeat rgb(249, 249, 249, 0.5)"),tr.children().next(".last_updated_by").html('<span style="font-size: 8px;">'+app.ajax.result.last_updated_by_name+"</span>"),tr.children().next(".last_updated").html(app.ajax.result.updated_at),window.downloadlisttable.ajax.reload(null,!1),window.downloadlisttable.fixedHeader.adjust()):($.alert({title:"Alert!",content:"Job Status not changed"}),$("#editrecord_input").remove(),cell.data(original_html),$(".loader").css("display","none").css("cursor","auto").css("background","url(../img/loader.gif) 50% 50% no-repeat rgb(249, 249, 249, 0.5)"),new_value=null)}))}},cancel:{text:eval("app.translations."+app.data.locale+".cancel_text"),action:function(){$("#editrecord_input").remove(),cell.data(original_html),$(".loader").css("display","none").css("cursor","auto").css("background","url(../img/loader.gif) 50% 50% no-repeat rgb(249, 249, 249, 0.5)"),new_value=null}}}}))},showAnimation:{type:"fade",time:1,callback:function(){}},hideAnimation:{type:"fade",time:1,callback:function(){null!=keep_track_of_last_clicked_item_to_react_after_reload_2&&null!=keep_track_of_last_clicked_item_data_attribute_to_react_after_reload_2&&1==keep_track_of_last_clicked_easyautocomplete_to_reopen&&(re_open_requested=!0,reopen_timer())}}}};$("#editrecord_input").easyAutocomplete(options).css("z-index","12"),triggerFocus()}})),$(".dataTable tbody").off("click","td.parent.change_assignees").on("click","td.parent.change_assignees",(function(e){if(1==$(".is_br24_employee").is(":visible"))return!1;keep_track_of_last_clicked_item_to_react_after_reload="change_assignee";e.target;e.preventDefault();var a=$(this).closest("tr"),t=$(this),l=$(this).html(),s=(window.downloadlisttable.row(a),$(this).text(),a.data("rowindex"),$(this).data("case_id")),o=a.data("encrypted_case_id");keep_track_of_last_clicked_item_data_attribute_to_react_after_reload=s;$(this).data("date_ts");var n=$('<select style="width: 100%; height: 46px;" class="is_br24_employee form-control" title="" multiple></select>');t.html(n);var i=app.data.selectize_employee_list_formated_json,r=app.data.selectize_selected_employee_has_family_members_in_company_formated_json.map((function(e){return e.username}));""!=l&&(r=l.split(" "),Object.assign({},[r]));var d=null;window.Selectize.prototype.positionDropdownOriginal||(window.Selectize.prototype.positionDropdownOriginal=window.Selectize.prototype.positionDropdown,window.Selectize.prototype.positionDropdown=function(){if("up"===this.settings.dropdownDirection){let o=this.$control,n="body"===this.settings.dropdownParent?o.offset():o.position();var e=o.parent().parent(),a=e.offset(),t=!1;if(parseInt(a.top)-parseInt($(window).scrollTop())<=300)t=!0;var l=261;if(t){var s=e.height()-12;l=-parseInt(s)}this.$dropdown.css({width:o.outerWidth(),top:n.top-l,left:n.left}),this.$dropdown.addClass("direction-"+this.settings.dropdownDirection),this.$control.addClass("direction-"+this.settings.dropdownDirection),this.$wrapper.addClass("direction-"+this.settings.dropdownDirection)}else window.Selectize.prototype.positionDropdownOriginal.apply(this,arguments)});var c=$(".is_br24_employee").selectize({plugins:["remove_button","optgroup_columns"],persist:!1,maxItems:200,mode:"multi",dropdownDirection:"up",placeholder:"-- Choose Job Assignee(s) --",valueField:["username"],labelField:"username",searchField:["username","fullname","fullname_noaccents"],options:i,items:r,hideSelected:!0,openOnFocus:!0,closeAfterSelect:!0,render:{item:function(e,a){return"<div>"+(e.username?'<span class="username"><u><b>'+e.username+"</b></u></span>":"")+"</div>"},option:function(e,a){e.xml_title_contents||e.email,e.xml_title_contents&&e.email;return'<div style="margin: 10px; border: 1px solid #000; padding: 10px;"><span class="label label-primary">'+e.username+"</span></div>"}},onChange:function(e){d=$(".is_br24_employee").val(),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var t={case_id:s,encrypted_case_id:o,assignees:d};app.ajax.json(app.data.change_assignees_for_job,t,null,(function(){if(success_ajax_then_refresh=app.ajax.result.success,1==app.ajax.result.success){var e=$("input[name='edit_"+s+"']");e.is(":checked")&&(status=2,app_ops.manage_downloadlist.profile.sync_preview_required_status(s,o,status,a,e,"NOT NULL")),""==d?(e.prop("disabled",!0),e.prop("checked",!1)):e.prop("disabled",!1),a.children().next(".last_updated_by").html('<span style="font-size: 8px;">'+app.ajax.result.last_updated_by_name+"</span>"),a.children().next(".last_updated").html(app.ajax.result.updated_at)}}))}})[0].selectize;c.settings;c.on("focus",(function(e,a){var t=$(".selectize-control").outerWidth();$(".selectize-dropdown-content").css("width",t).css("height",600)}));c.on("blur",(function(e,a){var l="";void 0===(d=$(".is_br24_employee").val())||0==d.length?t.html(""):($.each(d,(function(e,a){l=""==l?a:l+" "+a})),t.html(l))}));c.on("item_remove",(function(e,a){d=$(".is_br24_employee").val()})),$(window).resize((function(){var e=$(".selectize-control").outerWidth();$(".selectize-dropdown-content").css("width",e).css("height",600)})),c.focus()})),$(".dataTable tbody").off("click","td.parent.change_delivery_time").on("click","td.parent.change_delivery_time",(function(event){if(1==$(".is_deliver_time").is(":visible"))return!1;keep_track_of_last_clicked_item_to_react_after_reload="change_delivery_time";var target=event.target;event.preventDefault();var tr=$(this).closest("tr"),td=$(this),change_assignee_original_html=$(this).html(),row=window.downloadlisttable.row(tr),thecellvalue=$(this).text(),rowIndex=tr.data("rowindex"),change_assignee_case_Id=$(this).data("case_id"),encrypted_case_id_uploading_to=tr.data("encrypted_case_id");keep_track_of_last_clicked_item_data_attribute_to_react_after_reload=change_assignee_case_Id;var timestamp_Id=$(this).data("date_ts"),input=$('<input type="text" style="width: 100%; height:46px; color: #000; text-align: center" class="is_deliver_time" data-field="datetime" value="'+thecellvalue+'" readonly><div id="dtBox"></div>');td.html(input);var custom_delivery_time=null,encrypted_assignee_ids=null,currentText=null,closeText=null,amNames=null,pmNames=null,timeFormat=null,timeSuffix=null,timeOnlyTitle=null,timeText=null,hourText=null,minuteText=null,secondText=null,millisecText=null,microsecText=null,timezoneText=null,isRTL=null;"vi"===app.data.locale?(currentText="Hiện thời",closeText="Đóng",amNames=["SA","S"],pmNames=["CH","C"],timeFormat="HH:mm",timeSuffix="",timeOnlyTitle="Chọn giờ",timeText="Thời gian",hourText="Giờ",minuteText="Phút",secondText="Giây",millisecText="Mili giây",microsecText="Micrô giây",timezoneText="Múi giờ",isRTL=!1):"en"===app.data.locale?(currentText="Now",closeText="Done",amNames=["AM","A"],pmNames=["PM","P"],timeFormat="HH:mm",timeSuffix="",timeOnlyTitle="Choose Time",timeText="Time",hourText="Hour",minuteText="Minute",secondText="Second",millisecText="Millisecond",microsecText="Microsecond",timezoneText="Time Zone",isRTL=!1):"de"===app.data.locale&&(currentText="Jetzt",closeText="Fertig",amNames=["vorm.","AM","A"],pmNames=["nachm.","PM","P"],timeFormat="HH:mm",timeSuffix="",timeOnlyTitle="Zeit wählen",timeText="Zeit",hourText="Stunde",minuteText="Minute",secondText="Sekunde",millisecText="Millisekunde",microsecText="Mikrosekunde",timezoneText="Zeitzone",isRTL=!1);var has_been_edited=null;$(".is_deliver_time").datetimepicker({currentText:currentText,closeText:closeText,amNames:amNames,pmNames:pmNames,timeFormat:timeFormat,timeSuffix:timeSuffix,timeOnlyTitle:timeOnlyTitle,timeText:timeText,hourText:hourText,minuteText:minuteText,secondText:secondText,millisecText:millisecText,microsecText:microsecText,timezoneText:timezoneText,isRTL:isRTL,dateFormat:prefered_dateFormat,showMonthAfterYear:!0,numberOfMonths:1,showCurrentAtPos:0,changeMonth:!0,changeYear:!0,yearRange:"-1:+1",showOtherMonths:!1,selectOtherMonths:!1,toggleActive:!0,todayHighlight:!0,showMinute:!1,autoclose:!0,defaultDate:defaultDateVARIABLE,onSelect:function(){has_been_edited=!0},onClose:function(){1==has_been_edited?$.confirm({title:eval("app.translations."+app.data.locale+".title_text"),content:eval("app.translations."+app.data.locale+".you_have_unsaved_changes")+"\n"+eval("app.translations."+app.data.locale+".do_you_want_to_save_those_changes")+"\n",type:"red",draggable:!1,backgroundDismiss:"cancel",escapeKey:!0,animateFromElement:!1,onAction:function(e){$(".jconfirm.jconfirm-light.jconfirm-open").remove()},buttons:{ok:{btnClass:"btn-primary text-white",keys:["enter"],text:eval("app.translations."+app.data.locale+".okay_text"),action:function(){event.stopPropagation();var e=$(".is_deliver_time").val(),a=e.split(" "),t=a[0].split(delimiter_for_splitting_variable),l=a[1].split(":"),s=null;if("vi"===app.data.locale)s=parseInt(t[2])+"-"+parseInt(t[1])+"-"+parseInt(t[0])+" "+l[0]+":"+l[1];else if("en"===app.data.locale)s=parseInt(t[2])+"-"+parseInt(t[1])+"-"+parseInt(t[0])+" "+l[0]+":"+l[1];else if("de"===app.data.locale)s=parseInt(t[2])+"-"+parseInt(t[1])+"-"+parseInt(t[0])+" "+l[0]+":"+l[1];$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var o={case_id:change_assignee_case_Id,encrypted_case_id:encrypted_case_id_uploading_to,new_delivery_datetime:s};app.ajax.json(app.data.change_deliverydate_for_job,o,null,(function(){success_ajax_then_refresh=app.ajax.result.success,1==app.ajax.result.success?(td.html(e),tr.children().next(".last_updated_by").html('<span style="font-size: 8px;">'+app.ajax.result.last_updated_by_name+"</span>"),tr.children().next(".last_updated").html(app.ajax.result.updated_at),window.downloadlisttable.ajax.reload(null,!1),window.downloadlisttable.fixedHeader.adjust()):td.html(change_assignee_original_html)}))}},cancel:{text:eval("app.translations."+app.data.locale+".cancel_text"),action:function(){return td.html(change_assignee_original_html),!1}}}}):td.html(change_assignee_original_html)}}),$(window).resize((function(){$(".is_deliver_time").css("width","100%").css("height","100%")})),$(".is_deliver_time").focus()})),$(".dataTable tbody").off("click","td.parent.change_custom_row_color").on("click","td.parent.change_custom_row_color",(function(e){$("#editrecord_input").blur(),$(".is_br24_employee").selectize().blur();e.target;e.preventDefault();var a=$(this).closest("tr"),t=$(this),l=($(this).html(),window.downloadlisttable.row(a),$(this).text(),a.data("rowindex"),$(this).data("case_id")),s=a.data("encrypted_case_id");keep_track_of_last_clicked_item_data_attribute_to_react_after_reload=l;$(this).data("date_ts");var o=$("#colorPicker_"+l);o.tinycolorpicker();var n=o.data("plugin_tinycolorpicker");$hiddencolorinput=o.find(".colorInput"),o.off("change").on("change",(function(){"#FFFFFF"==n.colorHex&&"#"==$hiddencolorinput.val()||(t.css("background-color",n.colorRGB),t.autotextcolor())})),o.one().on("mouseup",(function(){if("#FFFFFF"==n.colorHex&&"#"==$hiddencolorinput.val());else{$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var e={case_id:l,encrypted_case_id:s,new_custom_color:n.colorHex};app.ajax.json(app.data.change_custom_color_for_job,e,null,(function(){success_ajax_then_refresh=app.ajax.result.success,1==app.ajax.result.success?(t.css("background-color",n.colorRGB),t.autotextcolor(),a.children().next(".last_updated_by").html('<span style="font-size: 8px;">'+app.ajax.result.last_updated_by_name+"</span>"),a.children().next(".last_updated").html(app.ajax.result.updated_at)):a.autotextcolor()}))}}))})),$(".dataTable tbody").off("click","td.parent.change_internal_notes").on("click","td.parent.change_internal_notes",(function(e){if($("#editrecord_input").blur(),$(".is_br24_employee").selectize().blur(),1==$("#edit_from_amount_input_"+n).is(":visible"))return!1;keep_track_of_last_clicked_item_to_react_after_reload="change_from_amount";e.target;e.preventDefault();var a=$(this).closest("tr"),t=$(this),l=t.height();l+=20;var s=$(this).html(),o=(window.downloadlisttable.row(a),$(this).html());o=o.replace(/(?:<br>)/g,"\r\n");a.data("rowindex");var n=$(this).data("case_id"),i=a.data("encrypted_case_id");keep_track_of_last_clicked_item_data_attribute_to_react_after_reload=n;$(this).data("date_ts");var r=$('<textarea id="edit_from_amount_input_'+n+'" cols="10" rows="5" charswidth="23"  style="white-space: pre-wrap; line-height: 15px; min-height: 30px; width: 100%; height: '+l+'px; display: block; z-index: 12; resize: vertical; color: black;"></textarea>');r.val(o),t.html(r),$(document).on("keydown","#edit_from_amount_input_"+n,(function(e){var a=$(this),l=a.val(),o=new RegExp(a.attr("pattern"),"g");setTimeout((function(){var e=a.val();o.test(e)||a.val(l)}),0),e.keyCode,27==e.keyCode&&t.html(s)})),$("#edit_from_amount_input_"+n).click((function(e){e.stopImmediatePropagation()})),$("#edit_from_amount_input_"+n).focus((function(){var e=$(this);window.setTimeout((function(){e.select()}),30)})),$("#edit_from_amount_input_"+n).focus(),$("#edit_from_amount_input_"+n).blur((function(){var e=$("#edit_from_amount_input_"+n).val();if(e=e.replace(/(?:\r\n|\r|\n)/g,"<br>"),s==e)t.html(s);else{$("#edit_from_amount_input_"+n).remove(),t.html(e),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var l={case_id:n,encrypted_case_id:i,new_custom_internal_note:e};app.ajax.json(app.data.change_custom_internal_note_for_job,l,null,(function(){success_ajax_then_refresh=app.ajax.result.success,1==app.ajax.result.success?(t.html(e),a.children().next(".last_updated_by").html('<span style="font-size: 8px;">'+app.ajax.result.last_updated_by_name+"</span>"),a.children().next(".last_updated").html(app.ajax.result.updated_at)):t.html(s)}))}}))})),$(".dataTable tbody").off("click","td.parent.change_tags").on("click","td.parent.change_tags",(function(e){if(1==$(".is_br24_hashtag").is(":visible"))return!1;keep_track_of_last_clicked_item_to_react_after_reload="change_tags";e.target;e.preventDefault();var a=$(this).closest("tr"),t=$(this),l=$(this).html(),s=l,o=(s.includes('<span class="highlight_span">'),s.split('<span class="highlight_span">'));if(null!=o[1]||null!=o[1])var n=o[1].split("</span>")[0];else n="";var i=l.replace("</span>","").replace('<span class="highlight_span">',""),r=(window.downloadlisttable.row(a),$(this).text(),a.data("rowindex"),$(this).data("case_id")),d=a.data("encrypted_case_id");keep_track_of_last_clicked_item_data_attribute_to_react_after_reload=r;$(this).data("date_ts");var c=$('<select style="width: 100%; height: 46px;" class="is_br24_hashtag form-control" title="" multiple></select>');t.html(c);var _=app.data.selectize_hashtag_list_formated_json,p=app.data.selectize_selected_hashtags_formated_json.map((function(e){return e.name}));""!=i&&(p=i.split(" "),Object.assign({},[p]));var u=null;window.Selectize.prototype.positionDropdownOriginal||(window.Selectize.prototype.positionDropdownOriginal=window.Selectize.prototype.positionDropdown,window.Selectize.prototype.positionDropdown=function(){if("up"===this.settings.dropdownDirection){let o=this.$control,n="body"===this.settings.dropdownParent?o.offset():o.position();var e=o.parent().parent(),a=e.offset(),t=!1;if(parseInt(a.top)-parseInt($(window).scrollTop())<=500)t=!0;var l=261;if(t){var s=e.height()-12;l=-parseInt(s)}this.$dropdown.css({width:o.outerWidth(),top:n.top-l,left:n.left}),this.$dropdown.addClass("direction-"+this.settings.dropdownDirection),this.$control.addClass("direction-"+this.settings.dropdownDirection),this.$wrapper.addClass("direction-"+this.settings.dropdownDirection)}else window.Selectize.prototype.positionDropdownOriginal.apply(this,arguments)});var m=$(".is_br24_hashtag").selectize({plugins:["remove_button","optgroup_columns"],persist:!0,maxItems:200,mode:"multi",dropdownDirection:"up",create:function(e){return{name:"#"+e.replace("#","").toUpperCase()}},placeholder:"-- Add Tag --",valueField:["name"],labelField:"name",searchField:["name"],options:_,items:p,hideSelected:!1,openOnFocus:!0,closeAfterSelect:!0,render:{item:function(e,a){return"<div>"+(e.name?'<span class="name"><u><b>'+e.name+"</b></u></span>":"")+"</div>"},option:function(e,a){e.xml_title_contents||e.email,e.xml_title_contents&&e.email;return'<div style="margin: 10px; border: 1px solid #000; padding: 10px;"><span class="label label-primary">'+e.name+'</span><span style="color: #ccc">&nbsp;</span></div>'}},onChange:function(e){var t=(u=$(".is_br24_hashtag").val()).map((function(e){return e.replace(/#/g,"")}));$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var l={case_id:r,encrypted_case_id:d,hashtag:t};app.ajax.json(app.data.change_tags_for_job,l,null,(function(){success_ajax_then_refresh=app.ajax.result.success,1==app.ajax.result.success&&(app.data.selectize_hashtag_list_formated_json=app.ajax.result.selectize_hashtag_list_formated_json,a.children().next(".last_updated_by").html('<span style="font-size: 8px;">'+app.ajax.result.last_updated_by_name+"</span>"),a.children().next(".last_updated").html(app.ajax.result.updated_at))}))}}),f=m[0].selectize;f.settings;f.on("focus",(function(e,a){var t=$(".selectize-control").outerWidth();$(".selectize-dropdown-content").css("width",t).css("height",300)}));f.on("blur",(function(e,a){var l="";if(void 0===(u=$(".is_br24_hashtag").val())||0==u.length)t.html("");else{if($.each(u,(function(e,a){l=""==l?a:l+" "+a})),""!=n){var s=l.split(n),o="";$.each(s,(function(e,a){o=e==s.length-1?o.concat(a):o.concat(a).concat('<span class="highlight_span">'+n+"</span>")}))}else o=l;t.html(o)}}));f.on("item_remove",(function(e,a){u=$(".is_br24_hashtag").val()})),f.$control_input.on("keydown",(function(e){var a=e.charCode?e.charCode:e.keyCode?e.keyCode:e.which?e.which:0;return!(a>31&&(a<64||a>90)&&(a<97||a>122)&&(a<48||a>57)&&-1==[8,13,44,45,46,95].indexOf(a))})),$(window).resize((function(){var e=$(".selectize-control").outerWidth();$(".selectize-dropdown-content").css("width",e).css("height",300)})),f.focus()})),$(".dataTable tbody").off("click",".output_number_of_pictures_expected").on("click",".output_number_of_pictures_expected",(function(e){if($("#editrecord_input").blur(),$(".is_br24_employee").selectize().blur(),1==$("#edit_from_amount_input_"+n).is(":visible"))return!1;keep_track_of_last_clicked_item_to_react_after_reload="change_from_amount";e.target;e.preventDefault();var a=$(this).closest("tr"),t=$(this);$(this).parent().children(".output_number_of_pictures_real").css("visibility","hidden");t.parent().height();var l=t.parent().width(),s=$(this).html(),o=(window.downloadlisttable.row(a),$(this).html());o=o.replace(/(?:<br>)/g,"\r\n");a.data("rowindex");var n=$(this).parent().parent().data("case_id"),i=a.data("encrypted_case_id");keep_track_of_last_clicked_item_data_attribute_to_react_after_reload=n;$(this).data("date_ts");var r=$('<input id="edit_from_amount_input_'+n+'" type="number" style="text-align:left; width: '+l+'px; display: block; color: #000; margin: 0 auto; z-index: 12;" min="0" max="999" step="1" pattern="^\\d{1,10}?$"></input>');r.val(o),t.html(r),$(document).on("keydown","#edit_from_amount_input_"+n,(function(e){var a=$(this),l=a.val(),o=new RegExp(a.attr("pattern"),"g");setTimeout((function(){var e=a.val();o.test(e)||a.val(l)}),0),e.keyCode,27==e.keyCode&&t.html(s)})),$("#edit_from_amount_input_"+n).click((function(e){e.stopImmediatePropagation()})),$("#edit_from_amount_input_"+n).focus((function(){var e=$(this);window.setTimeout((function(){e.select()}),30)})),$("#edit_from_amount_input_"+n).focus(),$("#edit_from_amount_input_"+n).blur((function(){var e=$("#edit_from_amount_input_"+n).val();if(e=e.replace(/(?:\r\n|\r|\n)/g,"<br>"),s==e)t.html(s),t.parent().children(".output_number_of_pictures_real").css("visibility","visible");else{$("#edit_from_amount_input_"+n).remove(),t.html(e),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var l={case_id:n,encrypted_case_id:i,new_custom_output_expected:e};app.ajax.json(app.data.change_custom_output_expected_for_job,l,null,(function(){success_ajax_then_refresh=app.ajax.result.success,1==app.ajax.result.success?(t.html(e),t.parent().children(".output_number_of_pictures_real").css("visibility","visible"),a.children().next(".last_updated_by").html('<span style="font-size: 8px;">'+app.ajax.result.last_updated_by_name+"</span>"),a.children().next(".last_updated").html(app.ajax.result.updated_at)):(t.html(s),t.parent().children(".output_number_of_pictures_real").css("visibility","visible"))}))}}))})),$("input[name*='edit_']").on("click",(function(e){e.stopPropagation();var a=$(this).closest("tr"),t=a.find(".change_assignees").html(),l=a.data("encrypted_case_id");case_Id=$(this).parent().data("case_id"),date_ts_Id=$(this).parent().data("date_ts");var s=null,o=$("input[name='edit_"+case_Id+"']");o.is(":checked")?(o.prop("checked",!0),s=1):(o.prop("checked",!1),s=2),app_ops.manage_downloadlist.profile.sync_preview_required_status(case_Id,l,s,a,o,t)})),$(".two_weeks_checkbox_col.parent").not("input[name*='edit_']").on("click",(function(e){e.stopPropagation();var a=$(this).closest("tr"),t=a.find(".change_assignees").html(),l=a.data("encrypted_case_id");case_Id=$(this).data("case_id"),date_ts_Id=$(this).data("date_ts");var s=null,o=$("input[name='edit_"+case_Id+"']");o.is(":checked")?(o.prop("checked",!1),s=2):(o.prop("checked",!0),s=1),app_ops.manage_downloadlist.profile.sync_preview_required_status(case_Id,l,s,a,o,t)})),$('input[type="checkbox"], .two_weeks_checkbox_col').css("cursor","pointer"),$(document).ready((function(){var currentColorBox="",window_focus=!0;$(window).focus((function(){window_focus=!0})).blur((function(){window_focus=!1}));var checks_if_avatar_colorbox_is_open=null,success_ajax_then_refresh=null,been_out=null,refreshIntervalId=null,timer=function(){refreshIntervalId=setInterval((function(){}),100)},close_colorbox_refreshIntervalId=null,close_colorbox_timer=function(){close_colorbox_refreshIntervalId=setInterval((function(){$("#cb_add_downloadlist.ajax").colorbox.close(),$("#cb_edit_downloadlist.ajax").colorbox.close(),clearInterval(close_colorbox_refreshIntervalId)}),100)},cboxOptions={width:"600px",height:"400px"};$(window).resize((function(){["cb_add_downloadlist","cb_edit_downloadlist"].indexOf(currentColorBox)>-1&&$.colorbox.resize({width:window.innerWidth>parseInt(cboxOptions.maxWidth)?cboxOptions.maxWidth:cboxOptions.width,height:window.innerHeight>parseInt(cboxOptions.maxHeight)?cboxOptions.maxHeight:cboxOptions.height})})),$("#cb_add_downloadlist.ajax").colorbox({rel:"nofollow",width:"600px",height:"400px",left:"9%",top:"200px",escKey:!0,overlayClose:!1,closeButton:!1,onOpen:function(){currentColorBox="cb_add_downloadlist"},onLoad:function(){},onComplete:function(){$("#advance_amount").focus((function(){$(this).parseNumber({format:number_format_per_locale,locale:numberformat_locale}),$(this).select()})),$("#advance_amount").blur((function(){$(this).formatNumber({format:number_format_per_locale,locale:numberformat_locale})}));var counting_ssd=1,$calendar_date=$(".calendar_date");$calendar_date.datepicker({dateFormat:prefered_dateFormat,showMonthAfterYear:!0,numberOfMonths:1,changeMonth:!0,changeYear:!0,yearRange:"-10:+1",showOtherMonths:!0,selectOtherMonths:!0,toggleActive:!0,minDate:"-10y",maxDate:"+1y",autoclose:!0,onClose:function(){var addressinput=$(this).val(),res=patt.test(addressinput);1==res?($("#calendar_date").closest("td").removeClass("has-error"),$("#calendar_date").nextAll(".help-block").css("display","none"),$(this).blur(),counting_ssd=1):($("#calendar_date").closest("td").addClass("has-error"),1==counting_ssd&&$("#calendar_date").after('<span class="help-block"><strong>'+eval("app.translations."+app.data.locale+".you_need_to_enter_a_valid_date_in_the_format")+" "+prefered_dateFormat_placeholder+" "+eval("app.translations."+app.data.locale+".or_choose_from_the_calendar")+"</strong></span>"),counting_ssd++,$(this).blur())},beforeShow:function(e,a){$calendar_date.after($calendar_date.datepicker("widget")),setTimeout((function(){$("#ui-datepicker-div").css("top","").css("left","")}),0)}}),$calendar_date.datepicker().datepicker("setDate",new Date);var select_list_employee_list=app.data.selectize_employee_list_formated_json,select_selected_employee_json=app.data.selectize_selected_employee_formated_json;select_selected_list_employee_to_receive_messages=select_selected_employee_json.map((function(e){return e.fk_is_br24_employee}));var $recipients_select=$("#recipients").selectize({plugins:["remove_button","optgroup_columns"],persist:!1,maxItems:1,mode:"multi",placeholder:"-- "+eval("app.translations."+app.data.locale+".select_employee")+" --",valueField:"user_id",labelField:"user_id",searchField:["user_id","fullname","fullname_noaccents"],options:select_list_employee_list,items:select_selected_list_employee_to_receive_messages,hideSelected:!0,openOnFocus:!0,closeAfterSelect:!0,render:{item:function(e,a){return"<div>"+(e.user_id?'<span class="user_id"><b>'+e.user_id+"</b></span>":"")+'<span style="color: #ccc">&nbsp;</span>'+(e.fullname?'<span class="fullname" style="font-size: 10px;">'+e.fullname+"</span>":"")+"<br>"+(e.position?'<span class="position" style="font-size: 9px;">'+e.position+"</span>":"")+"</div>"},option:function(e,a){e.fullname||e.email,e.fullname&&e.email;return'<div style="margin: 10px; border: 1px solid #000; padding: 10px;"><span class="label label-primary">'+e.user_id+'</span><span style="color: #ccc">&nbsp;</span>'+(e.fullname?'<span class="fullname" style="font-size: 10px;">'+e.fullname+"</span>":"")+"<br>"+(e.position?'<span class="position" style="font-size: 9px; color: #ccc;">'+e.position+"</span>":"")+(e.email?' - <span class="email" style="font-size: 9px; color: #ccc;">'+e.email+"</span>":"")+"</div>"}},onChange:function(e){void 0===e||e.length,$("#cb_add_downloadlist_details_form").addClass("dirty")}}),recipients_select_selectize=$recipients_select[0].selectize,recipients_select_old_options=recipients_select_selectize.settings,selectize_focus_handler=function(e,a){var t=$(".selectize-control").outerWidth();$(".selectize-dropdown-content").css("width",t)};recipients_select_selectize.on("focus",selectize_focus_handler);var item_remove_handler=function(e,a){$("#cb_add_downloadlist_details_form").addClass("dirty")};recipients_select_selectize.on("item_remove",item_remove_handler),$(window).resize((function(){var e=$(".selectize-control").outerWidth();$(".selectize-dropdown-content").css("width",e)}));var calendar_date=$("#calendar_date").val(),recipients=$("#recipients").val(),advance_amount=$("#advance_amount").val(),reason=$("reason").val(),payment_period_description=$("payment_period_description").val(),currentdate=new Date,datetime="Last Sync: "+currentdate.getDate()+"/"+(currentdate.getMonth()+1)+"/"+currentdate.getFullYear()+" @ "+currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds(),add_downloadlist_previous_data=[];add_downloadlist_previous_data.add_downloadlist_previous_data={whenwasset:datetime,add_downloadlist_calendar_date:calendar_date,add_downloadlist_recipients:recipients,add_downloadlist_advance_amount:advance_amount,add_downloadlist_reason:reason,add_downloadlist_payment_period_description:payment_period_description},sessionStorage.setItem("Br24_"+app.env()+"_add_downloadlistinfo_previous_data",JSON.stringify(add_downloadlist_previous_data.add_downloadlist_previous_data)),$("#cb_add_downloadlist_details_form").areYouSure(),$("#cb_add_downloadlist_details_form").on("change","select",(function(){$("#add_downloadlist_reset").prop("disabled",!1).css("display","inline-block"),$("#add_downloadlist_update").prop("disabled",!1).css("display","inline-block")})),$("#cb_add_downloadlist_details_form").on("change keypress","input",(function(){$("#add_downloadlist_reset").prop("disabled",!1).css("display","inline-block"),$("#add_downloadlist_update").prop("disabled",!1).css("display","inline-block")})),$("#cb_add_downloadlist_details_form").on("change keypress","textarea",(function(){$("#add_downloadlist_reset").prop("disabled",!1).css("display","inline-block"),$("#add_downloadlist_update").prop("disabled",!1).css("display","inline-block")})),$("#add_downloadlist_reset").click((function(){$("#add_downloadlist_reset, #add_downloadlist_update").prop("disabled",!0).css("display","none");var e=JSON.parse(sessionStorage.getItem("Br24_"+app.env()+"_add_downloadlistinfo_previous_data"));$("#calendar_date").val(e.add_downloadlist_calendar_date),$("#advance_amount").val(e.add_downloadlist_advance_amount),$("#reason").val(e.add_downloadlist_reason),$("#payment_period_description").val(e.add_downloadlist_payment_period_description),recipients_select_selectize.setValue(e.add_downloadlist_recipients,!1),$(".has-error").removeClass("has-error"),$(".help-block").css("display","none"),$("#cb_add_downloadlist_details_form").trigger("reinitialize.areYouSure")})),$("#add_downloadlist_update").click((function(e){e.preventDefault(),$(".alert_warning").css("display","none"),$(".alert_success").css("display","none");var a=$("#calendar_date").val(),t=$("#recipients").val(),l=$("#advance_amount").val(),s=$("reason").val(),o=$("payment_period_description").val(),n=new Date,i="Last Sync: "+n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear()+" @ "+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds(),r=[];r.add_downloadlist_submitted_data={whenwasset:i,add_downloadlist_calendar_date:a,add_downloadlist_recipients:t,add_downloadlist_advance_amount:l,add_downloadlist_reason:s,add_downloadlist_payment_period_description:o},sessionStorage.setItem("Br24_"+app.env()+"_add_downloadlistinfo_submitted_data",JSON.stringify(r.add_downloadlist_submitted_data)),$("#advance_amount").parseNumber({format:number_format_per_locale,locale:numberformat_locale});var d=new FormData($("#cb_add_downloadlist_details_form")[0]);d.append("recipients",t),NProgress.configure({parent:"#cboxTitle",showSpinner:!1,easing:"ease",speed:880,trickleSpeed:333,trickle:!0}),NProgress.start(),$(".cb_loader").css("display","block").css("cursor","wait"),$("#cb_top").addClass("nprogress-busy").css("pointer-events","none"),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$("#add_downloadlist_details_table").data("token")}}),app.ajax.formdata(app.data.manage_add_downloadlist,d,null,(function(){if(console.log(app.ajax.resultformdata),success_ajax_then_refresh=app.ajax.resultformdata.success,NProgress.done(),$(".cb_loader").css("display","none").css("cursor","auto"),$("#cb_top").removeClass("nprogress-busy").css("pointer-events","auto"),1==app.ajax.resultformdata.success)$("#cboxLoadedContent").css("background-color","#4CAF50"),$(".onSuccess_makeGreen").css("background-color","#4CAF50"),$(".ibox-tool-userid").css("color","white"),$("#cb_add_downloadlist_details_form").css("display","none"),close_colorbox_timer(),$(document.body).css("pointer-events","none"),app.util.fullscreenloading_start(),1==app.ajax.resultformdata.process_penalties_accept_reject_table_sync&&app_ops.ajaxexample2tb2.profile.sync_penalties_acceptance_rejection_table();else{if($("#advance_amount").formatNumber({format:number_format_per_locale,locale:numberformat_locale}),$(".has-error").removeClass("has-error"),$(".help-block").detach(),$.each(app.ajax.resultformdata.errors,(function(e,a){app_ops.manage_downloadlist.profile.foreach_handle_error_display(e,a)})),isEmpty(app.ajax.resultformdata.errors));else{var e=$(".has-error:visible:first").offset().top-$(".has-error:visible:first").offsetParent().offset().top,a=$("#cboxLoadedContent").scrollTop()-Math.abs(e)-80;$("#cboxLoadedContent").animate({scrollTop:a},1e3)}var t=$(".has-error").length>0;1!=t&&0!=t||($("#calendar_date").on("change keypress",(function(){$(this).parent(".form-group").removeClass("has-error"),$(this).next(".help-block").css("display","none"),console.log("something changed in #calendar_date")})),$("#recipients").on("change keypress",(function(){$(this).parent(".form-group").removeClass("has-error"),$(this).next(".help-block").css("display","none"),console.log("something changed in #recipients")})),$("#advance_amount").on("change keypress",(function(){$(this).parent(".form-group").removeClass("has-error"),$(this).nextAll(".help-block").css("display","none"),console.log("something changed in #advance_amount")})),$("#reason").on("change keypress",(function(){$(this).parent(".form-group").removeClass("has-error"),$(this).next(".help-block").css("display","none"),console.log("something changed in #reason")})),$("#payment_period_description").on("change keypress",(function(){$(this).parent(".form-group").removeClass("has-error"),$(this).next(".help-block").css("display","none"),console.log("something changed in #payment_period_description")})))}}))})),$("#cb_add_downloadlist_details_form").on("keyup keypress",(function(e){if(13===(e.keyCode||e.which))return e.preventDefault(),!1})),$("#cboxOverlay").off("click").on("click",(function(event){var identifychanges=$("#cb_add_downloadlist_details_form").hasClass("dirty");1==identifychanges?$.confirm({title:eval("app.translations."+app.data.locale+".title_text"),content:eval("app.translations."+app.data.locale+".you_have_unsaved_changes")+"\n"+eval("app.translations."+app.data.locale+".do_you_want_to_discard_those_changes")+"\n",type:"red",draggable:!1,backgroundDismiss:"cancel",escapeKey:!0,animateFromElement:!1,onAction:function(e){$(".jconfirm.jconfirm-light.jconfirm-open").remove()},buttons:{ok:{btnClass:"btn-primary text-white",keys:["enter"],text:eval("app.translations."+app.data.locale+".okay_text"),action:function(){event.stopPropagation(),$("#cb_add_downloadlist.ajax").colorbox.close(),$("#cb_add_downloadlist_details_form").trigger("reinitialize.areYouSure")}},cancel:{text:eval("app.translations."+app.data.locale+".cancel_text"),action:function(){return!1}}}}):($("#cb_add_downloadlist.ajax").colorbox.close(),$("#cb_add_downloadlist_details_form").trigger("reinitialize.areYouSure"))}))},onCleanup:function(){app.data.selectize_employee_list_formated_json="",app.data.selectize_selected_employee_formated_json="",1==success_ajax_then_refresh&&app.util.fullscreenloading_start()},onClosed:function(){currentColorBox="",$(".modal-backdrop").remove(),$("body").css("cursor","default"),1==success_ajax_then_refresh&&(window.downloadlisttable.ajax.reload(null,!1),app.util.fullscreenloading_end(),window.downloadlisttable.fixedHeader.adjust()),NProgress.configure({parent:"#progress-bar-parent",showSpinner:!1,easing:"ease",speed:880,trickleSpeed:333,trickle:!0}),clearInterval(refreshIntervalId),clearInterval(close_colorbox_refreshIntervalId),sessionStorage.removeItem("Br24_"+app.env()+"_add_downloadlistinfo_previous_data"),sessionStorage.removeItem("Br24_"+app.env()+"_add_downloadlistinfo_submitted_data")}}),$("#cb_edit_downloadlist.ajax").colorbox({rel:"nofollow",width:"600px",height:"400px",left:"60%",top:"200px",escKey:!0,overlayClose:!1,closeButton:!1,onOpen:function(){currentColorBox="cb_edit_downloadlist"},onLoad:function(){},onComplete:function(){$("#advance_amount").focus((function(){$(this).parseNumber({format:number_format_per_locale,locale:numberformat_locale}),$(this).select()})),$("#advance_amount").blur((function(){$(this).formatNumber({format:number_format_per_locale,locale:numberformat_locale})})),$("#advance_amount").formatNumber({format:number_format_per_locale,locale:numberformat_locale});var counting_ssd=1,$calendar_date=$(".calendar_date");$calendar_date.datepicker({dateFormat:prefered_dateFormat,showMonthAfterYear:!0,numberOfMonths:1,changeMonth:!0,changeYear:!0,yearRange:"-10:+1",showOtherMonths:!0,selectOtherMonths:!0,toggleActive:!0,minDate:"-10y",maxDate:"+1y",autoclose:!0,onClose:function(){var addressinput=$(this).val(),res=patt.test(addressinput);1==res?($("#calendar_date").closest("td").removeClass("has-error"),$("#calendar_date").nextAll(".help-block").css("display","none"),$(this).blur(),counting_ssd=1):($("#calendar_date").closest("td").addClass("has-error"),1==counting_ssd&&$("#calendar_date").after('<span class="help-block"><strong>'+eval("app.translations."+app.data.locale+".you_need_to_enter_a_valid_date_in_the_format")+" "+prefered_dateFormat_placeholder+" "+eval("app.translations."+app.data.locale+".or_choose_from_the_calendar")+"</strong></span>"),counting_ssd++,$(this).blur())},beforeShow:function(e,a){$calendar_date.after($calendar_date.datepicker("widget")),setTimeout((function(){$("#ui-datepicker-div").css("top","").css("left","")}),0)}});var select_list_employee_list=app.data.selectize_employee_list_formated_json,select_selected_employee_json=app.data.selectize_selected_employee_formated_json;select_selected_list_employee_to_receive_messages=select_selected_employee_json.map((function(e){return e.user_id}));var $recipients_select=$("#recipients").selectize({plugins:["remove_button","optgroup_columns"],persist:!1,maxItems:200,mode:"multi",placeholder:"-- "+eval("app.translations."+app.data.locale+".select_employee")+" --",valueField:"user_id",labelField:"user_id",searchField:["user_id","fullname","fullname_noaccents"],options:select_list_employee_list,items:select_selected_list_employee_to_receive_messages,hideSelected:!0,openOnFocus:!0,closeAfterSelect:!0,render:{item:function(e,a){return"<div>"+(e.user_id?'<span class="user_id"><b>'+e.user_id+"</b></span>":"")+'<span style="color: #ccc">&nbsp;</span>'+(e.fullname?'<span class="fullname" style="font-size: 10px;">'+e.fullname+"</span>":"")+"<br>"+(e.position?'<span class="position" style="font-size: 9px;">'+e.position+"</span>":"")+"</div>"},option:function(e,a){e.fullname||e.email,e.fullname&&e.email;return'<div style="margin: 10px; border: 1px solid #000; padding: 10px;"><span class="label label-primary">'+e.user_id+'</span><span style="color: #ccc">&nbsp;</span>'+(e.fullname?'<span class="fullname" style="font-size: 10px;">'+e.fullname+"</span>":"")+"<br>"+(e.position?'<span class="position" style="font-size: 9px; color: #ccc;">'+e.position+"</span>":"")+(e.email?' - <span class="email" style="font-size: 9px; color: #ccc;">'+e.email+"</span>":"")+"</div>"}},onChange:function(e){void 0===e||e.length,$("#cb_edit_downloadlist_details_form").addClass("dirty")}}),recipients_select_selectize=$recipients_select[0].selectize,recipients_select_old_options=recipients_select_selectize.settings,selectize_focus_handler=function(e,a){var t=$(".selectize-control").outerWidth();$(".selectize-dropdown-content").css("width",t)};recipients_select_selectize.on("focus",selectize_focus_handler);var item_remove_handler=function(e,a){$("#cb_edit_downloadlist_details_form").addClass("dirty")};recipients_select_selectize.on("item_remove",item_remove_handler),$(window).resize((function(){var e=$(".selectize-control").outerWidth();$(".selectize-dropdown-content").css("width",e)}));var calendar_date=$("#calendar_date").val(),recipients=$("#recipients").val(),advance_amount=$("#advance_amount").val(),reason=$("#reason").val(),payment_period_description=$("#payment_period_description").val(),currentdate=new Date,datetime="Last Sync: "+currentdate.getDate()+"/"+(currentdate.getMonth()+1)+"/"+currentdate.getFullYear()+" @ "+currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds(),edit_downloadlist_previous_data=[];edit_downloadlist_previous_data.edit_downloadlist_previous_data={whenwasset:datetime,edit_downloadlist_calendar_date:calendar_date,edit_downloadlist_recipients:recipients,edit_downloadlist_advance_amount:advance_amount,edit_downloadlist_reason:reason,edit_downloadlist_payment_period_description:payment_period_description},sessionStorage.setItem("Br24_"+app.env()+"_edit_downloadlistinfo_previous_data",JSON.stringify(edit_downloadlist_previous_data.edit_downloadlist_previous_data)),$("#cb_edit_downloadlist_details_form").areYouSure(),$("#cb_edit_downloadlist_details_form").on("change","select",(function(){$("#edit_downloadlist_reset").prop("disabled",!1).css("display","inline-block"),$("#edit_downloadlist_update").prop("disabled",!1).css("display","inline-block")})),$("#cb_edit_downloadlist_details_form").on("change keypress","input",(function(){$("#edit_downloadlist_reset").prop("disabled",!1).css("display","inline-block"),$("#edit_downloadlist_update").prop("disabled",!1).css("display","inline-block")})),$("#cb_edit_downloadlist_details_form").on("change keypress","textarea",(function(){$("#edit_downloadlist_reset").prop("disabled",!1).css("display","inline-block"),$("#edit_downloadlist_update").prop("disabled",!1).css("display","inline-block")})),$("#edit_downloadlist_reset").click((function(){$("#edit_downloadlist_reset, #edit_downloadlist_update").prop("disabled",!0).css("display","none");var e=JSON.parse(sessionStorage.getItem("Br24_"+app.env()+"_edit_downloadlistinfo_previous_data"));$("#calendar_date").val(e.edit_downloadlist_calendar_date),$("#advance_amount").val(e.edit_downloadlist_advance_amount),$("#reason").val(e.edit_downloadlist_reason),$("#payment_period_description").val(e.edit_downloadlist_payment_period_description),recipients_select_selectize.setValue(e.edit_downloadlist_recipients,!1),$(".has-error").removeClass("has-error"),$(".help-block").css("display","none"),$("#cb_edit_downloadlist_details_form").trigger("reinitialize.areYouSure")})),$("#edit_downloadlist_update").click((function(e){e.preventDefault(),$(".alert_warning").css("display","none"),$(".alert_success").css("display","none");var a=$("#calendar_date").val(),t=$("#recipients").val(),l=$("#advance_amount").val(),s=$("#reason").val(),o=$("#payment_period_description").val(),n=new Date,i="Last Sync: "+n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear()+" @ "+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds(),r=[];r.edit_custom_rc_message_schedule_submitted_data={whenwasset:i,edit_downloadlist_calendar_date:a,edit_downloadlist_recipients:t,edit_downloadlist_advance_amount:l,edit_downloadlist_reason:s,edit_downloadlist_payment_period_description:o},sessionStorage.setItem("Br24_"+app.env()+"_edit_downloadlistinfo_submitted_data",JSON.stringify(r.edit_custom_rc_message_schedule_submitted_data)),$("#advance_amount").parseNumber({format:number_format_per_locale,locale:numberformat_locale});var d=new FormData($("#cb_edit_downloadlist_details_form")[0]);d.append("recipients",t),NProgress.configure({parent:"#cboxTitle",showSpinner:!1,easing:"ease",speed:880,trickleSpeed:333,trickle:!0}),NProgress.start(),$(".cb_loader").css("display","block").css("cursor","wait"),$("#cb_top").addClass("nprogress-busy").css("pointer-events","none"),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$("#edit_downloadlist_details_table").data("token")}}),app.ajax.formdata(app.data.manage_edit_downloadlist,d,null,(function(){if(success_ajax_then_refresh=app.ajax.resultformdata.success,NProgress.done(),$(".cb_loader").css("display","none").css("cursor","auto"),$("#cb_top").removeClass("nprogress-busy").css("pointer-events","auto"),1==app.ajax.resultformdata.success)$("#cboxLoadedContent").css("background-color","#4CAF50"),$(".onSuccess_makeGreen").css("background-color","#4CAF50"),$(".ibox-tool-userid").css("color","white"),$("#cb_edit_downloadlist_details_form").css("display","none"),close_colorbox_timer(),$(document.body).css("pointer-events","none"),app.util.fullscreenloading_start(),1==app.ajax.resultformdata.process_penalties_accept_reject_table_sync&&app_ops.ajaxexample2tb2.profile.sync_penalties_acceptance_rejection_table();else{if($("#advance_amount").formatNumber({format:number_format_per_locale,locale:numberformat_locale}),$(".has-error").removeClass("has-error"),$(".help-block").detach(),$.each(app.ajax.resultformdata.errors,(function(e,a){app_ops.manage_downloadlist.profile.foreach_handle_error_display(e,a)})),isEmpty(app.ajax.resultformdata.errors));else{var e=$(".has-error:visible:first").offset().top-$(".has-error:visible:first").offsetParent().offset().top,a=$("#cboxLoadedContent").scrollTop()-Math.abs(e)-80;$("#cboxLoadedContent").animate({scrollTop:a},1e3)}var t=$(".has-error").length>0;1!=t&&0!=t||($("#calendar_date").on("change keypress",(function(){$(this).parent(".form-group").removeClass("has-error"),$(this).next(".help-block").css("display","none"),console.log("something changed in #calendar_date")})),$("#recipients").on("change keypress",(function(){$(this).parent(".form-group").removeClass("has-error"),$(this).next(".help-block").css("display","none"),console.log("something changed in #recipients")})),$("#advance_amount").on("change keypress",(function(){$(this).parent(".form-group").removeClass("has-error"),$(this).nextAll(".help-block").css("display","none"),console.log("something changed in #advance_amount")})),$("#reason").on("change keypress",(function(){$(this).parent(".form-group").removeClass("has-error"),$(this).next(".help-block").css("display","none"),console.log("something changed in #reason")})),$("#payment_period_description").on("change keypress",(function(){$(this).parent(".form-group").removeClass("has-error"),$(this).next(".help-block").css("display","none"),console.log("something changed in #payment_period_description")})))}}))})),$("#cb_edit_downloadlist_details_form").on("keyup keypress",(function(e){if(13===(e.keyCode||e.which))return e.preventDefault(),!1})),$("#cboxOverlay").off("click").on("click",(function(event){var identifychanges=$("#cb_edit_downloadlist_details_form").hasClass("dirty");1==identifychanges?$.confirm({title:eval("app.translations."+app.data.locale+".title_text"),content:eval("app.translations."+app.data.locale+".you_have_unsaved_changes")+"\n"+eval("app.translations."+app.data.locale+".do_you_want_to_discard_those_changes")+"\n",type:"red",draggable:!1,backgroundDismiss:"cancel",escapeKey:!0,animateFromElement:!1,onAction:function(e){$(".jconfirm.jconfirm-light.jconfirm-open").remove()},buttons:{ok:{btnClass:"btn-primary text-white",keys:["enter"],text:eval("app.translations."+app.data.locale+".okay_text"),action:function(){event.stopPropagation(),$("#cb_edit_downloadlist.ajax").colorbox.close(),$("#cb_edit_downloadlist_details_form").trigger("reinitialize.areYouSure")}},cancel:{text:eval("app.translations."+app.data.locale+".cancel_text"),action:function(){return!1}}}}):($("#cb_edit_downloadlist.ajax").colorbox.close(),$("#cb_edit_downloadlist_details_form").trigger("reinitialize.areYouSure"))}))},onCleanup:function(){1==success_ajax_then_refresh&&app.util.fullscreenloading_start()},onClosed:function(){if(currentColorBox="",$(".modal-backdrop").remove(),$("body").css("cursor","default"),1==success_ajax_then_refresh){var e=new Date,a="Last Sync: "+e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()+" @ "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds(),t=$(document).scrollTop(),l=[];l.edit_downloadlist_scroll_position_data={whenwasset:a,scroll:t},sessionStorage.setItem("Br24_"+app.env()+"_edit_downloadlist_scroll_position_data",JSON.stringify(l.edit_downloadlist_scroll_position_data)),window.downloadlisttable.ajax.reload(null,!1),app.util.fullscreenloading_end(),window.downloadlisttable.fixedHeader.adjust()}NProgress.configure({parent:"#progress-bar-parent",showSpinner:!1,easing:"ease",speed:880,trickleSpeed:333,trickle:!0}),clearInterval(refreshIntervalId),clearInterval(close_colorbox_refreshIntervalId),sessionStorage.removeItem("Br24_"+app.env()+"_edit_downloadlistinfo_previous_data"),sessionStorage.removeItem("Br24_"+app.env()+"_edit_downloadlistinfo_submitted_data")}}),$("a[name*='delete_downloadlist_']").on("click",(function(event){event.preventDefault();var clicked_href=$(this).attr("href"),clicked_href_id_encrypted=$(this).parent().parent().parent().data("workingshiftid"),isReplaceable=$(this).is("[replaceable=true]"),isDeleteable=$(this).is("[deleteable=true]"),isEnableable=$(this).is("[enableable=true]");1==isReplaceable?$.confirm({title:eval("app.translations."+app.data.locale+".title_text"),content:"url:"+app.data.URL_replace_shift_with_another+"/"+clicked_href_id_encrypted,type:"red",draggable:!1,backgroundDismiss:"cancel",escapeKey:!0,animateFromElement:!1,onAction:function(e){$(".jconfirm.jconfirm-light.jconfirm-open").remove()},onContentReady:function(){var e=app.data.selectize_working_shifts_formated_json,a=$("#shifts").selectize({plugins:["remove_button","optgroup_columns"],persist:!1,maxItems:1,mode:"multi",placeholder:"-- Select default working shift --",valueField:"id",labelField:"name",searchField:["name"],options:e,hideSelected:!0,openOnFocus:!0,closeAfterSelect:!0,render:{item:function(e,a){return"<div>"+(e.name?'<span class="name"><b>'+e.name+"</b></span>":"")+"</div>"},option:function(e,a){return'<div style="margin: 10px; border: 1px solid #000; padding: 10px;"><span class="label label-primary">'+e.name+"</span></div>"}},onChange:function(e){},onItemAdd:function(e){$("#confirmbox_spacer").css("height","0px")},onItemRemove:function(e){$("#confirmbox_spacer").css("height","200px")},onBlur:function(){$("#confirmbox_spacer").css("height","0px")},onFocus:function(){$("#confirmbox_spacer").css("height","200px")}})[0].selectize;a.settings;a.focus()},buttons:{disable_replace:{text:"Replace & Disable",btnClass:"btn-blue",keys:["shift"],action:function(){var e=this.$content.find("select#shifts").val();if(void 0===e||0==e.length)return $.alert({content:"Please select a working shift from the drop down.",animateFromElement:!1,type:"red"}),!1;$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),app.util.nprogressinit();var a={replace_with_working_shift:e};app.ajax.jsonGET(clicked_href,a,null,(function(){1==app.ajax.result.success?(window.downloadlisttable.ajax.reload(null,!1),app.util.fullscreenloading_end(),window.downloadlisttable.fixedHeader.adjust(),app.util.nprogressdone(),1==app.ajax.result.process_penalties_accept_reject_table_sync&&app_ops.ajaxexample2tb2.profile.sync_penalties_acceptance_rejection_table()):app.util.nprogressdone()}))}},cancel:{text:eval("app.translations."+app.data.locale+".cancel_text"),action:function(){}}}}):1==isDeleteable?$.confirm({title:eval("app.translations."+app.data.locale+".title_text"),content:eval("app.translations."+app.data.locale+".are_you_sure_you_want_to_delete_this_schedule")+"\n",type:"red",draggable:!1,backgroundDismiss:"cancel",escapeKey:!0,animateFromElement:!1,onAction:function(e){$(".jconfirm.jconfirm-light.jconfirm-open").remove()},buttons:{ok:{btnClass:"btn-primary text-white",keys:["enter"],text:eval("app.translations."+app.data.locale+".okay_text"),action:function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),app.util.nprogressinit();app.ajax.jsonGET(clicked_href,{},null,(function(){1==app.ajax.result.success?(window.downloadlisttable.ajax.reload(null,!1),app.util.fullscreenloading_end(),window.downloadlisttable.fixedHeader.adjust(),app.util.nprogressdone(),1==app.ajax.result.process_penalties_accept_reject_table_sync&&app_ops.ajaxexample2tb2.profile.sync_penalties_acceptance_rejection_table()):app.util.nprogressdone()}))}},cancel:{text:eval("app.translations."+app.data.locale+".cancel_text"),action:function(){}}}}):1==isEnableable?$.confirm({title:eval("app.translations."+app.data.locale+".title_text"),content:eval("app.translations."+app.data.locale+".are_you_sure_you_want_to_enable_this_schedule")+"\n",type:"red",draggable:!1,backgroundDismiss:"cancel",escapeKey:!0,animateFromElement:!1,onAction:function(e){$(".jconfirm.jconfirm-light.jconfirm-open").remove()},buttons:{ok:{btnClass:"btn-primary text-white",keys:["enter"],text:eval("app.translations."+app.data.locale+".okay_text"),action:function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),app.util.nprogressinit();app.ajax.jsonGET(clicked_href,{},null,(function(){1==app.ajax.result.success?(window.downloadlisttable.ajax.reload(null,!1),app.util.fullscreenloading_end(),window.downloadlisttable.fixedHeader.adjust(),app.util.nprogressdone(),1==app.ajax.result.process_penalties_accept_reject_table_sync&&app_ops.ajaxexample2tb2.profile.sync_penalties_acceptance_rejection_table()):app.util.nprogressdone()}))}},cancel:{text:eval("app.translations."+app.data.locale+".cancel_text"),action:function(){}}}}):$.confirm({title:eval("app.translations."+app.data.locale+".title_text"),content:eval("app.translations."+app.data.locale+".are_you_sure_you_want_to_disable_this_schedule")+"\n",type:"red",draggable:!1,backgroundDismiss:"cancel",escapeKey:!0,animateFromElement:!1,onAction:function(e){$(".jconfirm.jconfirm-light.jconfirm-open").remove()},buttons:{ok:{btnClass:"btn-primary text-white",keys:["enter"],text:eval("app.translations."+app.data.locale+".okay_text"),action:function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),app.util.nprogressinit();app.ajax.jsonGET(clicked_href,{},null,(function(){1==app.ajax.result.success?(window.downloadlisttable.ajax.reload(null,!1),app.util.fullscreenloading_end(),window.downloadlisttable.fixedHeader.adjust(),app.util.nprogressdone(),1==app.ajax.result.process_penalties_accept_reject_table_sync&&app_ops.ajaxexample2tb2.profile.sync_penalties_acceptance_rejection_table()):app.util.nprogressdone()}))}},cancel:{text:eval("app.translations."+app.data.locale+".cancel_text"),action:function(){}}}})})),$("i[name*='edit_custom_star_rating_comment_']").on("click",(function(e){e.preventDefault();var a=$(this).parent().attr("data-content"),t=$(this).parent(),l=$(this),s=$(this).parent().parent().data("case_id");if(1==$("#edit_star_rating_comment_input_"+s).is(":visible"))return!1;keep_track_of_last_clicked_item_to_react_after_reload="change_from_amount";e.target;e.preventDefault();var o=$(this).parent().parent().closest("tr"),n=$(this).parent().parent(),i=$(this).html(),r=(window.downloadlisttable.row(o),$(this).parent().attr("data-content")),d=r.split("<br>").length-1,c=n.height();c+=20*d,r=r.replace(/(?:<br>)/g,"\r\n");o.data("rowindex");var _=o.data("encrypted_case_id");keep_track_of_last_clicked_item_data_attribute_to_react_after_reload=s;$(this).data("date_ts");var p=$('<textarea id="edit_star_rating_comment_input_'+s+'" cols="10" rows="5" charswidth="23"  style="white-space: pre-wrap; line-height: 15px; min-height: 30px; width: 100%; height: '+c+'px; display: block; z-index: 12; resize: vertical; color: black;"></textarea>');p.val(r),t.css("display","none"),n.append(p),$(".popover").popover("hide"),$(document).on("keydown","#edit_star_rating_comment_input_"+s,(function(e){var a=$(this),t=a.val(),l=new RegExp(a.attr("pattern"),"g");setTimeout((function(){var e=a.val();l.test(e)||a.val(t)}),0),e.keyCode,27==e.keyCode&&n.html(i)})),$("#edit_star_rating_comment_input_"+s).click((function(e){e.stopImmediatePropagation()})),$("#edit_star_rating_comment_input_"+s).focus((function(){})),$("#edit_star_rating_comment_input_"+s).focus(),$("#edit_star_rating_comment_input_"+s).blur((function(){var e=$("#edit_star_rating_comment_input_"+s).val();if(e=e.replace(/(?:\r\n|\r|\n)/g,"<br>"),a==e)t.css("display",""),$("#edit_star_rating_comment_input_"+s).remove();else{t.css("display",""),t.attr("data-content",e),$("#edit_star_rating_comment_input_"+s).remove(),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var n={case_id:s,encrypted_case_id:_,new_star_rating_custom_note:e};app.ajax.json(app.data.change_custom_star_rating_note_for_job,n,null,(function(){success_ajax_then_refresh=app.ajax.result.success,1==app.ajax.result.success?(t.css("display",""),t.attr("data-content",e),null==app.ajax.result.star_rating_comment&&(l.css("display","none"),t.attr("data-content","")),o.children().next(".last_updated_by").html('<span style="font-size: 8px;">'+app.ajax.result.last_updated_by_name+"</span>"),o.children().next(".last_updated").html(app.ajax.result.updated_at)):($("#edit_star_rating_comment_input_"+s).remove(),t.css("display",""),t.attr("data-content",a))}))}var i=null;$('[data-toggle="popover"]').popover({placement:"auto bottom",trigger:"manual",html:!0,animation:!1}).on("mouseenter",(function(){var e,a=this;e=a,i=setInterval((function(){$(e).popover("show")}),300),$(this).siblings(".popover").on("mouseleave",(function(){$(a).popover("hide")}))})).on("mouseleave",(function(){clearInterval(i);var e=this,a=function(){setTimeout((function(){$(".popover:hover").length?a():$(e).popover("hide")}),50)};a()}))}))}))})),$("div[name*='edit_custom_star_rating_']").rateit({max:5,step:.5}),$(".rateit").on("beforerated",(function(e,a){e.preventDefault();var t=$(this).attr("name"),l=$(this).next(".fa"),s=$(this).parent(),o=($(this).parent().parent(),$(this).parent().parent().closest("tr")),n=$(this).parent().parent().data("case_id"),i=o.data("encrypted_case_id");$.confirm({title:"Setting "+a+" Stars",content:'<form action="" class="formName"><div class="form-group"><label>Enter something here</label><textarea class="star_rating_comment form-control" required cols="10" rows="5" charswidth="23"  style="white-space: pre-wrap; line-height: 15px; min-height: 30px; max-height: 600px; width: 100%; height: 200px; display: block; z-index: 12; resize: vertical;"/></textarea></div></form>',buttons:{formSubmit:{text:"Submit",btnClass:"btn-blue",action:function(){var e=this.$content.find(".star_rating_comment").val();$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var r={case_id:n,encrypted_case_id:i,new_star_rating_comment:e,new_star_rating:a};app.ajax.json(app.data.change_star_rating_for_job,r,null,(function(){success_ajax_then_refresh=app.ajax.result.success,1==app.ajax.result.success&&(""==app.ajax.result.star_rating_comment||null==app.ajax.result.star_rating_comment?(l.css("display","none"),$(this).parent().attr("data-content","----------------------")):(l.css("display",""),s.attr("data-content",app.ajax.result.star_rating_comment)),$("div[name='"+t+"']").rateit("value",app.ajax.result.star_rating),o.children().next(".last_updated_by").html('<span style="font-size: 8px;">'+app.ajax.result.last_updated_by_name+"</span>"),o.children().next(".last_updated").html(app.ajax.result.updated_at))}));var d=null;$('[data-toggle="popover"]').popover({placement:"auto bottom",trigger:"manual",html:!0,animation:!1}).on("mouseenter",(function(){var e,a=this;e=a,d=setInterval((function(){$(e).popover("show")}),300),$(this).siblings(".popover").on("mouseleave",(function(){$(a).popover("hide")}))})).on("mouseleave",(function(){clearInterval(d);var e=this,a=function(){setTimeout((function(){$(".popover:hover").length?a():$(e).popover("hide")}),50)};a()}))}},cancel:function(){}},onContentReady:function(){var e=this;this.$content.find("form").on("submit",(function(a){a.preventDefault(),e.$$formSubmit.trigger("click")}))}})})),$(".rateit").on("beforereset",(function(e){e.preventDefault();var name_attr=$(this).attr("name"),edit_icon_selector=$(this).next(".fa"),thehuh=$(this).parent(),td=$(this).parent().parent(),tr=$(this).parent().parent().closest("tr"),change_status_case_Id=$(this).parent().parent().data("case_id"),encrypted_case_id_uploading_to=tr.data("encrypted_case_id");$.confirm({title:"Reset Star Rating?",content:"This will also clear the comment",type:"red",draggable:!0,dragWindowGap:0,backgroundDismiss:"cancel",escapeKey:!0,animateFromElement:!1,onAction:function(e){$(".jconfirm.jconfirm-light.jconfirm-open").remove()},buttons:{ok:{btnClass:"btn-primary text-white",keys:["enter"],text:eval("app.translations."+app.data.locale+".okay_text"),action:function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var e={case_id:change_status_case_Id,encrypted_case_id:encrypted_case_id_uploading_to,new_star_rating_comment:null,new_star_rating:0};app.ajax.json(app.data.reset_star_rating_for_job,e,null,(function(){success_ajax_then_refresh=app.ajax.result.success,1==app.ajax.result.success&&(""==app.ajax.result.star_rating_comment||null==app.ajax.result.star_rating_comment?(edit_icon_selector.css("display","none"),thehuh.attr("data-content",""),thehuh.popover("destroy")):(edit_icon_selector.css("display",""),$(this).parent().attr("data-content",app.ajax.result.star_rating_comment)),$("div[name='"+name_attr+"']").rateit("value",app.ajax.result.star_rating),tr.children().next(".last_updated_by").html('<span style="font-size: 8px;">'+app.ajax.result.last_updated_by_name+"</span>"),tr.children().next(".last_updated").html(app.ajax.result.updated_at))}))}},cancel:{text:eval("app.translations."+app.data.locale+".cancel_text"),action:function(){}}}})})),$(".rateit").bind("over",(function(e,a){})),app_ops.manage_downloadlist.profile.handle_show_hide_columns_on_this_table(),$(".keyboardshortcutcombinationtolinktosharedfolder").mousedown((function(e){if(1==e.ctrlKey&&1==e.shiftKey&&1==e.altKey)if($(e.target).hasClass("highlight_span")){if(void 0!==$(e.target).parent()[0].href&&$(e.target).parent()[0].href.indexOf("/uploadfiles/")>=0)if($(e.target).parent()[0].href.indexOf("192.168.1.3")>=0);else{var a=$(e.target).parent()[0].href,t=$(e.target).parent().data("alt_href");$(e.target).parent().attr("href",t),$(e.target).parent().attr("data-backup_href",a)}}else if(void 0!==e.target.href&&e.target.href.indexOf("/uploadfiles/")>=0)if(e.target.href.indexOf("192.168.1.3")>=0);else{a=e.target.href,t=$(this).data("alt_href");$(this).attr("href",t),$(this).attr("data-backup_href",a)}})).mouseup((function(e){})).mouseleave((function(e){if($(e.target).hasClass("highlight_span")){if(void 0!==$(e.target).parent()[0].href)if($(e.target).parent()[0].href.indexOf("/uploadfiles/")>=0){if($(e.target).parent()[0].href.indexOf("192.168.1.3")>=0){var a=$(e.target).parent().data("backup_href");$(e.target).parent().attr("data-backup_href",""),$(e.target).parent().attr("href",a)}}else if($(e.target).parent()[0].href.indexOf("192.168.1.3")>=0){a=$(e.target).parent().data("backup_href");$(e.target).parent().attr("data-backup_href",""),$(e.target).parent().attr("href",a)}}else if(void 0!==e.target.href)if(e.target.href.indexOf("/uploadfiles/")>=0){if(e.target.href.indexOf("192.168.1.3")>=0){a=$(this).data("backup_href");$(this).attr("data-backup_href",""),$(this).attr("href",a)}}else if(e.target.href.indexOf("192.168.1.3")>=0){a=$(this).data("backup_href");$(this).attr("data-backup_href",""),$(this).attr("href",a)}}))},initComplete:function(e,a){app.data.section.indexOf("accounting"),app.data.auth_user_permissions.indexOf("WRITE accounting"),window.downloadlisttable.column(app.conf.table.filterColumn.managedownloadlistInfo.action)}});var counting_ctd=1,$period_datepicker=$(".period_datepicker");$period_datepicker.bind("keydown",(function(e){13==e.which&&e.stopImmediatePropagation(),27==e.which&&$(this).blur()})).datepicker({dateFormat:prefered_dateFormat,showMonthAfterYear:!0,numberOfMonths:2,showCurrentAtPos:1,changeMonth:!0,changeYear:!0,yearRange:"-2:+2",showOtherMonths:!1,selectOtherMonths:!1,toggleActive:!0,todayHighlight:!1,minDate:new Date(minD_YYYY,minD_MM,minD_DD),maxDate:new Date(maxD_YYYY,maxD_MM,maxD_DD),autoclose:!0,defaultDate:defaultDateVARIABLE,onSelect:function(){var e=$(".period_datepicker").val(),a=e.split(delimiter_for_splitting_variable),t=null,l=null,s=null,o=null;if("vi"===app.data.locale){t=parseInt(a[2])+"-"+parseInt(a[1])+"-"+parseInt(a[0]);l=parseInt(a[2]),s=parseInt(a[1]),o=parseInt(a[0])}else if("en"===app.data.locale){t=parseInt(a[2])+"-"+parseInt(a[1])+"-"+parseInt(a[0]);l=parseInt(a[2]),s=parseInt(a[1]),o=parseInt(a[0])}else if("de"===app.data.locale){t=parseInt(a[2])+"-"+parseInt(a[1])+"-"+parseInt(a[0]);l=parseInt(a[2]),s=parseInt(a[1]),o=parseInt(a[0])}var n=new Date(t),i=n.getFullYear(),r=n.toLocaleString("default",{month:"short"});$("#attendance_status_change_period").val(r+", "+i);var d={_token:$('meta[name="csrf-token"]').attr("content")};app.ajax.jsonGET(app.data.timesheet_period.gotoUrl+"/"+t,d,null,(function(){NProgress.start(),app.util.fullscreenloading_start(),success_ajax_then_refresh=app.ajax.result.success,1==app.ajax.result.success?(app.data.total_working_days=null,app.data.total_working_time=null,app.data.total_overtime=null,app.data.total_fines=null,$("#total_working_days").html("--"),$("#total_working_time").html("--:--:--"),$("#total_overtime").html("--:--:--"),$("#total_working_time_as_of_today").html("--:--:--"),$("#total_fines").html("--"),$("#attendance_status_change_period").val(r+", "+i),defaultDateVARIABLE=new Date(l,s,o),$period_datepicker.datepicker("option","defaultDate",defaultDateVARIABLE),$(".ui-state-active").removeClass("ui-state-active"),report_date_value=e,window.downloadlisttable.settings()[0].jqXHR.abort(),window.downloadlisttable.draw()):(NProgress.done(),app.util.fullscreenloading_end())}))},onClose:function(){var e=$(this).val();patt.test(e)},beforeShow:function(e,a){var t=$(".period_datepicker").offset().top,l=$(".period_datepicker").offset().left;setTimeout((function(){$("#ui-datepicker-div").css("position","realtive").css("top",t+16).css("left",l-353).css("z-index",102),$("#ui-datepicker-div").find(".ui-datepicker-current-day").removeClass("ui-datepicker-current-day").find("a").removeClass("ui-state-active")}),0)},onChangeMonthYear:function(){var e=$(".period_datepicker").offset().top,a=$(".period_datepicker").offset().left;setTimeout((function(){$("#ui-datepicker-div").css("position","realtive").css("top",e+16).css("left",a-353).css("z-index",102),$("#ui-datepicker-div").find(".ui-datepicker-current-day").removeClass("ui-datepicker-current-day").find("a").removeClass("ui-state-active")}),0)},beforeShowDay:function(e){var a=function(e){var a=new Date(e),t=""+(a.getMonth()+1),l=""+a.getDate(),s=a.getFullYear();t.length<2&&(t="0"+t);l.length<2&&(l="0"+l);return[s,t,l].join("-")}(e);your_dates=Object.keys(app.data.timesheet_period.range_array_days_formated).map((function(e){return app.data.timesheet_period.range_array_days_formated[e]}));var t=function(e){var a=new Date(e),t=""+(a.getMonth()+1),l=""+a.getDate(),s=a.getFullYear();return t.length<2&&(t="0"+t),l.length<2&&(l="0"+l),[s,t,l].join("-")}(app.data.timesheet_period.today);return a==t?[!0,"ui-state-active shift_planner_datepicker_today",""]:-1!=$.inArray(a,your_dates)?[!0,"ui-state-active",""]:[!0,"",""]}}),app_ops.manage_downloadlist.profile.filter.byJobStatus(window.downloadlisttable),app_ops.manage_downloadlist.profile.filter.byGlobalSearch(window.downloadlisttable),app_ops.manage_downloadlist.profile.filter.byColVis(window.downloadlisttable),app_ops.manage_downloadlist.profile.filter.byAssignee(window.downloadlisttable),app_ops.manage_downloadlist.profile.filter.byToolClient(window.downloadlisttable);var isSectionAccounting=app.data.section.indexOf("accounting"),canWRITEexport=app.data.auth_user_permissions.indexOf("WRITE export");$("select#status_filter").multiselect({columns:3,maxPlaceholderOpts:0,search:!0,texts:{placeholder:"All"}}),$("select#team_filter").multiselect({columns:2,maxPlaceholderOpts:0,search:!0,texts:{placeholder:"All"}}),$("select#position_filter").multiselect({columns:2,maxPlaceholderOpts:0,search:!0,texts:{placeholder:"All"}}),$("select#enabled_disabled_filter").multiselect({columns:2,maxPlaceholderOpts:0,search:!0,texts:{placeholder:"All"}}),$("select#jobstatus_filter").multiselect({columns:1,maxPlaceholderOpts:0,search:!0,texts:{placeholder:"All"}}),$("select#colVis_show_hide_filter").multiselect({columns:2,maxPlaceholderOpts:0,search:!0,texts:{placeholder:"None"}}),$("select#assignees_filter").multiselect({columns:2,maxPlaceholderOpts:0,search:!0,texts:{placeholder:"All"}}),$("select#tool_client_filter").multiselect({columns:2,maxPlaceholderOpts:0,search:!0,texts:{placeholder:"All"}});var filter_load=JSON.parse(sessionStorage.getItem("Br24_"+app.env()+"_managedownloadlistTable_table_downloadlistTable"));if(null!==filter_load){if(""!==filter_load.filters.global_search&&$("input[id='global_search_filter']").val(filter_load.filters.global_search),""!==filter_load.filters.status_cb){var array=filter_load.filters.status_cb.split("|");$("select#status_filter").val(array),$("select#status_filter").multiselect("reload")}if(""!==filter_load.filters.team_cb){var array=filter_load.filters.team_cb.split("|");$("select#team_filter").val(array),$("select#team_filter").multiselect("reload")}if(""!==filter_load.filters.position_cb){var array=filter_load.filters.position_cb.split("|");$("select#position_filter").val(array),$("select#position_filter").multiselect("reload")}if(""!==filter_load.filters.editor_level_cb){var array=filter_load.filters.editor_level_cb.split("|");$("select#editor_level_filter").val(array),$("select#editor_level_filter").multiselect("reload")}if(""!==filter_load.filters.job_status_cb){var array=filter_load.filters.job_status_cb.split("|");$("select#jobstatus_filter").val(array),$("select#jobstatus_filter").multiselect("reload")}if(""!==filter_load.filters.byEnabledDisabled){var array=filter_load.filters.byEnabledDisabled;$("select#enabled_disabled_filter").val(array),$("select#enabled_disabled_filter").multiselect("reload")}if(""!==filter_load.filters.byHideShowColumn_val){var array=filter_load.filters.byHideShowColumn_val;$("select#colVis_show_hide_filter").val(array),$("select#colVis_show_hide_filter").multiselect("reload")}if(""!==filter_load.filters.byShowColumn)var array=filter_load.filters.byShowColumn;if(""!==filter_load.filters.byHideShowColumn)var array=filter_load.filters.byHideShowColumn;if(""!==filter_load.filters.assignee_cb){var array=filter_load.filters.assignee_cb.split("|");$("select#assignees_filter").val(array),$("select#assignees_filter").multiselect("reload")}if(""!==filter_load.filters.tool_client_cb){var array=filter_load.filters.tool_client_cb.split("|");$("select#tool_client_filter").val(array),$("select#tool_client_filter").multiselect("reload")}}else window.byHideShowColumn_value=["0","1","2","3","4","5","6","7","8","9","10","11","12","14","15"],$("select#colVis_show_hide_filter").val(window.byHideShowColumn_value),$("select#colVis_show_hide_filter").multiselect("reload"),$("select#jobstatus_filter").val(["3","4","5","6","7","8"]),$("select#jobstatus_filter").multiselect("reload"),byJobStatus_value="downloaded|pause|check|ready|feedback|in progress",window.downloadlisttable.draw();function delay(e,a){var t=0;return function(){var l=this,s=arguments;clearTimeout(t),t=setTimeout((function(){e.apply(l,s)}),a||0)}}$('a[name="export"]').on("click",(function(){let e=$(this).data("action"),a=window.downloadlisttable.ajax.params();window.open(e+"?"+$.param(a)+"&filename=downloadlist-Info-"+app.data.timesheet_period.when+"&sheetname="+app.data.timesheet_period.when)})),$('a[name="clearallfilters"]').on("click",(function(){array=[],global_search_value="",byStatus_value="",byCompanyDepartment_value="",byCompanyPosition_value="",byEnabledDisabled_value="",byJobStatus_value="",byAssignee_value="",byToolClient_value="",$("input[id='global_search_filter']").val(""),$("select#status_filter, select#team_filter, select#position_filter, select#enabled_disabled_filter, select#assignees_filter, select#tool_client_filter").val(array),$("select#status_filter, select#team_filter, select#position_filter, select#enabled_disabled_filter, select#assignees_filter, select#tool_client_filter").multiselect("reload"),window.downloadlisttable.settings()[0].jqXHR.abort(),window.downloadlisttable.draw()})),$("#downloadlistTable").on("length.dt",(function(e,a,t){window.downloadlisttable.settings()[0].jqXHR.abort()})),$("#downloadlistTable").on("page.dt",(function(e,a,t){window.downloadlisttable.settings()[0].jqXHR.abort()})),$("select[id='enabled_disabled_filter']").on("change",(function(){var e=$("#enabled_disabled_filter option:selected").map((function(){return $(this).val()})).get();byEnabledDisabled_value=e,window.downloadlisttable.settings()[0].jqXHR.abort(),window.downloadlisttable.draw()})),$("select[id='status_filter']").on("change",(function(){var e=$("#status_filter option:selected").map((function(){return $(this).val()})).get();byStatus_value=e,window.downloadlisttable.settings()[0].jqXHR.abort(),window.downloadlisttable.draw()})),$("select[id='position_filter']").on("change",(function(){var e=$("#position_filter option:selected").map((function(){return $(this).text()})).get().join("|");byCompanyPosition_value=e,window.downloadlisttable.settings()[0].jqXHR.abort(),window.downloadlisttable.draw()})),$("select[id='team_filter']").on("change",(function(){var e=$("#team_filter option:selected").map((function(){return $(this).text()})).get().join("|");byCompanyDepartment_value=e,window.downloadlisttable.settings()[0].jqXHR.abort(),window.downloadlisttable.draw()})),$("select[id='jobstatus_filter']").on("change",(function(){var e=$("#jobstatus_filter option:selected").map((function(){return $(this).text()})).get().join("|");byJobStatus_value=e,window.downloadlisttable.settings()[0].jqXHR.abort(),window.downloadlisttable.draw()})),$("input[id='global_search_filter']").on("drop search change keyup copy paste cut",delay((function(e){(app.util.globalSearchkeyCodesPressedAllowed(e.keyCode)||"drop"==e.type||"search"==e.type||"change"==e.type||13==e.keyCode)&&("!"==(global_search_value=$(this).val())||"@"==global_search_value||($.xhrPool.abortAll(),window.downloadlisttable.settings()[0].jqXHR.abort(),window.downloadlisttable.draw()))}),300)),$("select[id='colVis_show_hide_filter']").on("change",(function(e){e.preventDefault(),app_ops.manage_downloadlist.profile.handle_show_hide_columns_on_this_table()})),$("select[id='assignees_filter']").on("change",(function(){var e=$("#assignees_filter option:selected").map((function(){return $(this).text()})).get().join("|");console.log("assignees="+e),byAssignee_value=e,window.downloadlisttable.settings()[0].jqXHR.abort(),window.downloadlisttable.draw()})),$("select[id='tool_client_filter']").on("change",(function(){var e=$("#tool_client_filter option:selected").map((function(){return $(this).val()})).get();byToolClient_value=e,window.downloadlisttable.settings()[0].jqXHR.abort(),window.downloadlisttable.draw()}))},handlefixedheaderpinning:function(){if("Chrome"==app.data.browser_detected){var e="";$(window).scroll((function(){clearTimeout(a),a=setTimeout((function(){var a=$(".visitor").outerHeight(!0);e!=a&&(window.downloadlisttable.fixedHeader.headerOffset(a),window.downloadlisttable.fixedHeader.adjust(),e=a)}),250)})),$(window).resize((function(){clearTimeout(t),t=setTimeout((function(){var a=$(".visitor").outerHeight(!0);e!=a&&(window.downloadlisttable.fixedHeader.headerOffset(a),window.downloadlisttable.fixedHeader.adjust(),e=a)}),250)}))}else if("Firefox"==app.data.browser_detected){var a,t;e="";$(window).scroll((function(){clearTimeout(a),a=setTimeout((function(){var a=$(".visitor").outerHeight(!0);e!=a&&(window.downloadlisttable.fixedHeader.headerOffset(a),window.downloadlisttable.fixedHeader.adjust(),e=a)}),250)})),$(window).resize((function(){clearTimeout(t),t=setTimeout((function(){var a=$(".visitor").outerHeight(!0);e!=a&&(window.downloadlisttable.fixedHeader.headerOffset(a),window.downloadlisttable.fixedHeader.adjust(),e=a)}),250)}))}},get_downloadlistInfo_tab:function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});app.ajax.html(app.data.tabHTML_downloadlistInfo,{},null,(function(){$("#downloadlistInfo").html(app.ajax.result)}))},foreach_handle_error_display:function(e,a){a.indexOf("The period modifier field is required when period unit is 2.")>=0&&(a="The period modifier field is required when period unit is Weekly",(t="period_modifier_send").indexOf("fk_")>=0&&(t=t.replace("fk_",""),a=a.replace("fk ","")),"file"==t?($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong></strong></span>'),$(".file-caption-name").after('<span style="padding-top:13px; margin-left: -13px;" class="help-block"><strong>'+a+"</strong></span>"),$(".file-caption-main").css("padding-bottom","20px")):($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>")));a.indexOf(" must be a date after ")>=0&&((t=a.split(" must be a date after ")[0].split("The ")[1].replace(/ /g,"_")).indexOf("fk_")>=0&&(t=t.replace("fk_",""),a=a.replace("fk ","")),"file"==t?($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong></strong></span>'),$(".file-caption-name").after('<span style="padding-top:13px; margin-left: -13px;" class="help-block"><strong>'+a+"</strong></span>"),$(".file-caption-main").css("padding-bottom","20px")):($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>")));a.indexOf(" is required when ")>=0&&((t=a.split(" is required when ")[0].split("The ")[1].replace(/ /g,"_")).indexOf("fk_")>=0&&(t=t.replace("fk_",""),a=a.replace("fk ","")),"file"==t?($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong></strong></span>'),$(".file-caption-name").after('<span style="padding-top:13px; margin-left: -13px;" class="help-block"><strong>'+a+"</strong></span>"),$(".file-caption-main").css("padding-bottom","20px")):($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>")));a.indexOf(" already exisits.")>=0&&((t=a.split(" already exisits.")[0].split("The ")[1].replace(/ /g,"_")).indexOf("fk_")>=0&&(t=t.replace("fk_",""),a=a.replace("fk ","")),"file"==t?($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong></strong></span>'),$(".file-caption-name").after('<span style="padding-top:13px; margin-left: -13px;" class="help-block"><strong>'+a+"</strong></span>"),$(".file-caption-main").css("padding-bottom","20px")):($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>")));a.indexOf(" may only contain letters.")>=0&&((t=a.split(" may only contain letters.")[0].split("The ")[1].replace(/ /g,"_")).indexOf("fk_")>=0&&(t=t.replace("fk_",""),a=a.replace("fk ","")),"file"==t?($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong></strong></span>'),$(".file-caption-name").after('<span style="padding-top:13px; margin-left: -13px;" class="help-block"><strong>'+a+"</strong></span>"),$(".file-caption-main").css("padding-bottom","20px")):($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>")));a.indexOf(" may only contain letters, numbers and spaces.")>=0&&((t=a.split(" may only contain letters, numbers and spaces.")[0].split("The ")[1].replace(/ /g,"_")).indexOf("fk_")>=0&&(t=t.replace("fk_",""),a=a.replace("fk ","")),"file"==t?($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong></strong></span>'),$(".file-caption-name").after('<span style="padding-top:13px; margin-left: -13px;" class="help-block"><strong>'+a+"</strong></span>"),$(".file-caption-main").css("padding-bottom","20px")):($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>")));a.indexOf("The file must be a file of type:")>=0&&((t=a.split(" must be a file of type:")[0].split("The ")[1].replace(/ /g,"_")).indexOf("fk_")>=0&&(t=t.replace("fk_",""),a=a.replace("fk ","")),"file"==t?($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong></strong></span>'),$(".file-caption-name").after('<span style="padding-top:13px; margin-left: -13px;" class="help-block"><strong>'+a+"</strong></span>"),$(".file-caption-main").css("padding-bottom","20px")):($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>")));a.indexOf(" failed to upload.")>=0&&((t=a.split(" failed to upload.")[0].split("The ")[1].replace(/ /g,"_")).indexOf("fk_")>=0&&(t=t.replace("fk_",""),a=a.replace("fk ","")),"file"==t?($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong></strong></span>'),$(".file-caption-name").after('<span style="padding-top:13px; margin-left: -13px;" class="help-block"><strong>'+a+"</strong></span>"),$(".file-caption-main").css("padding-bottom","20px")):($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>")));a.indexOf(" number can only contain numbers.")>=0&&((t=a.split(" number can only contain numbers.")[0].split("The ")[1].replace(/ /g,"_")).indexOf("fk_")>=0&&(t=t.replace("fk_",""),a=a.replace("fk ","")),$("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>"));a.indexOf(" may not be greater than ")>=0&&((t=a.split(" may not be greater than ")[0].split("The ")[1].replace(/ /g,"_")).indexOf("fk_")>=0&&(t=t.replace("fk_",""),a=a.replace("fk ","")),$("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>"));a.indexOf(" number can only contain numbers.")>=0&&((t=a.split(" number can only contain numbers.")[0].split("The ")[1].replace(/ /g,"_")).indexOf("fk_")>=0&&(t=t.replace("fk_",""),a=a.replace("fk ","")),$("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>"));a.indexOf("must be a number.")>=0&&((t=a.split(" must be a number.")[0].split("The ")[1].replace(/ /g,"_")).indexOf("fk_")>=0&&(t=t.replace("fk_",""),a=a.replace("fk ","")),$("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>"));a.indexOf(" must only contain numbers")>=0&&((t=a.split(" must only contain numbers")[0].replace(/ /g,"_")).indexOf("fk_")>=0&&(t=t.replace("fk_",""),a=a.replace("fk ","")),t.indexOf("contact_phone")>=0&&(t="work_"+t),$("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>"));a.indexOf("is not a valid date.")>=0&&((t=a.split(" is not a valid date.")[0].split("The ")[1].replace(/ /g,"_")).indexOf("fk_")>=0&&(t=t.replace("fk_",""),a=a.replace("fk ","")),$("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>"));a.indexOf(" field is required.")>=0&&((t=a.split(" field")[0].split("The ")[1].replace(/ /g,"_")).indexOf("fk_")>=0&&(t=t.replace("fk_",""),a=a.replace("fk ","")),"file"==t?($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong></strong></span>'),$(".file-caption-name").after('<span style="padding-top:13px; margin-left: -13px;" class="help-block"><strong>'+a+"</strong></span>"),$(".file-caption-main").css("padding-bottom","20px")):($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>")));if(a.indexOf(" must be at least ")>=0){var t=a.split(" must be at least")[0].split("The ")[1].replace(/ /g,"_");$("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>")}if(a.indexOf(" format is invalid.")>=0){t=a.split(" format is invalid.")[0].split("The ")[1].replace(/ /g,"_");$("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>")}if(a.indexOf(" field is required when ")>=0){t=a.split(" field is required when ")[0].split("The ")[1].replace(/ /g,"_");a=a.replace("fk ",""),$("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>")}if(a.indexOf(" must be between ")>=0){t=a.split(" must be between ")[0].split("The ")[1].replace(/ /g,"_");a=a.replace("fk ",""),$("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>")}a.indexOf("Not Permitted")},handle_show_hide_columns_on_this_table:function(){var e=[],a=[],t=[],l=[],s=[],o=[],n=[];$("select[id='colVis_show_hide_filter'] option").each((function(t){e[t]=$(this).val(),a[t]=$("select[id='colVis_show_hide_filter'] option[value='"+$(this).val()+"']").attr("data-column")})),$.each($("select[id='colVis_show_hide_filter']").val(),(function(e,a){t[e]=a,l[e]=parseInt(a)+5,o[e]=parseInt(a)-1}));var i=e.filter((e=>-1===t.indexOf(e)));$.each(i,(function(e,a){s[e]=parseInt(a)+5,a<11?n[e]=parseInt(a)-1:11==a||(n[e]=parseInt(a)-2)}));var r=0,d=[];$.each(i,(function(t,l){var s=null;$.each(e,(function(e,a){a==l&&(s=e)}));var o=a[s];o=o.split(","),$.each(o,(function(e,a){d[r]=parseInt(a),r++}))}));r=0;var c=[];$.each(t,(function(t,l){var s=null;$.each(e,(function(e,a){a==l&&(s=e)}));var o=a[s];o=o.split(","),$.each(o,(function(e,a){c[r]=parseInt(a),r++}))})),window.byHideShowColumn_value=$("select[id='colVis_show_hide_filter']").val(),window.byShowColumn_value=c,window.byHideColumn_value=d,$.each(window.downloadlisttable.columns().header(),(function(e,a){c.includes(e)&&($(a).removeClass("hidden"),$.each($(a).parent().prev().children(),(function(e,a){l.includes(e)&&$(a).removeClass("hidden")}))),d.includes(e)&&($(a).addClass("hidden"),$.each($(a).parent().prev().children(),(function(e,a){s.includes(e)&&$(a).addClass("hidden")})))})),$.each(window.downloadlisttable.columns().footer(),(function(e,a){c.includes(e)&&($(a).removeClass("hidden"),$.each($(a).parent().next().children(),(function(e,a){o.includes(e)&&$(a).removeClass("hidden")}))),d.includes(e)&&($(a).addClass("hidden"),$.each($(a).parent().next().children(),(function(e,a){n.includes(e)&&$(a).addClass("hidden")})))})),window.downloadlisttable.rows().every((function(e,a,t){$.each(this.node().children,(function(e,a){c.includes(e)&&$(a).removeClass("hidden"),d.includes(e)&&$(a).addClass("hidden")}))})),window.downloadlisttable.fixedHeader.adjust();var _=JSON.parse(sessionStorage.getItem("Br24_"+app.env()+"_managedownloadlistTable_table_downloadlistTable"));if(null!==_){var p=_;p.filters={status_cb:_.filters.status_cb,team_cb:_.filters.team_cb,position_cb:_.filters.position_cb,editor_level_cb:_.filters.editor_level_cb,job_status_cb:_.filters.job_status_cb,assignee_cb:_.filters.assignee_cb,tool_client_cb:_.filters.tool_client_cb,byEnabledDisabled:_.filters.byEnabledDisabled,byStatus:_.filters.byStatus,byTeam:_.filters.byTeam,byPosition:_.filters.byPosition,byEditor_level:_.filters.byEditor_level,byJobStatus:_.filters.byJobStatus,byAssignee:_.filters.byAssignee,byToolClient:_.filters.byToolClient,byHideShowColumn_val:window.byHideShowColumn_value,byHideColumn:window.byHideColumn_value,byShowColumn:window.byShowColumn_value,locale_date_format:_.filters.locale_date_format,global_search:_.filters.global_search},sessionStorage.setItem("Br24_"+app.env()+"_managedownloadlistTable_table_downloadlistTable",JSON.stringify(p))}},sync_preview_required_status:function(e,a,t,l,s,o){if(""!==o){var n={_token:$('meta[name="csrf-token"]').attr("content"),case_id:e,encrypted_case_id:a,status:t,input_name:s.attr("name")};app.ajax.jsonGET(app.data.urlSyncReviewRequiredStatus,n,null,(function(){if(success_ajax_then_refresh=app.ajax.result.success,1==app.ajax.result.success)app.data.selectize_hashtag_list_formated_json=app.ajax.result.selectize_hashtag_list_formated_json,l.children().next(".last_updated_by").html('<span style="font-size: 8px;">'+app.ajax.result.last_updated_by_name+"</span>"),l.children().next(".last_updated").html(app.ajax.result.updated_at);else{s.is(":checked")?s.prop("checked",!1):s.prop("checked",!0);var e="Something went wrong";$.each(app.ajax.result.errors,(function(a,t){e=e+"<br>"+t})),e=e+"<br>"+app.ajax.result.caseId+" preview required state not changed",$.alert(e)}}))}else{s.is(":checked")?(s.prop("checked",!1),s.prop("disabled",!0)):(s.prop("checked",!0),s.prop("disabled",!1));var i=e+" preview required state not changed. Reason: Job has no assignees.";$.alert(i)}},filter:{byAssignee:function(e){var a=app.util.build.assignees();$("div#assignees_filter").html(a)},byColVis:function(e){var a=app.util.build.custom_visibility_buttons_auto_dl();$("div#custom_visibility_buttons").html(a).css("margin-left","10px").addClass("dataTables_length")},byToolClient:function(e){var a=app.util.build.tool_client_auto_dl();$("div#tool_client_buttons").html(a)},byTeam:function(e){var a=app.util.build.team();$("div#team_filter").html(a),$("select[id='team_filter']").on("change",(function(){var a=$("#team_filter option:selected").map((function(){return $(this).text()})).get().join("|");a.indexOf("|")>=0||""==a?e.column(app.conf.table.filterColumn.managedownloadlistInfo.team).search(a,!0,!1).draw():e.column(app.conf.table.filterColumn.managedownloadlistInfo.team).search("^"+a+"$",!0,!1).draw()}))},byPosition:function(e){var a=app.util.build.position();$("div#position_filter").html(a),$("select[id='position_filter']").on("change",(function(){var a=$("#position_filter option:selected").map((function(){return $(this).text()})).get().join("|");a.indexOf("|")>=0||""==a?e.column(app.conf.table.filterColumn.managedownloadlistInfo.position).search(a,!0,!1).draw():e.column(app.conf.table.filterColumn.managedownloadlistInfo.position).search("^"+a+"$",!0,!1).draw()}))},byStatus:function(e){var a=app.util.build.status();$("div#status_filter").html(a),$("select[id='status_filter']").on("change",(function(){var a=$("#status_filter option:selected").map((function(){return $(this).val()})).get().join("|");e.column(app.conf.table.filterColumn.managedownloadlistInfo.status+1).search(a,!0,!1).draw()}))},byEnabledDisabled:function(e){var a=app.util.build.enabled_disabled();$("div#enabled_disabled_filter").html(a),$("select[id='enabled_disabled_filter']").on("change",(function(){var a=$("#enabled_disabled_filter option:selected").map((function(){return $(this).val()})).get().join("|");e.column(app.conf.table.filterColumn.managedownloadlistInfo.enabled_disabled).search(a,!0,!1).draw()}))},bySections:function(e){var a=app.util.build.sections();$("div#sections_filter").html(a),$("select[id='sections_filter']").on("change",(function(){var a=$("#sections_filter option:selected").map((function(){return $(this).text()})).get().join("|");e.column(app.conf.table.filterColumn.managedownloadlistInfo.sections).search(a,!0,!1).draw()}))},byJobStatus:function(e){var a=app.util.build.jobstatus();$("div#jobstatus_filter").html(a),$("select[id='jobstatus_filter']").on("change",(function(){var e=$("#jobstatus_filter option:selected").map((function(){return $(this).text()})).get().join("|");window.downloadlisttable.column(app.conf.table.filterColumn.managedownloadlistInfo.jobstatus).search(e,!0,!1).draw()}))},exportExcel:function(e){var a=app.util.build.exportbutton(),t=a.search("data-action=")+13,l=app.data.URL_getdownloadlistinfoExportExcel,s=[a.slice(0,t),l,a.slice(t)].join("");$("div#export_buttonlocation").html(s)},clearallfilter:function(e){var a=app.util.build.clearallfiltersbutton();$("div#clear_filter").html(a)},byGlobalSearch:function(e){var a=app.util.build.global_search();$("div#custom_global_filter").html(a)}}}},manage_manualdownloadlist:{profile:{init:function(){$(window).on("load",(function(){app.util.period(),$(".previous-surround, .next-surround").css("display","none"),NProgress.configure({parent:"#ibox-title",showSpinner:!1}),app_ops.manage_manualdownloadlist.profile.init_next(),app.util.fixedheaderviewporthandler(),console.log("manage_manualdownloadlist.index"),window.newdataimported=!1}))},init_next:function(){var e=document.referrer,a=[];if(null!==JSON.parse(localStorage.getItem("Br24_"+app.env()+"_managemanualdownloadlistinfo_oommdloa")))null==e||""==e?($(".loader").append('<span style="position: absolute; top: 45%; left: 50%; transform: translateX(-50%) translateY(-50%); font-size: 22px; color: red; text-align:center">Another Manage manual downloadlist tab is open already.<br>for security reasons only one instance is allowed<br><a style="font-size:10px" href="/downloadlist">Back Home</a></span>'),NProgress.done(),$(".navbar-nav").remove(),$(".ibox-content").remove(),$(".loader").css("background","rgb(249,249,249, 0.5"),$(".nav-tabs").remove(),$(".ibox-title").remove(),$(".tab-content").remove()):($(".loader").append('<span style="position: absolute; top: 45%; left: 50%; transform: translateX(-50%) translateY(-50%); font-size: 22px; color: red; text-align:center">Another Manage manual downloadlist tab is open already.<br>for security reasons only one instance is allowed<br><a style="font-size:10px" href="/downloadlist">Back Home</a></span>'),NProgress.done(),$(".loader").css("background","rgb(249,249,249, 0.5"),$(".ibox-content").remove(),$(".nav-tabs").remove(),$(".tab-content").remove(),$(".navbar-nav").remove(),$(".ibox-title").remove());else{a.oommdloa={managemanualdownloadlist_browsertabstatus:"open",timestamp:(new Date).getTime()},localStorage.setItem("Br24_"+app.env()+"_managemanualdownloadlistinfo_oommdloa",JSON.stringify(a.oommdloa)),app_ops.manage_manualdownloadlist.profile.get_manualdownloadlistInfo_tab();var t=1;$(document).ajaxStop((function(){1==t&&(app_ops.manage_manualdownloadlist.profile.add_edit_manualdownloadlist_colorbox(),t=2)})),window.onbeforeunload=function(){},window.onunload=function(){localStorage.removeItem("Br24_"+app.env()+"_managemanualdownloadlistinfo_oommdloa")}}},add_edit_manualdownloadlist_colorbox:function(){app_ops.manage_manualdownloadlist.profile.manualdownloadlist_table(),app_ops.manage_manualdownloadlist.profile.handlefixedheaderpinning()},manualdownloadlist_table:function(){var prefered_dateFormat=null,patt=null,prefered_dateFormat_placeholder=null,number_format_per_locale=null,delimiter_for_splitting_variable=null,numberformat_locale=null;"vi"===app.data.locale||"en"===app.data.locale?(prefered_dateFormat="dd/mm/yy",prefered_dateFormat_placeholder="dd/mm/yyyy",patt=new RegExp("^([0]?[1-9]|[1|2][0-9]|[3][0|1])[./-]([0]?[1-9]|[1][0-2])[./-]([0-9]{4}|[0-9]{2})$"),delimiter_for_splitting_variable="/"):"de"===app.data.locale&&(prefered_dateFormat="dd.mm.yy",prefered_dateFormat_placeholder="dd.mm.yyyy",patt=new RegExp("^([0]?[1-9]|[1|2][0-9]|[3][0|1])[./-]([0]?[1-9]|[1][0-2])[./-]([0-9]{4}|[0-9]{2})$"),delimiter_for_splitting_variable="."),"VND"==app.data.currency?(number_format_per_locale="#,##0.## ₫",numberformat_locale="vi"):"USD"==app.data.currency?(number_format_per_locale="$ #,##0.00",numberformat_locale="en"):"EUR"==app.data.currency?(number_format_per_locale="€ #,##0.00",numberformat_locale="de"):(number_format_per_locale="#,##0.## ₫",numberformat_locale="vi");var global_search_value="",byStatus_value="",byCompanyPosition_value="",byCompanyDepartment_value="",byEditorLevel_value="",byEnabledDisabled_value="",byJobStatus_value="";window.byHideShowColumn_value="",window.byShowColumn_value="",window.byHideColumn_value="";var byAssignee_value="",default_datepicker_date_value=app.data.default_datepicker_date,prev_month_min_date_value=app.data.minDatefordatefromfilter,maxDatefordatefromfilter_prep=app.data.maxDatefordatefromfilter,min_date_value=app.data.timesheet_period.firstdateofMonth,max_date_value=app.data.timesheet_period.lastdateofMonth,prev_min_date_value=app.data.timesheet_period.firstdateofMonth,prev_max_date_value=app.data.timesheet_period.lastdateofMonth,minD_YYYY="",minD_MM="",minD_DD="",maxD_YYYY="",maxD_MM="",maxD_DD="",report_date_value=null,prev_month_from=prev_month_min_date_value.split(delimiter_for_splitting_variable),max_month_from=maxDatefordatefromfilter_prep.split(delimiter_for_splitting_variable),from=min_date_value.split("-"),to_date=max_date_value.split("-");("vi"===app.data.locale||"en"===app.data.locale||"de"===app.data.locale)&&(minD_YYYY=parseInt(prev_month_from[2]),minD_MM=parseInt(prev_month_from[1])-1,minD_DD=parseInt(prev_month_from[0]),maxD_YYYY=parseInt(max_month_from[2]),maxD_MM=parseInt(max_month_from[1])-1,maxD_DD=parseInt(max_month_from[0]));var default_datepicker_date=default_datepicker_date_value.split("-"),default_minD_YYYY=parseInt(default_datepicker_date[0]),default_minD_MM=parseInt(default_datepicker_date[1])-1,default_minD_DD=parseInt(default_datepicker_date[2]),defaultDateVARIABLE=new Date(default_minD_YYYY,default_minD_MM,default_minD_DD),editing_configuration=null,keep_track_of_last_clicked_item_to_react_after_reload=null,keep_track_of_last_clicked_item_data_attribute_to_react_after_reload=null,keep_track_of_input_changes_to_assist_screen_load_input_disable=null,keep_track_of_last_clicked_easyautocomplete_to_reopen=null,keep_track_of_last_clicked_item_to_react_after_reload_2=null,keep_track_of_last_clicked_item_data_attribute_to_react_after_reload_2=null,only_trigger_once=null,re_open_requested=null,reopen_refreshIntervalId=null,reopen_timer=function(){reopen_refreshIntervalId=setInterval((function(){$(".dataTable tbody td.parent."+keep_track_of_last_clicked_item_to_react_after_reload_2+"[data-employee='"+keep_track_of_last_clicked_item_data_attribute_to_react_after_reload_2+"']").trigger("click"),clearInterval(reopen_refreshIntervalId),keep_track_of_last_clicked_easyautocomplete_to_reopen=null,keep_track_of_last_clicked_item_to_react_after_reload_2=null,keep_track_of_last_clicked_item_data_attribute_to_react_after_reload_2=null}),100)},filter_load=JSON.parse(sessionStorage.getItem("Br24_"+app.env()+"_managemanualdownloadlistTable_table_manualdownloadlistTable"));if(null!==filter_load&&(""!==filter_load.filters.global_search&&(global_search_value=filter_load.filters.global_search),""!==filter_load.filters.byStatus&&(byStatus_value=filter_load.filters.byStatus),""!==filter_load.filters.byTeam&&(byCompanyDepartment_value=filter_load.filters.byTeam),""!==filter_load.filters.byPosition&&(byCompanyPosition_value=filter_load.filters.byPosition),""!==filter_load.filters.byEditor_level&&(byEditorLevel_value=filter_load.filters.byEditor_level),""!==filter_load.filters.byEnabledDisabled&&(byEnabledDisabled_value=filter_load.filters.byEnabledDisabled),""!==filter_load.filters.byJobStatus&&(byJobStatus_value=filter_load.filters.byJobStatus),""!==filter_load.filters.byHideShowColumn_val&&(window.byHideShowColumn_value=filter_load.filters.byHideShowColumn_val),""!==filter_load.filters.byShowColumn&&(window.byShowColumn_value=filter_load.filters.byShowColumn),""!==filter_load.filters.byHideColumn&&(window.byHideColumn_value=filter_load.filters.byHideColumn),""!==filter_load.filters.byAssignee&&(byAssignee_value=filter_load.filters.byAssignee)),"Chrome"==app.data.browser_detected)var broswer_columnDefs=[],browser_columns=[{orderable:!0,searchable:!0,data:"case_id",className:"mdl_jobId_col_width"},{orderable:!1,searchable:!0,data:"xml_jobid_title",className:"mdl_jobId_col_width"},{orderable:!1,searchable:!0,data:"xml_title_contents",className:"mdl_xml_title_contents_col_width"},{orderable:!1,searchable:!0,data:"number_of_pictures",className:"mdl_number_of_pictures_col_width"},{orderable:!1,searchable:!0,data:"instructions_col",className:"mdl_extra_small_col_width"},{orderable:!1,searchable:!0,data:"preview_col",className:"mdl_extra_small_col_width two_weeks_checkbox_col"},{orderable:!1,searchable:!0,data:"output_files_col",className:"mdl_extra_small_col_width"},{orderable:!0,searchable:!1,data:"delivery_time",name:"expected_delivery_date_coalesce_sortorder",className:"mdl_delivery_time_col_width"},{orderable:!1,searchable:!1,data:"assignees",className:"mdl_assignee_tags_col_width"},{orderable:!1,searchable:!1,data:"internal_notes",className:"mdl_internal_notes_col_width"},{orderable:!1,searchable:!1,data:"job_from",className:"mdl_job_from_col_width"},{orderable:!1,searchable:!1,data:"rating",className:"hidden mdl_assignee_tags_col_width"},{orderable:!1,searchable:!1,data:"tags",className:"mdl_assignee_tags_col_width"},{orderable:!0,searchable:!0,data:"job_status",name:"status_grouping_sort_order",className:"mdl_modified_dates_col_with"},{orderable:!0,searchable:!0,data:"created_at",name:"created_at_sortorder",className:"mdl_modified_dates_col_with"},{orderable:!1,searchable:!1,data:"last_updated_by",className:"mdl_modified_dates_col_with"},{orderable:!0,searchable:!1,data:"last_updated",name:"last_updated_sortorder",className:"mdl_modified_dates_col_with"}];else if("Firefox"==app.data.browser_detected)var broswer_columnDefs=[],browser_columns=[{orderable:!0,searchable:!0,data:"case_id",className:"mdl_jobId_col_width"},{orderable:!1,searchable:!0,data:"xml_jobid_title",className:"mdl_jobId_col_width"},{orderable:!1,searchable:!0,data:"xml_title_contents",className:"mdl_xml_title_contents_col_width"},{orderable:!1,searchable:!0,data:"number_of_pictures",className:"mdl_number_of_pictures_col_width"},{orderable:!1,searchable:!0,data:"instructions_col",className:"mdl_extra_small_col_width"},{orderable:!1,searchable:!0,data:"preview_col",className:"mdl_extra_small_col_width two_weeks_checkbox_col"},{orderable:!1,searchable:!0,data:"output_files_col",className:"mdl_extra_small_col_width"},{orderable:!0,searchable:!1,data:"delivery_time",name:"expected_delivery_date_coalesce_sortorder",className:"mdl_delivery_time_col_width"},{orderable:!1,searchable:!1,data:"assignees",className:"mdl_assignee_tags_col_width"},{orderable:!1,searchable:!1,data:"internal_notes",className:"mdl_internal_notes_col_width"},{orderable:!1,searchable:!1,data:"job_from",className:"mdl_job_from_col_width"},{orderable:!1,searchable:!1,data:"rating",className:"hidden mdl_assignee_tags_col_width"},{orderable:!1,searchable:!1,data:"tags",className:"mdl_assignee_tags_col_width"},{orderable:!0,searchable:!0,data:"job_status",name:"status_grouping_sort_order",className:"mdl_modified_dates_col_with"},{orderable:!0,searchable:!0,data:"created_at",name:"created_at_sortorder",className:"mdl_modified_dates_col_with"},{orderable:!1,searchable:!1,data:"last_updated_by",className:"mdl_modified_dates_col_with"},{orderable:!0,searchable:!1,data:"last_updated",name:"last_updated_sortorder",className:"mdl_modified_dates_col_with"}];else var broswer_columnDefs=[],browser_columns=[{orderable:!0,searchable:!0,data:"case_id",className:"mdl_jobId_col_width"},{orderable:!1,searchable:!0,data:"xml_jobid_title",className:"mdl_jobId_col_width"},{orderable:!1,searchable:!0,data:"xml_title_contents",className:"mdl_xml_title_contents_col_width"},{orderable:!1,searchable:!0,data:"number_of_pictures",className:"mdl_number_of_pictures_col_width"},{orderable:!1,searchable:!0,data:"instructions_col",className:"mdl_extra_small_col_width"},{orderable:!1,searchable:!0,data:"preview_col",className:"mdl_extra_small_col_width two_weeks_checkbox_col"},{orderable:!1,searchable:!0,data:"output_files_col",className:"mdl_extra_small_col_width"},{orderable:!0,searchable:!1,data:"delivery_time",name:"expected_delivery_date_coalesce_sortorder",className:"mdl_delivery_time_col_width"},{orderable:!1,searchable:!1,data:"assignees",className:"mdl_assignee_tags_col_width"},{orderable:!1,searchable:!1,data:"internal_notes",className:"mdl_internal_notes_col_width"},{orderable:!1,searchable:!1,data:"job_from",className:"mdl_job_from_col_width"},{orderable:!1,searchable:!1,data:"rating",className:"hidden mdl_assignee_tags_col_width"},{orderable:!1,searchable:!1,data:"tags",className:"mdl_assignee_tags_col_width"},{orderable:!0,searchable:!0,data:"job_status",name:"status_grouping_sort_order",className:"mdl_modified_dates_col_with"},{orderable:!0,searchable:!0,data:"created_at",name:"created_at_sortorder",className:"mdl_modified_dates_col_with"},{orderable:!1,searchable:!1,data:"last_updated_by",className:"mdl_modified_dates_col_with"},{orderable:!0,searchable:!1,data:"last_updated",name:"last_updated_sortorder",className:"mdl_modified_dates_col_with"}];window.manualdownloadlisttable=$("#manualdownloadlistTable").DataTable({pageLength:app.conf.table.pageLength,lengthMenu:app.conf.table.lengthMenu,processing:!0,serverSide:!0,bFilter:!0,ordering:!0,responsive:!0,scrollCollapse:!0,bAutoWidth:!0,fixedHeader:{header:!0,footer:!0,headerOffset:57,footerOffset:0},aaSorting:[],stateSave:!0,stateDuration:-1,searching:!1,stateSaveCallback:function(e,a){var t=$("#status_filter option:selected").map((function(){return $(this).val()})).get().join("|"),l=$("#team_filter option:selected").map((function(){return $(this).val()})).get().join("|"),s=$("#position_filter option:selected").map((function(){return $(this).val()})).get().join("|"),o=$("#editor_level_filter option:selected").map((function(){return $(this).val()})).get().join("|"),n=$("#jobstatus_filter option:selected").map((function(){return $(this).val()})).get().join("|"),i=$("#assignees_filter option:selected").map((function(){return $(this).val()})).get().join("|"),r=$("#global_search_filter").val(),d=prefered_dateFormat;a.filters={status_cb:t,team_cb:l,position_cb:s,editor_level_cb:o,job_status_cb:n,assignee_cb:i,byEnabledDisabled:byEnabledDisabled_value,byStatus:byStatus_value,byTeam:byCompanyDepartment_value,byPosition:byCompanyPosition_value,byEditor_level:byEditorLevel_value,byJobStatus:byJobStatus_value,byAssignee:byAssignee_value,byHideShowColumn_val:window.byHideShowColumn_value,byHideColumn:window.byHideColumn_value,byShowColumn:window.byShowColumn_value,locale_date_format:d,global_search:r},sessionStorage.setItem("Br24_"+app.env()+"_managemanualdownloadlistTable_table_"+e.sInstance,JSON.stringify(a))},stateLoadCallback:function(e){return JSON.parse(sessionStorage.getItem("Br24_"+app.env()+"_managemanualdownloadlistTable_table_"+e.sInstance))},oLanguage:{sProcessing:"<div class='loader_blank'></div><div class='processingblured'>"+eval("app.translations."+app.data.locale+".please_wait_loading")+"<br><img src='../img/loader.gif'></div><div class='no_blurtext'>"+eval("app.translations."+app.data.locale+".please_wait_loading")+"<br><img src='../img/loader.gif'></div>",sZeroRecords:eval("app.translations."+app.data.locale+".no_downloadlist_added")},ajax:{url:app.data.getmanualdownloadlistinfo_db_table,dataSrc:"data",type:"POST",beforeSend:function(e,a){a.crossDomain||e.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},data:function(e){e.report_date_value=report_date_value,e.locale_date_format=prefered_dateFormat,e.global_search_value=global_search_value,e.byStatus_value=byStatus_value,e.byCompanyPosition_value=byCompanyPosition_value,e.byCompanyDepartment_value=byCompanyDepartment_value,e.byEditorLevel_value=byEditorLevel_value,e.byJobStatus_value=byJobStatus_value,e.byEnabledDisabled_value=byEnabledDisabled_value,e.byAssignee_value=byAssignee_value}},columnDefs:broswer_columnDefs,columns:browser_columns,order:[[14,"asc"]],rowGroup:{dataSrc:"expected_delivery_time_custom_grouping",startRender:function(e,a){return $('<tr style="height: 5px; max-height: 5px;" class="group group-start"><td style="font-size: 5px; height: 5px; max-height: 5px;" class="status_grouping_style unselectable" colspan="17"><div style="text-align: left; margin-left: 10px"></div></td></tr>')}},dom:'<".controlsfortable"<"#export_buttonlocation.html5buttons">rl<"#custom_visibility_buttons">f<"#custom_global_filter.dataTables_filter"><"#jobstatus_filter.dataTables_filter"><"#assignees_filter.dataTables_filter"><"#editor_level_filter.dataTables_filter"><"#team_filter.dataTables_filter"><"#position_filter.dataTables_filter"><"#status_filter.dataTables_filter"><"#birthdaytodate_filter.dataTables_filter"><"#birthdayfromdate_filter.dataTables_filter"><"#birthmonths_filter.dataTables_filter"><"#clear_filter.html5buttons"><"clearfix"><".table_block"<".table_float_left"i><".table_float_right"p>>>t<".controlsfortable"p>',createdRow:function(e,a,t){if(0==t){clearInterval(window.autoPollrefreshIntervalId),clearInterval(window.autoPollrefreshIntervalId_ASAP);var s=this.api().ajax.json(),o=JSON.stringify(s.extends_app);o=o.replace(/\//g,"\\/");var n=document.createElement("script");n.type="text/javascript",n.id="extends_app",n.text="app.ext("+o+");";var i=document.getElementById("extends_app");document.getElementById("extends_app").parentNode.replaceChild(n,i)}var r="";r=void 0===a.custom_color_rgb||null===a.custom_color_rgb?"":"#"+a.custom_color_rgb,$("td",e).parent().attr("data-rowindex",t).css("background-color",r),$("td",e).parent().attr("data-encrypted_case_id",a.encrypted_case_id);if("Chrome"==app.data.browser_detected)var d="file://192.168.1.3/manual/";else if("Firefox"==app.data.browser_detected)d="file://///192.168.1.3/manual/";else d="file://192.168.1.3/manual/";$.each(a,(function(t,l){if(t.indexOf("case_id")>=0&&$("td",e).eq(0).html('<a class="button keyboardshortcutcombinationtolinktosharedfolder" style="text-decoration: none; font-weight: 900;" data-backup_href="" data-alt_href="/manual_uploadfiles/" href="'+d+a.case_id+'/" target="_blank">'+a.case_id_display+"</a>").css("font-size","0.7vw"),t.indexOf("xml_title_contents")>=0&&$("td",e).eq(2).css("font-size","0.7vw"),t.indexOf("xml_jobid_title")>=0){if(""==a.xml_jobid_title)var s="";else s='<a class="button keyboardshortcutcombinationtolinktosharedfolder" style="text-decoration: none; font-weight: 900;" data-backup_href="" data-alt_href="/manual_uploadfiles/" href="'+d+a.case_id+'/" target="_blank">'+a.xml_jobid_title_display+"</a>";$("td",e).eq(1).html(s).css("font-size","0.7vw")}if(t.indexOf("internal_notes")>=0&&($("td",e).eq(9).css("cursor","pointer").css("text-align","left").css("vertical-align","top").css("word-break","break-word").addClass("change_internal_notes").addClass("internal_notes").css("font-size","0.8vw"),$("td",e).eq(9).attr("data-case_id",a.case_id).attr("data-date_ts",a.idx).addClass("parent").css("padding","").css("font-size","0.8vw")),t.indexOf("instructions_col")>=0){if($("td",e).eq(4).css("cursor","pointer").addClass("change_instructions_col").addClass("instructions_col"),$("td",e).eq(4).attr("data-case_id",a.case_id).attr("data-date_ts",a.idx).addClass("parent").css("padding",""),""==a.xml_jobinfoproduction)var o="";else o='<span style="font-size: 0.7vw;" class="instructions_popover" data-html="true" data-container="body" data-toggle="popover" data-placement="bottom" data-trigger="hover" data-content="'+a.xml_jobinfoproduction+'">'+a.instructions_col+"</span>";$("td",e).eq(4).html(o).css("font-size","0.9vw")}if(t.indexOf("preview_col")>=0&&($("td",e).eq(5).css("cursor","pointer").addClass("change_preview_col").addClass("preview_col"),$("td",e).eq(5).attr("data-case_id",a.case_id).attr("data-date_ts",a.idx).addClass("parent").css("padding","").css("font-size","0.7vw")),"number_of_pictures"==t){if(null==a.number_of_pictures_example)var n="&nbsp;&nbsp;&nbsp;&nbsp;";else n=a.number_of_pictures_example;if(null==a.number_of_pictures_new)var i="&nbsp;&nbsp;&nbsp;&nbsp;";else i=a.number_of_pictures_new;if(null==a.number_of_pictures_ready)var r="&nbsp;&nbsp;&nbsp;&nbsp;";else r=a.number_of_pictures_ready;var c="",_="",p="",u="",m="",f="";null==app.data.currently_downloading_aria2c[a.case_id]&&null==app.data.currently_downloading_aria2c[a.case_id]||$.each(app.data.currently_downloading_aria2c[a.case_id],(function(e,t){"example"==e&&(c='class="currently_downloading_indicator"',u='class="iecd_'+a.case_id+'"'),"new"==e&&(_='class="currently_downloading_indicator"',m='class="incd_'+a.case_id+'"'),"ready"==e&&(p='class="currently_downloading_indicator"',f='class="ircd_'+a.case_id+'"')}));var h=null,b=null,g=null,v=null,w=null,y=null;0==a.number_of_pictures_table_show?(g="display: none;",h="padding-bottom: 4px;",b="padding-top: 4px;"):(g="",h="",b=""),v=0==a.number_of_pictures_example_show?"display: none;":"",w=0==a.number_of_pictures_new_show?"display: none;":"",y=0==a.number_of_pictures_ready_show?"display: none;":"",$("td",e).eq(3).html('<div style="font-size: 0.7vw; width: 100%; position:relative; padding-top: 4px; padding-left: 4px; padding-right: 4px; '+h+'"><span '+c+' style="display:inline-block; width: 20%;">'+n+'</span><span style="font-size:14px; display:inline-block; width: 20%;">|</span><span '+_+' style="display:inline-block; width: 20%;">'+i+'</span><span style="font-size:14px; display:inline-block; width: 20%;">|</span><span '+p+' style="display:inline-block; width: 20%;">'+r+"</span></div>").append('<div style="'+g+" font-size: 0.6vw; width: 100%; position:relative; "+b+' padding-left: 4px; padding-right: 4px; padding-bottom: 4px;"><div style="'+v+'"><div style="text-align: left;"><u>emp</u></div><div><span '+u+'>........</span></div></div><div style="'+w+'"><div style="text-align: left;"><u>new</u></div><div><span '+m+'>........</span></div></div><div style="'+y+'"><div style="text-align: left;"><u>rdy</u></div><div><span '+f+">........</span></div></div></div>")}if(t.indexOf("output_files_col")>=0){if(null==a.output_number_of_pictures_expected)var x="&nbsp;&nbsp;&nbsp;&nbsp;";else x=a.output_number_of_pictures_expected;if(null==a.output_number_of_pictures_real)var k="&nbsp;&nbsp;&nbsp;&nbsp;";else k=a.output_number_of_pictures_real;$("td",e).eq(6).addClass("change_output_files_col").addClass("output_files_col"),$("td",e).eq(6).attr("data-case_id",a.case_id).attr("data-date_ts",a.idx).addClass("parent").css("padding",""),$("td",e).eq(6).html('<div class="manual_change_output_files_col"  style="width: 100%; position:relative; padding: 4px"><div class="output_number_of_pictures_expected" style="display:inline-block; width: 33.33%;">'+x+'</div><div style="display:inline-block; width: 33.33%;">|</div><div class="output_number_of_pictures_real" style="display:inline-block; width: 33.33%;">'+k+"</div></div>").css("font-size","0.7vw")}if(t.indexOf("rating")>=0){if(null==a.custom_job_star_rating_comment)var j="",C='<i name="edit_custom_star_rating_comment_'+a.idx+'" style="display: none; margin-left: 8px; font-size: 17px; cursor: pointer;" class="fa fa-edit"></i>';else j=a.custom_job_star_rating_comment,C='<i name="edit_custom_star_rating_comment_'+a.idx+'" style="margin-left: 8px; font-size: 17px; cursor: pointer;" class="fa fa-edit"></i>';$("td",e).eq(11).html('<div data-html="true" data-container="body" data-toggle="popover" data-placement="top" data-trigger="hover" data-content="'+j+'"><div name="edit_custom_star_rating_'+a.idx+'" class="rateit" data-rateit-value="'+a.rating+'" data-rateit-ispreset="true" data-rateit-readonly="false"></div>'+C+"</div>"),$("td",e).eq(11).addClass("change_rating").addClass("rating"),$("td",e).eq(11).attr("data-case_id",a.case_id).attr("data-date_ts",a.idx).addClass("parent").css("padding","").css("font-size","0.7vw")}if(t.indexOf("tags")>=0&&($("td",e).eq(12).css("cursor","pointer").addClass("change_tags").addClass("tags"),$("td",e).eq(12).attr("data-case_id",a.case_id).attr("data-date_ts",a.idx).addClass("parent").css("padding","")),t.indexOf("job_status")>=0&&($("td",e).eq(13).css("cursor","default").addClass("change_job_status").addClass("job_status"),$("td",e).eq(13).attr("data-case_id",a.case_id).attr("data-date_ts",a.idx).addClass("parent").css("padding","").css("font-size","0.8vw")),t.indexOf("assignees")>=0&&($("td",e).eq(8).css("cursor","pointer").addClass("change_assignees").addClass("assignees"),$("td",e).eq(8).attr("data-case_id",a.case_id).attr("data-date_ts",a.idx).addClass("parent").css("padding","")),t.indexOf("delivery_time")>=0&&($("td",e).eq(7).html('<span style="'+a.color_it+'">'+a.delivery_time+"</span>"),$("td",e).eq(7).css("cursor","pointer").addClass("change_delivery_time").addClass("delivery_time"),$("td",e).eq(7).attr("data-case_id",a.case_id).attr("data-date_ts",a.idx).addClass("parent").css("padding","")),t.indexOf("created_at")>=0&&($("td",e).eq(14).addClass("created_at"),$("td",e).eq(14).attr("data-case_id",a.case_id).attr("data-date_ts",a.idx).addClass("parent").css("padding","")),t.indexOf("last_updated_by")>=0){if(null==a.last_updated_by)var I="";else I=a.last_updated_by;$("td",e).eq(15).html('<span style="font-size: 8px;">'+I+"</span>"),$("td",e).eq(15).addClass("last_updated_by"),$("td",e).eq(15).attr("data-case_id",a.case_id).attr("data-date_ts",a.idx).addClass("parent").css("padding","")}t.indexOf("last_updated")>=0&&($("td",e).eq(16).addClass("last_updated"),$("td",e).eq(16).attr("data-case_id",a.case_id).attr("data-date_ts",a.idx).addClass("parent").css("padding",""))}));app.data.section.indexOf("accounting"),app.data.auth_user_permissions.indexOf("WRITE accounting");""==r?$("td",e).parent().css("color","#676A6C"):function(e){var a=e.replace("rgb(","").replace(")","").split(","),t=a[0],s=a[1],o=a[2];c=[t/255,s/255,o/255];for(var n=0;n<c.length;++n)c[n]<=.03928?c[n]=c[n]/12.92:c[n]=Math.pow((c[n]+.055)/1.055,2.4);return l=.2126*c[0]+.7152*c[1]+.0722*c[2],l}($("td",e).parent().css("background-color"))>.433?$("td",e).parent().css("color","#676A6C"):$("td",e).parent().css("color","#FFFFFF");var _=parseInt(a.created_at_timestamp),p=parseInt((new Date).getTime()/1e3)-_,u=$("td",e).closest("tr");p<=7200?$(u).css("border","2px solid #f8ac59").css("-moz-box-shadow","inset 0 0 20px #f8ac59").css("-webkit-box-shadow","inset 0 0 20px #f8ac59").css("box-shadow","inset 0 0 20px #f8ac59"):$(u).css("border","").css("-moz-box-shadow","").css("-webkit-box-shadow","").css("box-shadow","")},drawCallback:function(settings){var api=this.api(),json=api.ajax.json();$(document).ready((function(){var e=JSON.parse(sessionStorage.getItem("Br24_"+app.env()+"_edit_manualdownloadlist_scroll_position_data"));if(null!==e){if(""!==e.scroll){var a=e.scroll;$(document).scrollTop(a)}sessionStorage.removeItem("Br24_"+app.env()+"_edit_manualdownloadlist_scroll_position_data")}})),$("input[type=search]").focus(),$(".ms-has-selections")[0]?$('a[name="clearallfilters"]').css("display","block"):$('a[name="clearallfilters"]').css("display","none");var api=this.api(),refreshTimeout=null;function isEmpty(e){for(var a in e)if(e.hasOwnProperty(a))return!1;return!0}function pad(e,a){for(var t=""+e;t.length<a;)t="0"+t;return t}$('[data-toggle="popover"]').popover({placement:"auto bottom",trigger:"manual",html:!0,animation:!1}).on("mouseenter",(function(){var e,a=this;e=a,refreshTimeout=setInterval((function(){$(e).popover("show")}),300),$(this).siblings(".popover").on("mouseleave",(function(){$(a).popover("hide")}))})).on("mouseleave",(function(){clearInterval(refreshTimeout);var e=this,a=function(){setTimeout((function(){$(".popover:hover").length?a():$(e).popover("hide")}),50)};a()})),app.util.nprogressdone();var prefered_dateFormat=null,patt=null,prefered_dateFormat_placeholder=null,number_format_per_locale=null,delimiter_for_splitting_variable=null,numberformat_locale=null;"vi"===app.data.locale||"en"===app.data.locale?(prefered_dateFormat="dd/mm/yy",prefered_dateFormat_placeholder="dd/mm/yyyy",patt=new RegExp("^([0]?[1-9]|[1|2][0-9]|[3][0|1])[./-]([0]?[1-9]|[1][0-2])[./-]([0-9]{4}|[0-9]{2})$"),delimiter_for_splitting_variable="/"):"de"===app.data.locale&&(prefered_dateFormat="dd.mm.yy",prefered_dateFormat_placeholder="dd.mm.yyyy",patt=new RegExp("^([0]?[1-9]|[1|2][0-9]|[3][0|1])[./-]([0]?[1-9]|[1][0-2])[./-]([0-9]{4}|[0-9]{2})$"),delimiter_for_splitting_variable="."),"VND"==app.data.currency?(number_format_per_locale="#,##0.## ₫",numberformat_locale="vi"):"USD"==app.data.currency?(number_format_per_locale="$ #,##0.00",numberformat_locale="en"):"EUR"==app.data.currency?(number_format_per_locale="€ #,##0.00",numberformat_locale="de"):(number_format_per_locale="#,##0.## ₫",numberformat_locale="vi"),$(".currency_number_format").formatNumber({format:number_format_per_locale,locale:numberformat_locale}),$("div[class*='colorPicker']").tinycolorpicker();var new_value=null,new_value_id=null,success_ajax_then_refresh=null;$(".dataTable tbody").off("click","td.parent.change_internal_notes").on("click","td.parent.change_internal_notes",(function(e){if($("#editrecord_input").blur(),$(".is_br24_employee").selectize().blur(),1==$("#edit_from_amount_input_"+n).is(":visible"))return!1;keep_track_of_last_clicked_item_to_react_after_reload="change_from_amount";e.target;e.preventDefault();var a=$(this).closest("tr"),t=$(this),l=t.height();l+=20;var s=$(this).html(),o=(window.manualdownloadlisttable.row(a),$(this).html());o=o.replace(/(?:<br>)/g,"\r\n");a.data("rowindex");var n=$(this).data("case_id"),i=a.data("encrypted_case_id");keep_track_of_last_clicked_item_data_attribute_to_react_after_reload=n;$(this).data("date_ts");var r=$('<textarea id="edit_from_amount_input_'+n+'" cols="10" rows="5" charswidth="23"  style="white-space: pre-wrap; line-height: 15px; min-height: 30px; width: 100%; height: '+l+'px; display: block; z-index: 12; resize: vertical; color: black;"></textarea>');r.val(o),t.html(r),$(document).on("keydown","#edit_from_amount_input_"+n,(function(e){var a=$(this),l=a.val(),o=new RegExp(a.attr("pattern"),"g");setTimeout((function(){var e=a.val();o.test(e)||a.val(l)}),0),e.keyCode,27==e.keyCode&&t.html(s)})),$("#edit_from_amount_input_"+n).click((function(e){e.stopImmediatePropagation()})),$("#edit_from_amount_input_"+n).focus((function(){var e=$(this);window.setTimeout((function(){e.select()}),30)})),$("#edit_from_amount_input_"+n).focus(),$("#edit_from_amount_input_"+n).blur((function(){var e=$("#edit_from_amount_input_"+n).val();if(e=e.replace(/(?:\r\n|\r|\n)/g,"<br>"),s==e)t.html(s);else{$("#edit_from_amount_input_"+n).remove(),t.html(e),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var l={case_id:n,encrypted_case_id:i,new_custom_internal_note:e};app.ajax.json(app.data.change_custom_internal_note_for_job,l,null,(function(){success_ajax_then_refresh=app.ajax.result.success,1==app.ajax.result.success?(t.html(e),a.children().next(".last_updated_by").html('<span style="font-size: 8px;">'+app.ajax.result.last_updated_by_name+"</span>"),a.children().next(".last_updated").html(app.ajax.result.updated_at)):t.html(s)}))}}))})),$(".dataTable tbody").off("click","td.parent.change_tags").on("click","td.parent.change_tags",(function(e){if(1==$(".is_br24_hashtag").is(":visible"))return!1;keep_track_of_last_clicked_item_to_react_after_reload="change_tags";e.target;e.preventDefault();var a=$(this).closest("tr"),t=$(this),l=$(this).html(),s=l,o=(s.includes('<span class="highlight_span">'),s.split('<span class="highlight_span">'));if(null!=o[1]||null!=o[1])var n=o[1].split("</span>")[0];else n="";var i=l.replace("</span>","").replace('<span class="highlight_span">',""),r=(window.manualdownloadlisttable.row(a),$(this).text(),a.data("rowindex"),$(this).data("case_id")),d=a.data("encrypted_case_id");keep_track_of_last_clicked_item_data_attribute_to_react_after_reload=r;$(this).data("date_ts");var c=$('<select style="width: 100%; height: 46px;" class="is_br24_hashtag form-control" title="" multiple></select>');t.html(c);var _=app.data.selectize_hashtag_list_formated_json,p=app.data.selectize_selected_hashtags_formated_json.map((function(e){return e.name}));""!=i&&(p=i.split(" "),Object.assign({},[p]));var u=null;window.Selectize.prototype.positionDropdownOriginal||(window.Selectize.prototype.positionDropdownOriginal=window.Selectize.prototype.positionDropdown,window.Selectize.prototype.positionDropdown=function(){if("up"===this.settings.dropdownDirection){let o=this.$control,n="body"===this.settings.dropdownParent?o.offset():o.position();var e=o.parent().parent(),a=e.offset(),t=!1;if(parseInt(a.top)-parseInt($(window).scrollTop())<=500)t=!0;var l=261;if(t){var s=e.height()-12;l=-parseInt(s)}this.$dropdown.css({width:o.outerWidth(),top:n.top-l,left:n.left}),this.$dropdown.addClass("direction-"+this.settings.dropdownDirection),this.$control.addClass("direction-"+this.settings.dropdownDirection),this.$wrapper.addClass("direction-"+this.settings.dropdownDirection)}else window.Selectize.prototype.positionDropdownOriginal.apply(this,arguments)});var m=$(".is_br24_hashtag").selectize({plugins:["remove_button","optgroup_columns"],persist:!0,maxItems:200,mode:"multi",dropdownDirection:"up",create:function(e){return{name:"#"+e.replace("#","").toUpperCase()}},placeholder:"-- Add Tag --",valueField:["name"],labelField:"name",searchField:["name"],options:_,items:p,hideSelected:!1,openOnFocus:!0,closeAfterSelect:!0,render:{item:function(e,a){return"<div>"+(e.name?'<span class="name"><u><b>'+e.name+"</b></u></span>":"")+"</div>"},option:function(e,a){e.xml_title_contents||e.email,e.xml_title_contents&&e.email;return'<div style="margin: 10px; border: 1px solid #000; padding: 10px;"><span class="label label-primary">'+e.name+'</span><span style="color: #ccc">&nbsp;</span></div>'}},onChange:function(e){var t=(u=$(".is_br24_hashtag").val()).map((function(e){return e.replace(/#/g,"")}));$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var l={case_id:r,encrypted_case_id:d,hashtag:t};app.ajax.json(app.data.change_tags_for_job,l,null,(function(){success_ajax_then_refresh=app.ajax.result.success,1==app.ajax.result.success&&(app.data.selectize_hashtag_list_formated_json=app.ajax.result.selectize_hashtag_list_formated_json,a.children().next(".last_updated_by").html('<span style="font-size: 8px;">'+app.ajax.result.last_updated_by_name+"</span>"),a.children().next(".last_updated").html(app.ajax.result.updated_at))}))}}),f=m[0].selectize;f.settings;f.on("focus",(function(e,a){var t=$(".selectize-control").outerWidth();$(".selectize-dropdown-content").css("width",t).css("height",300)}));f.on("blur",(function(e,a){var l="";if(void 0===(u=$(".is_br24_hashtag").val())||0==u.length)t.html("");else{if($.each(u,(function(e,a){l=""==l?a:l+" "+a})),""!=n){var s=l.split(n),o="";$.each(s,(function(e,a){o=e==s.length-1?o.concat(a):o.concat(a).concat('<span class="highlight_span">'+n+"</span>")}))}else o=l;t.html(o)}}));f.on("item_remove",(function(e,a){u=$(".is_br24_hashtag").val()})),f.$control_input.on("keydown",(function(e){var a=e.charCode?e.charCode:e.keyCode?e.keyCode:e.which?e.which:0;return!(a>31&&(a<64||a>90)&&(a<97||a>122)&&(a<48||a>57)&&-1==[8,13,44,45,46,95].indexOf(a))})),$(window).resize((function(){var e=$(".selectize-control").outerWidth();$(".selectize-dropdown-content").css("width",e).css("height",300)})),f.focus()})),$(".dataTable tbody").off("click",".output_number_of_pictures_expected").on("click",".output_number_of_pictures_expected",(function(e){if($("#editrecord_input").blur(),$(".is_br24_employee").selectize().blur(),1==$("#edit_from_amount_input_"+n).is(":visible"))return!1;keep_track_of_last_clicked_item_to_react_after_reload="change_from_amount";e.target;e.preventDefault();var a=$(this).closest("tr"),t=$(this);$(this).parent().children(".output_number_of_pictures_real").css("visibility","hidden");t.parent().height();var l=t.parent().width(),s=$(this).html(),o=(window.manualdownloadlisttable.row(a),$(this).html());o=o.replace(/(?:<br>)/g,"\r\n");a.data("rowindex");var n=$(this).parent().parent().data("case_id"),i=a.data("encrypted_case_id");keep_track_of_last_clicked_item_data_attribute_to_react_after_reload=n;$(this).data("date_ts");var r=$('<input id="edit_from_amount_input_'+n+'" type="number" style="text-align:left; width: '+l+'px; display: block; color: #000; margin: 0 auto; z-index: 12;" min="0" max="999" step="1" pattern="^\\d{1,10}?$"></input>');r.val(o),t.html(r),$(document).on("keydown","#edit_from_amount_input_"+n,(function(e){var a=$(this),l=a.val(),o=new RegExp(a.attr("pattern"),"g");setTimeout((function(){var e=a.val();o.test(e)||a.val(l)}),0),e.keyCode,27==e.keyCode&&t.html(s)})),$("#edit_from_amount_input_"+n).click((function(e){e.stopImmediatePropagation()})),$("#edit_from_amount_input_"+n).focus((function(){var e=$(this);window.setTimeout((function(){e.select()}),30)})),$("#edit_from_amount_input_"+n).focus(),$("#edit_from_amount_input_"+n).blur((function(){var e=$("#edit_from_amount_input_"+n).val();if(e=e.replace(/(?:\r\n|\r|\n)/g,"<br>"),s==e)t.html(s),t.parent().children(".output_number_of_pictures_real").css("visibility","visible");else{$("#edit_from_amount_input_"+n).remove(),t.html(e),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var l={case_id:n,encrypted_case_id:i,new_custom_output_expected:e};app.ajax.json(app.data.change_custom_output_expected_for_job,l,null,(function(){success_ajax_then_refresh=app.ajax.result.success,1==app.ajax.result.success?(t.html(e),t.parent().children(".output_number_of_pictures_real").css("visibility","visible"),a.children().next(".last_updated_by").html('<span style="font-size: 8px;">'+app.ajax.result.last_updated_by_name+"</span>"),a.children().next(".last_updated").html(app.ajax.result.updated_at)):(t.html(s),t.parent().children(".output_number_of_pictures_real").css("visibility","visible"))}))}}))})),$("input[name*='edit_']").on("click",(function(e){e.stopPropagation();var a=$(this).closest("tr"),t=a.find(".change_assignees").html(),l=a.data("encrypted_case_id");case_Id=$(this).parent().data("case_id"),date_ts_Id=$(this).parent().data("date_ts");var s=null,o=$("input[name='edit_"+case_Id+"']");o.is(":checked")?(o.prop("checked",!0),s=1):(o.prop("checked",!1),s=2),app_ops.manage_manualdownloadlist.profile.sync_preview_required_status(case_Id,l,s,a,o,t)})),$(".two_weeks_checkbox_col.parent").not("input[name*='edit_']").on("click",(function(e){e.stopPropagation();var a=$(this).closest("tr"),t=a.find(".change_assignees").html(),l=a.data("encrypted_case_id");case_Id=$(this).data("case_id"),date_ts_Id=$(this).data("date_ts");var s=null,o=$("input[name='edit_"+case_Id+"']");o.is(":checked")?(o.prop("checked",!1),s=2):(o.prop("checked",!0),s=1),app_ops.manage_manualdownloadlist.profile.sync_preview_required_status(case_Id,l,s,a,o,t)})),$('input[type="checkbox"], .two_weeks_checkbox_col').css("cursor","pointer"),$(document).ready((function(){var currentColorBox="",window_focus=!0;$(window).focus((function(){window_focus=!0})).blur((function(){window_focus=!1}));var checks_if_avatar_colorbox_is_open=null,success_ajax_then_refresh=null,been_out=null,refreshIntervalId=null,timer=function(){refreshIntervalId=setInterval((function(){}),100)},close_colorbox_refreshIntervalId=null,close_colorbox_timer=function(){close_colorbox_refreshIntervalId=setInterval((function(){$("#cb_add_manualdownloadlist.ajax").colorbox.close(),$("#cb_edit_manualdownloadlist.ajax").colorbox.close(),clearInterval(close_colorbox_refreshIntervalId)}),100)};function formatBytes(e,a){if(0==e)return"0 Bytes";var t=a||2,l=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,l)).toFixed(t))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][l]}var autoCloserefreshIntervalId=null,autoClosetimer=function(){var e=10;autoCloserefreshIntervalId=setInterval((function(){0==(e-=1)?($(".jconfirm-buttons").children().closest(".btn-primary").text("OK"),$(".jconfirm-buttons").children().closest(".btn-primary").trigger("click"),clearInterval(autoCloserefreshIntervalId),e=0):$(".jconfirm-buttons").children().closest(".btn-primary").text("OK ("+e+")")}),1e3)},cboxOptions={width:"600px",height:"400px"};$(window).resize((function(){["cb_add_manualdownloadlist","cb_edit_manualdownloadlist"].indexOf(currentColorBox)>-1&&$.colorbox.resize({width:window.innerWidth>parseInt(cboxOptions.maxWidth)?cboxOptions.maxWidth:cboxOptions.width,height:window.innerHeight>parseInt(cboxOptions.maxHeight)?cboxOptions.maxHeight:cboxOptions.height})})),$("#cb_add_manualdownloadlist.ajax").colorbox({rel:"nofollow",width:"600px",height:"400px",left:"9%",top:"200px",escKey:!0,overlayClose:!1,closeButton:!1,onOpen:function(){currentColorBox="cb_add_manualdownloadlist"},onLoad:function(){},onComplete:function(){$("#advance_amount").focus((function(){$(this).parseNumber({format:number_format_per_locale,locale:numberformat_locale}),$(this).select()})),$("#advance_amount").blur((function(){$(this).formatNumber({format:number_format_per_locale,locale:numberformat_locale})}));var counting_ssd=1,$calendar_date=$(".calendar_date");$calendar_date.datepicker({dateFormat:prefered_dateFormat,showMonthAfterYear:!0,numberOfMonths:1,changeMonth:!0,changeYear:!0,yearRange:"-10:+1",showOtherMonths:!0,selectOtherMonths:!0,toggleActive:!0,minDate:"-10y",maxDate:"+1y",autoclose:!0,onClose:function(){var addressinput=$(this).val(),res=patt.test(addressinput);1==res?($("#calendar_date").closest("td").removeClass("has-error"),$("#calendar_date").nextAll(".help-block").css("display","none"),$(this).blur(),counting_ssd=1):($("#calendar_date").closest("td").addClass("has-error"),1==counting_ssd&&$("#calendar_date").after('<span class="help-block"><strong>'+eval("app.translations."+app.data.locale+".you_need_to_enter_a_valid_date_in_the_format")+" "+prefered_dateFormat_placeholder+" "+eval("app.translations."+app.data.locale+".or_choose_from_the_calendar")+"</strong></span>"),counting_ssd++,$(this).blur())},beforeShow:function(e,a){$calendar_date.after($calendar_date.datepicker("widget")),setTimeout((function(){$("#ui-datepicker-div").css("top","").css("left","")}),0)}}),$calendar_date.datepicker().datepicker("setDate",new Date);var select_list_employee_list=app.data.selectize_employee_list_formated_json,select_selected_employee_json=app.data.selectize_selected_employee_formated_json;select_selected_list_employee_to_receive_messages=select_selected_employee_json.map((function(e){return e.fk_is_br24_employee}));var $recipients_select=$("#recipients").selectize({plugins:["remove_button","optgroup_columns"],persist:!1,maxItems:1,mode:"multi",placeholder:"-- "+eval("app.translations."+app.data.locale+".select_employee")+" --",valueField:"user_id",labelField:"user_id",searchField:["user_id","fullname","fullname_noaccents"],options:select_list_employee_list,items:select_selected_list_employee_to_receive_messages,hideSelected:!0,openOnFocus:!0,closeAfterSelect:!0,render:{item:function(e,a){return"<div>"+(e.user_id?'<span class="user_id"><b>'+e.user_id+"</b></span>":"")+'<span style="color: #ccc">&nbsp;</span>'+(e.fullname?'<span class="fullname" style="font-size: 10px;">'+e.fullname+"</span>":"")+"<br>"+(e.position?'<span class="position" style="font-size: 9px;">'+e.position+"</span>":"")+"</div>"},option:function(e,a){e.fullname||e.email,e.fullname&&e.email;return'<div style="margin: 10px; border: 1px solid #000; padding: 10px;"><span class="label label-primary">'+e.user_id+'</span><span style="color: #ccc">&nbsp;</span>'+(e.fullname?'<span class="fullname" style="font-size: 10px;">'+e.fullname+"</span>":"")+"<br>"+(e.position?'<span class="position" style="font-size: 9px; color: #ccc;">'+e.position+"</span>":"")+(e.email?' - <span class="email" style="font-size: 9px; color: #ccc;">'+e.email+"</span>":"")+"</div>"}},onChange:function(e){void 0===e||e.length,$("#cb_add_manualdownloadlist_details_form").addClass("dirty")}}),recipients_select_selectize=$recipients_select[0].selectize,recipients_select_old_options=recipients_select_selectize.settings,selectize_focus_handler=function(e,a){var t=$(".selectize-control").outerWidth();$(".selectize-dropdown-content").css("width",t)};recipients_select_selectize.on("focus",selectize_focus_handler);var item_remove_handler=function(e,a){$("#cb_add_manualdownloadlist_details_form").addClass("dirty")};recipients_select_selectize.on("item_remove",item_remove_handler),$(window).resize((function(){var e=$(".selectize-control").outerWidth();$(".selectize-dropdown-content").css("width",e)}));var calendar_date=$("#calendar_date").val(),recipients=$("#recipients").val(),advance_amount=$("#advance_amount").val(),reason=$("reason").val(),payment_period_description=$("payment_period_description").val(),currentdate=new Date,datetime="Last Sync: "+currentdate.getDate()+"/"+(currentdate.getMonth()+1)+"/"+currentdate.getFullYear()+" @ "+currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds(),add_manualdownloadlist_previous_data=[];add_manualdownloadlist_previous_data.add_manualdownloadlist_previous_data={whenwasset:datetime,add_manualdownloadlist_calendar_date:calendar_date,add_manualdownloadlist_recipients:recipients,add_manualdownloadlist_advance_amount:advance_amount,add_manualdownloadlist_reason:reason,add_manualdownloadlist_payment_period_description:payment_period_description},sessionStorage.setItem("Br24_"+app.env()+"_add_manualdownloadlistinfo_previous_data",JSON.stringify(add_manualdownloadlist_previous_data.add_manualdownloadlist_previous_data)),$("#cb_add_manualdownloadlist_details_form").areYouSure(),$("#cb_add_manualdownloadlist_details_form").on("change","select",(function(){$("#add_manualdownloadlist_reset").prop("disabled",!1).css("display","inline-block"),$("#add_manualdownloadlist_update").prop("disabled",!1).css("display","inline-block")})),$("#cb_add_manualdownloadlist_details_form").on("change keypress","input",(function(){$("#add_manualdownloadlist_reset").prop("disabled",!1).css("display","inline-block"),$("#add_manualdownloadlist_update").prop("disabled",!1).css("display","inline-block")})),$("#cb_add_manualdownloadlist_details_form").on("change keypress","textarea",(function(){$("#add_manualdownloadlist_reset").prop("disabled",!1).css("display","inline-block"),$("#add_manualdownloadlist_update").prop("disabled",!1).css("display","inline-block")})),$("#add_manualdownloadlist_reset").click((function(){$("#add_manualdownloadlist_reset, #add_manualdownloadlist_update").prop("disabled",!0).css("display","none");var e=JSON.parse(sessionStorage.getItem("Br24_"+app.env()+"_add_manualdownloadlistinfo_previous_data"));$("#calendar_date").val(e.add_manualdownloadlist_calendar_date),$("#advance_amount").val(e.add_manualdownloadlist_advance_amount),$("#reason").val(e.add_manualdownloadlist_reason),$("#payment_period_description").val(e.add_manualdownloadlist_payment_period_description),recipients_select_selectize.setValue(e.add_manualdownloadlist_recipients,!1),$(".has-error").removeClass("has-error"),$(".help-block").css("display","none"),$("#cb_add_manualdownloadlist_details_form").trigger("reinitialize.areYouSure")})),$("#add_manualdownloadlist_update").click((function(e){e.preventDefault(),$(".alert_warning").css("display","none"),$(".alert_success").css("display","none");var a=$("#calendar_date").val(),t=$("#recipients").val(),l=$("#advance_amount").val(),s=$("reason").val(),o=$("payment_period_description").val(),n=new Date,i="Last Sync: "+n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear()+" @ "+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds(),r=[];r.add_manualdownloadlist_submitted_data={whenwasset:i,add_manualdownloadlist_calendar_date:a,add_manualdownloadlist_recipients:t,add_manualdownloadlist_advance_amount:l,add_manualdownloadlist_reason:s,add_manualdownloadlist_payment_period_description:o},sessionStorage.setItem("Br24_"+app.env()+"_add_manualdownloadlistinfo_submitted_data",JSON.stringify(r.add_manualdownloadlist_submitted_data)),$("#advance_amount").parseNumber({format:number_format_per_locale,locale:numberformat_locale});var d=new FormData($("#cb_add_manualdownloadlist_details_form")[0]);d.append("recipients",t),NProgress.configure({parent:"#cboxTitle",showSpinner:!1,easing:"ease",speed:880,trickleSpeed:333,trickle:!0}),NProgress.start(),$(".cb_loader").css("display","block").css("cursor","wait"),$("#cb_top").addClass("nprogress-busy").css("pointer-events","none"),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$("#add_manualdownloadlist_details_table").data("token")}}),app.ajax.formdata(app.data.manage_add_manualdownloadlist,d,null,(function(){if(console.log(app.ajax.resultformdata),success_ajax_then_refresh=app.ajax.resultformdata.success,NProgress.done(),$(".cb_loader").css("display","none").css("cursor","auto"),$("#cb_top").removeClass("nprogress-busy").css("pointer-events","auto"),1==app.ajax.resultformdata.success)$("#cboxLoadedContent").css("background-color","#4CAF50"),$(".onSuccess_makeGreen").css("background-color","#4CAF50"),$(".ibox-tool-userid").css("color","white"),$("#cb_add_manualdownloadlist_details_form").css("display","none"),close_colorbox_timer(),$(document.body).css("pointer-events","none"),app.util.fullscreenloading_start(),1==app.ajax.resultformdata.process_penalties_accept_reject_table_sync&&app_ops.ajaxexample2tb2.profile.sync_penalties_acceptance_rejection_table();else{if($("#advance_amount").formatNumber({format:number_format_per_locale,locale:numberformat_locale}),$(".has-error").removeClass("has-error"),$(".help-block").detach(),$.each(app.ajax.resultformdata.errors,(function(e,a){app_ops.manage_manualdownloadlist.profile.foreach_handle_error_display(e,a)})),isEmpty(app.ajax.resultformdata.errors));else{var e=$(".has-error:visible:first").offset().top-$(".has-error:visible:first").offsetParent().offset().top,a=$("#cboxLoadedContent").scrollTop()-Math.abs(e)-80;$("#cboxLoadedContent").animate({scrollTop:a},1e3)}var t=$(".has-error").length>0;1!=t&&0!=t||($("#calendar_date").on("change keypress",(function(){$(this).parent(".form-group").removeClass("has-error"),$(this).next(".help-block").css("display","none"),console.log("something changed in #calendar_date")})),$("#recipients").on("change keypress",(function(){$(this).parent(".form-group").removeClass("has-error"),$(this).next(".help-block").css("display","none"),console.log("something changed in #recipients")})),$("#advance_amount").on("change keypress",(function(){$(this).parent(".form-group").removeClass("has-error"),$(this).nextAll(".help-block").css("display","none"),console.log("something changed in #advance_amount")})),$("#reason").on("change keypress",(function(){$(this).parent(".form-group").removeClass("has-error"),$(this).next(".help-block").css("display","none"),console.log("something changed in #reason")})),$("#payment_period_description").on("change keypress",(function(){$(this).parent(".form-group").removeClass("has-error"),$(this).next(".help-block").css("display","none"),console.log("something changed in #payment_period_description")})))}}))})),$("#cb_add_manualdownloadlist_details_form").on("keyup keypress",(function(e){if(13===(e.keyCode||e.which))return e.preventDefault(),!1})),$("#cboxOverlay").off("click").on("click",(function(event){var identifychanges=$("#cb_add_manualdownloadlist_details_form").hasClass("dirty");1==identifychanges?$.confirm({title:eval("app.translations."+app.data.locale+".title_text"),content:eval("app.translations."+app.data.locale+".you_have_unsaved_changes")+"\n"+eval("app.translations."+app.data.locale+".do_you_want_to_discard_those_changes")+"\n",type:"red",draggable:!1,backgroundDismiss:"cancel",escapeKey:!0,animateFromElement:!1,onAction:function(e){$(".jconfirm.jconfirm-light.jconfirm-open").remove()},buttons:{ok:{btnClass:"btn-primary text-white",keys:["enter"],text:eval("app.translations."+app.data.locale+".okay_text"),action:function(){event.stopPropagation(),$("#cb_add_manualdownloadlist.ajax").colorbox.close(),$("#cb_add_manualdownloadlist_details_form").trigger("reinitialize.areYouSure")}},cancel:{text:eval("app.translations."+app.data.locale+".cancel_text"),action:function(){return!1}}}}):($("#cb_add_manualdownloadlist.ajax").colorbox.close(),$("#cb_add_manualdownloadlist_details_form").trigger("reinitialize.areYouSure"))}))},onCleanup:function(){app.data.selectize_employee_list_formated_json="",app.data.selectize_selected_employee_formated_json="",1==success_ajax_then_refresh&&app.util.fullscreenloading_start()},onClosed:function(){currentColorBox="",$(".modal-backdrop").remove(),$("body").css("cursor","default"),1==success_ajax_then_refresh&&(window.manualdownloadlisttable.ajax.reload(null,!1),app.util.fullscreenloading_end(),window.manualdownloadlisttable.fixedHeader.adjust()),NProgress.configure({parent:"#progress-bar-parent",showSpinner:!1,easing:"ease",speed:880,trickleSpeed:333,trickle:!0}),clearInterval(refreshIntervalId),clearInterval(close_colorbox_refreshIntervalId),sessionStorage.removeItem("Br24_"+app.env()+"_add_manualdownloadlistinfo_previous_data"),sessionStorage.removeItem("Br24_"+app.env()+"_add_manualdownloadlistinfo_submitted_data")}}),$("#cb_edit_manualdownloadlist.ajax").colorbox({rel:"nofollow",width:"600px",height:"400px",left:"60%",top:"200px",escKey:!0,overlayClose:!1,closeButton:!1,onOpen:function(){currentColorBox="cb_edit_manualdownloadlist"},onLoad:function(){},onComplete:function(){$("#advance_amount").focus((function(){$(this).parseNumber({format:number_format_per_locale,locale:numberformat_locale}),$(this).select()})),$("#advance_amount").blur((function(){$(this).formatNumber({format:number_format_per_locale,locale:numberformat_locale})})),$("#advance_amount").formatNumber({format:number_format_per_locale,locale:numberformat_locale});var counting_ssd=1,$calendar_date=$(".calendar_date");$calendar_date.datepicker({dateFormat:prefered_dateFormat,showMonthAfterYear:!0,numberOfMonths:1,changeMonth:!0,changeYear:!0,yearRange:"-10:+1",showOtherMonths:!0,selectOtherMonths:!0,toggleActive:!0,minDate:"-10y",maxDate:"+1y",autoclose:!0,onClose:function(){var addressinput=$(this).val(),res=patt.test(addressinput);1==res?($("#calendar_date").closest("td").removeClass("has-error"),$("#calendar_date").nextAll(".help-block").css("display","none"),$(this).blur(),counting_ssd=1):($("#calendar_date").closest("td").addClass("has-error"),1==counting_ssd&&$("#calendar_date").after('<span class="help-block"><strong>'+eval("app.translations."+app.data.locale+".you_need_to_enter_a_valid_date_in_the_format")+" "+prefered_dateFormat_placeholder+" "+eval("app.translations."+app.data.locale+".or_choose_from_the_calendar")+"</strong></span>"),counting_ssd++,$(this).blur())},beforeShow:function(e,a){$calendar_date.after($calendar_date.datepicker("widget")),setTimeout((function(){$("#ui-datepicker-div").css("top","").css("left","")}),0)}});var select_list_employee_list=app.data.selectize_employee_list_formated_json,select_selected_employee_json=app.data.selectize_selected_employee_formated_json;select_selected_list_employee_to_receive_messages=select_selected_employee_json.map((function(e){return e.user_id}));var $recipients_select=$("#recipients").selectize({plugins:["remove_button","optgroup_columns"],persist:!1,maxItems:200,mode:"multi",placeholder:"-- "+eval("app.translations."+app.data.locale+".select_employee")+" --",valueField:"user_id",labelField:"user_id",searchField:["user_id","fullname","fullname_noaccents"],options:select_list_employee_list,items:select_selected_list_employee_to_receive_messages,hideSelected:!0,openOnFocus:!0,closeAfterSelect:!0,render:{item:function(e,a){return"<div>"+(e.user_id?'<span class="user_id"><b>'+e.user_id+"</b></span>":"")+'<span style="color: #ccc">&nbsp;</span>'+(e.fullname?'<span class="fullname" style="font-size: 10px;">'+e.fullname+"</span>":"")+"<br>"+(e.position?'<span class="position" style="font-size: 9px;">'+e.position+"</span>":"")+"</div>"},option:function(e,a){e.fullname||e.email,e.fullname&&e.email;return'<div style="margin: 10px; border: 1px solid #000; padding: 10px;"><span class="label label-primary">'+e.user_id+'</span><span style="color: #ccc">&nbsp;</span>'+(e.fullname?'<span class="fullname" style="font-size: 10px;">'+e.fullname+"</span>":"")+"<br>"+(e.position?'<span class="position" style="font-size: 9px; color: #ccc;">'+e.position+"</span>":"")+(e.email?' - <span class="email" style="font-size: 9px; color: #ccc;">'+e.email+"</span>":"")+"</div>"}},onChange:function(e){void 0===e||e.length,$("#cb_edit_manualdownloadlist_details_form").addClass("dirty")}}),recipients_select_selectize=$recipients_select[0].selectize,recipients_select_old_options=recipients_select_selectize.settings,selectize_focus_handler=function(e,a){var t=$(".selectize-control").outerWidth();$(".selectize-dropdown-content").css("width",t)};recipients_select_selectize.on("focus",selectize_focus_handler);var item_remove_handler=function(e,a){$("#cb_edit_manualdownloadlist_details_form").addClass("dirty")};recipients_select_selectize.on("item_remove",item_remove_handler),$(window).resize((function(){var e=$(".selectize-control").outerWidth();$(".selectize-dropdown-content").css("width",e)}));var calendar_date=$("#calendar_date").val(),recipients=$("#recipients").val(),advance_amount=$("#advance_amount").val(),reason=$("#reason").val(),payment_period_description=$("#payment_period_description").val(),currentdate=new Date,datetime="Last Sync: "+currentdate.getDate()+"/"+(currentdate.getMonth()+1)+"/"+currentdate.getFullYear()+" @ "+currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds(),edit_manualdownloadlist_previous_data=[];edit_manualdownloadlist_previous_data.edit_manualdownloadlist_previous_data={whenwasset:datetime,edit_manualdownloadlist_calendar_date:calendar_date,edit_manualdownloadlist_recipients:recipients,edit_manualdownloadlist_advance_amount:advance_amount,edit_manualdownloadlist_reason:reason,edit_manualdownloadlist_payment_period_description:payment_period_description},sessionStorage.setItem("Br24_"+app.env()+"_edit_manualdownloadlistinfo_previous_data",JSON.stringify(edit_manualdownloadlist_previous_data.edit_manualdownloadlist_previous_data)),$("#cb_edit_manualdownloadlist_details_form").areYouSure(),$("#cb_edit_manualdownloadlist_details_form").on("change","select",(function(){$("#edit_manualdownloadlist_reset").prop("disabled",!1).css("display","inline-block"),$("#edit_manualdownloadlist_update").prop("disabled",!1).css("display","inline-block")})),$("#cb_edit_manualdownloadlist_details_form").on("change keypress","input",(function(){$("#edit_manualdownloadlist_reset").prop("disabled",!1).css("display","inline-block"),$("#edit_manualdownloadlist_update").prop("disabled",!1).css("display","inline-block")})),$("#cb_edit_manualdownloadlist_details_form").on("change keypress","textarea",(function(){$("#edit_manualdownloadlist_reset").prop("disabled",!1).css("display","inline-block"),$("#edit_manualdownloadlist_update").prop("disabled",!1).css("display","inline-block")})),$("#edit_manualdownloadlist_reset").click((function(){$("#edit_manualdownloadlist_reset, #edit_manualdownloadlist_update").prop("disabled",!0).css("display","none");var e=JSON.parse(sessionStorage.getItem("Br24_"+app.env()+"_edit_manualdownloadlistinfo_previous_data"));$("#calendar_date").val(e.edit_manualdownloadlist_calendar_date),$("#advance_amount").val(e.edit_manualdownloadlist_advance_amount),$("#reason").val(e.edit_manualdownloadlist_reason),$("#payment_period_description").val(e.edit_manualdownloadlist_payment_period_description),recipients_select_selectize.setValue(e.edit_manualdownloadlist_recipients,!1),$(".has-error").removeClass("has-error"),$(".help-block").css("display","none"),$("#cb_edit_manualdownloadlist_details_form").trigger("reinitialize.areYouSure")})),$("#edit_manualdownloadlist_update").click((function(e){e.preventDefault(),$(".alert_warning").css("display","none"),$(".alert_success").css("display","none");var a=$("#calendar_date").val(),t=$("#recipients").val(),l=$("#advance_amount").val(),s=$("#reason").val(),o=$("#payment_period_description").val(),n=new Date,i="Last Sync: "+n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear()+" @ "+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds(),r=[];r.edit_custom_rc_message_schedule_submitted_data={whenwasset:i,edit_manualdownloadlist_calendar_date:a,edit_manualdownloadlist_recipients:t,edit_manualdownloadlist_advance_amount:l,edit_manualdownloadlist_reason:s,edit_manualdownloadlist_payment_period_description:o},sessionStorage.setItem("Br24_"+app.env()+"_edit_manualdownloadlistinfo_submitted_data",JSON.stringify(r.edit_custom_rc_message_schedule_submitted_data)),$("#advance_amount").parseNumber({format:number_format_per_locale,locale:numberformat_locale});var d=new FormData($("#cb_edit_manualdownloadlist_details_form")[0]);d.append("recipients",t),NProgress.configure({parent:"#cboxTitle",showSpinner:!1,easing:"ease",speed:880,trickleSpeed:333,trickle:!0}),NProgress.start(),$(".cb_loader").css("display","block").css("cursor","wait"),$("#cb_top").addClass("nprogress-busy").css("pointer-events","none"),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$("#edit_manualdownloadlist_details_table").data("token")}}),app.ajax.formdata(app.data.manage_edit_manualdownloadlist,d,null,(function(){if(success_ajax_then_refresh=app.ajax.resultformdata.success,NProgress.done(),$(".cb_loader").css("display","none").css("cursor","auto"),$("#cb_top").removeClass("nprogress-busy").css("pointer-events","auto"),1==app.ajax.resultformdata.success)$("#cboxLoadedContent").css("background-color","#4CAF50"),$(".onSuccess_makeGreen").css("background-color","#4CAF50"),$(".ibox-tool-userid").css("color","white"),$("#cb_edit_manualdownloadlist_details_form").css("display","none"),close_colorbox_timer(),$(document.body).css("pointer-events","none"),app.util.fullscreenloading_start(),1==app.ajax.resultformdata.process_penalties_accept_reject_table_sync&&app_ops.ajaxexample2tb2.profile.sync_penalties_acceptance_rejection_table();else{if($("#advance_amount").formatNumber({format:number_format_per_locale,locale:numberformat_locale}),$(".has-error").removeClass("has-error"),$(".help-block").detach(),$.each(app.ajax.resultformdata.errors,(function(e,a){app_ops.manage_manualdownloadlist.profile.foreach_handle_error_display(e,a)})),isEmpty(app.ajax.resultformdata.errors));else{var e=$(".has-error:visible:first").offset().top-$(".has-error:visible:first").offsetParent().offset().top,a=$("#cboxLoadedContent").scrollTop()-Math.abs(e)-80;$("#cboxLoadedContent").animate({scrollTop:a},1e3)}var t=$(".has-error").length>0;1!=t&&0!=t||($("#calendar_date").on("change keypress",(function(){$(this).parent(".form-group").removeClass("has-error"),$(this).next(".help-block").css("display","none"),console.log("something changed in #calendar_date")})),$("#recipients").on("change keypress",(function(){$(this).parent(".form-group").removeClass("has-error"),$(this).next(".help-block").css("display","none"),console.log("something changed in #recipients")})),$("#advance_amount").on("change keypress",(function(){$(this).parent(".form-group").removeClass("has-error"),$(this).nextAll(".help-block").css("display","none"),console.log("something changed in #advance_amount")})),$("#reason").on("change keypress",(function(){$(this).parent(".form-group").removeClass("has-error"),$(this).next(".help-block").css("display","none"),console.log("something changed in #reason")})),$("#payment_period_description").on("change keypress",(function(){$(this).parent(".form-group").removeClass("has-error"),$(this).next(".help-block").css("display","none"),console.log("something changed in #payment_period_description")})))}}))})),$("#cb_edit_manualdownloadlist_details_form").on("keyup keypress",(function(e){if(13===(e.keyCode||e.which))return e.preventDefault(),!1})),$("#cboxOverlay").off("click").on("click",(function(event){var identifychanges=$("#cb_edit_manualdownloadlist_details_form").hasClass("dirty");1==identifychanges?$.confirm({title:eval("app.translations."+app.data.locale+".title_text"),content:eval("app.translations."+app.data.locale+".you_have_unsaved_changes")+"\n"+eval("app.translations."+app.data.locale+".do_you_want_to_discard_those_changes")+"\n",type:"red",draggable:!1,backgroundDismiss:"cancel",escapeKey:!0,animateFromElement:!1,onAction:function(e){$(".jconfirm.jconfirm-light.jconfirm-open").remove()},buttons:{ok:{btnClass:"btn-primary text-white",keys:["enter"],text:eval("app.translations."+app.data.locale+".okay_text"),action:function(){event.stopPropagation(),$("#cb_edit_manualdownloadlist.ajax").colorbox.close(),$("#cb_edit_manualdownloadlist_details_form").trigger("reinitialize.areYouSure")}},cancel:{text:eval("app.translations."+app.data.locale+".cancel_text"),action:function(){return!1}}}}):($("#cb_edit_manualdownloadlist.ajax").colorbox.close(),$("#cb_edit_manualdownloadlist_details_form").trigger("reinitialize.areYouSure"))}))},onCleanup:function(){1==success_ajax_then_refresh&&app.util.fullscreenloading_start()},onClosed:function(){if(currentColorBox="",$(".modal-backdrop").remove(),$("body").css("cursor","default"),1==success_ajax_then_refresh){var e=new Date,a="Last Sync: "+e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()+" @ "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds(),t=$(document).scrollTop(),l=[];l.edit_manualdownloadlist_scroll_position_data={whenwasset:a,scroll:t},sessionStorage.setItem("Br24_"+app.env()+"_edit_manualdownloadlist_scroll_position_data",JSON.stringify(l.edit_manualdownloadlist_scroll_position_data)),window.manualdownloadlisttable.ajax.reload(null,!1),app.util.fullscreenloading_end(),window.manualdownloadlisttable.fixedHeader.adjust()}NProgress.configure({parent:"#progress-bar-parent",showSpinner:!1,easing:"ease",speed:880,trickleSpeed:333,trickle:!0}),clearInterval(refreshIntervalId),clearInterval(close_colorbox_refreshIntervalId),sessionStorage.removeItem("Br24_"+app.env()+"_edit_manualdownloadlistinfo_previous_data"),sessionStorage.removeItem("Br24_"+app.env()+"_edit_manualdownloadlistinfo_submitted_data")}}),$("a[name*='delete_manualdownloadlist_']").on("click",(function(event){event.preventDefault();var clicked_href=$(this).attr("href"),clicked_href_id_encrypted=$(this).parent().parent().parent().data("workingshiftid"),isReplaceable=$(this).is("[replaceable=true]"),isDeleteable=$(this).is("[deleteable=true]"),isEnableable=$(this).is("[enableable=true]");1==isReplaceable?$.confirm({title:eval("app.translations."+app.data.locale+".title_text"),content:"url:"+app.data.URL_replace_shift_with_another+"/"+clicked_href_id_encrypted,type:"red",draggable:!1,backgroundDismiss:"cancel",escapeKey:!0,animateFromElement:!1,onAction:function(e){$(".jconfirm.jconfirm-light.jconfirm-open").remove()},onContentReady:function(){var e=app.data.selectize_working_shifts_formated_json,a=$("#shifts").selectize({plugins:["remove_button","optgroup_columns"],persist:!1,maxItems:1,mode:"multi",placeholder:"-- Select default working shift --",valueField:"id",labelField:"name",searchField:["name"],options:e,hideSelected:!0,openOnFocus:!0,closeAfterSelect:!0,render:{item:function(e,a){return"<div>"+(e.name?'<span class="name"><b>'+e.name+"</b></span>":"")+"</div>"},option:function(e,a){return'<div style="margin: 10px; border: 1px solid #000; padding: 10px;"><span class="label label-primary">'+e.name+"</span></div>"}},onChange:function(e){},onItemAdd:function(e){$("#confirmbox_spacer").css("height","0px")},onItemRemove:function(e){$("#confirmbox_spacer").css("height","200px")},onBlur:function(){$("#confirmbox_spacer").css("height","0px")},onFocus:function(){$("#confirmbox_spacer").css("height","200px")}})[0].selectize;a.settings;a.focus()},buttons:{disable_replace:{text:"Replace & Disable",btnClass:"btn-blue",keys:["shift"],action:function(){var e=this.$content.find("select#shifts").val();if(void 0===e||0==e.length)return $.alert({content:"Please select a working shift from the drop down.",animateFromElement:!1,type:"red"}),!1;$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),app.util.nprogressinit();var a={replace_with_working_shift:e};app.ajax.jsonGET(clicked_href,a,null,(function(){1==app.ajax.result.success?(window.manualdownloadlisttable.ajax.reload(null,!1),app.util.fullscreenloading_end(),window.manualdownloadlisttable.fixedHeader.adjust(),app.util.nprogressdone(),1==app.ajax.result.process_penalties_accept_reject_table_sync&&app_ops.ajaxexample2tb2.profile.sync_penalties_acceptance_rejection_table()):app.util.nprogressdone()}))}},cancel:{text:eval("app.translations."+app.data.locale+".cancel_text"),action:function(){}}}}):1==isDeleteable?$.confirm({title:eval("app.translations."+app.data.locale+".title_text"),content:eval("app.translations."+app.data.locale+".are_you_sure_you_want_to_delete_this_schedule")+"\n",type:"red",draggable:!1,backgroundDismiss:"cancel",escapeKey:!0,animateFromElement:!1,onAction:function(e){$(".jconfirm.jconfirm-light.jconfirm-open").remove()},buttons:{ok:{btnClass:"btn-primary text-white",keys:["enter"],text:eval("app.translations."+app.data.locale+".okay_text"),action:function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),app.util.nprogressinit();app.ajax.jsonGET(clicked_href,{},null,(function(){1==app.ajax.result.success?(window.manualdownloadlisttable.ajax.reload(null,!1),app.util.fullscreenloading_end(),window.manualdownloadlisttable.fixedHeader.adjust(),app.util.nprogressdone(),1==app.ajax.result.process_penalties_accept_reject_table_sync&&app_ops.ajaxexample2tb2.profile.sync_penalties_acceptance_rejection_table()):app.util.nprogressdone()}))}},cancel:{text:eval("app.translations."+app.data.locale+".cancel_text"),action:function(){}}}}):1==isEnableable?$.confirm({title:eval("app.translations."+app.data.locale+".title_text"),content:eval("app.translations."+app.data.locale+".are_you_sure_you_want_to_enable_this_schedule")+"\n",type:"red",draggable:!1,backgroundDismiss:"cancel",escapeKey:!0,animateFromElement:!1,onAction:function(e){$(".jconfirm.jconfirm-light.jconfirm-open").remove()},buttons:{ok:{btnClass:"btn-primary text-white",keys:["enter"],text:eval("app.translations."+app.data.locale+".okay_text"),action:function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),app.util.nprogressinit();app.ajax.jsonGET(clicked_href,{},null,(function(){1==app.ajax.result.success?(window.manualdownloadlisttable.ajax.reload(null,!1),app.util.fullscreenloading_end(),window.manualdownloadlisttable.fixedHeader.adjust(),app.util.nprogressdone(),1==app.ajax.result.process_penalties_accept_reject_table_sync&&app_ops.ajaxexample2tb2.profile.sync_penalties_acceptance_rejection_table()):app.util.nprogressdone()}))}},cancel:{text:eval("app.translations."+app.data.locale+".cancel_text"),action:function(){}}}}):$.confirm({title:eval("app.translations."+app.data.locale+".title_text"),content:eval("app.translations."+app.data.locale+".are_you_sure_you_want_to_disable_this_schedule")+"\n",type:"red",draggable:!1,backgroundDismiss:"cancel",escapeKey:!0,animateFromElement:!1,onAction:function(e){$(".jconfirm.jconfirm-light.jconfirm-open").remove()},buttons:{ok:{btnClass:"btn-primary text-white",keys:["enter"],text:eval("app.translations."+app.data.locale+".okay_text"),action:function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),app.util.nprogressinit();app.ajax.jsonGET(clicked_href,{},null,(function(){1==app.ajax.result.success?(window.manualdownloadlisttable.ajax.reload(null,!1),app.util.fullscreenloading_end(),window.manualdownloadlisttable.fixedHeader.adjust(),app.util.nprogressdone(),1==app.ajax.result.process_penalties_accept_reject_table_sync&&app_ops.ajaxexample2tb2.profile.sync_penalties_acceptance_rejection_table()):app.util.nprogressdone()}))}},cancel:{text:eval("app.translations."+app.data.locale+".cancel_text"),action:function(){}}}})})),$("a[name*='redownload_manualdownloadlist_']").off("click").on("click",(function(event){event.preventDefault();var clicked_href=$(this).attr("href"),tr=$(this).closest("tr"),encrypted_case_id_uploading_to=tr.data("encrypted_case_id"),redownload_manualdownloadlist_clicked_case_Id=$(this).data("case_id"),array_of_job_zips_details=null,jc_confirm_manualdownloadlisttable_row_redownload_button=$.confirm({title:"",content:'<div class="loader search_keynumber_input_loader" style="margin-left: 15px; height:88%; width:92.4%; display: block; margin-top: 7px; border-radius: 4px;"></div><span id="search_keynumber_input_loader_text" style="display: inline-block">Checking for Job ID = '+redownload_manualdownloadlist_clicked_case_Id+'    ...     Please Wait</span>\n<span id="search_keynumber_input_text" style="display: none;">Download Job = '+redownload_manualdownloadlist_clicked_case_Id+' ? The tool found :-</span>\n<table id="search_keynumber_input_table" cellspacing="0" width="100%" style="display: none; margin-top:12px"><tbody><tr><td style="width: 33.3%"><input type="checkbox" style="margin-bottom: 14px;" class="mdl_checkbox_example form-control" checked></td><td style="width: 33.3%"><input type="checkbox" style="margin-bottom: 14px;" class="mdl_checkbox_new form-control" checked></td><td style="width: 33.3%"><input type="checkbox" style="margin-bottom: 14px;" class="mdl_checkbox_ready form-control" checked></td></tr><tr><td style="width: 33.3%" class="text-center"><span class="mdl_checkbox_example_size"></span></td><td style="width: 33.3%" class="text-center"><span class="mdl_checkbox_new_size"></span></td><td style="width: 33.3%" class="text-center"><span class="mdl_checkbox_ready_size"></span></td></tr><tr><td style="width: 33.3%" class="text-center"><span class="mdl_checkbox_example_label">Examples</span></td><td style="width: 33.3%" class="text-center"><span class="mdl_checkbox_new_label">New</span></td><td style="width: 33.3%" class="text-center"><span class="mdl_checkbox_ready_label">Ready</span></td></tr><tr><td style="width: 33.3%" class="text-center"><span class="mdl_checkbox_example_label_extra"></span></td><td style="width: 33.3%" class="text-center"><span class="mdl_checkbox_new_label_extra"></span></td><td style="width: 33.3%" class="text-center"><span class="mdl_checkbox_ready_label_extra"></span></td></tr></tbody></table>',type:"orange",draggable:!0,dragWindowGap:0,backgroundDismiss:!1,escapeKey:"cancel",animateFromElement:!1,autoClose:!1,onOpen:function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var e={case_id:redownload_manualdownloadlist_clicked_case_Id,encrypted_case_id:encrypted_case_id_uploading_to};app.ajax.jsonGET(app.data.urlGetZipDetailsOfJob+"/"+encrypted_case_id_uploading_to,e,null,(function(){1==app.ajax.result.success?(jc_confirm_manualdownloadlisttable_row_redownload_button.buttons.ok.show(),jc_confirm_manualdownloadlisttable_row_redownload_button.buttons.cancel.show(),jc_confirm_manualdownloadlisttable_row_redownload_button.buttons.ok.enable(),jc_confirm_manualdownloadlisttable_row_redownload_button.buttons.cancel.enable(),$(".search_keynumber_input_loader").css("display","none"),$("#search_keynumber_input_loader_text").css("display","none"),$("#search_keynumber_input_text").css("display",""),$("#search_keynumber_input_table").css("display",""),array_of_job_zips_details=app.ajax.result.array_of_job_zips_details,$.each(app.ajax.result.array_of_job_zips_details,(function(e,a){"example"==e&&(null==a.size?($(".mdl_checkbox_example").remove(),$(".mdl_checkbox_example_size").remove(),$(".mdl_checkbox_example_label").remove()):($(".mdl_checkbox_example_size").html(formatBytes(a.size)),void 0!==app.ajax.result.all_caseid_zips_local[redownload_manualdownloadlist_clicked_case_Id]&&void 0!==app.ajax.result.all_caseid_zips_local[redownload_manualdownloadlist_clicked_case_Id][e]&&(a.lastModified>app.ajax.result.all_caseid_zips_local[redownload_manualdownloadlist_clicked_case_Id][e].last_modified||($(".mdl_checkbox_example").prop("checked",!1).prop("disabled",!0),$(".mdl_checkbox_example_label_extra").append("(unchanged)"))))),"new"==e&&(null==a.size?($(".mdl_checkbox_new").remove(),$(".mdl_checkbox_new_size").remove(),$(".mdl_checkbox_new_label").remove()):($(".mdl_checkbox_new_size").html(formatBytes(a.size)),void 0!==app.ajax.result.all_caseid_zips_local[redownload_manualdownloadlist_clicked_case_Id]&&void 0!==app.ajax.result.all_caseid_zips_local[redownload_manualdownloadlist_clicked_case_Id][e]&&(a.lastModified>app.ajax.result.all_caseid_zips_local[redownload_manualdownloadlist_clicked_case_Id][e].last_modified||($(".mdl_checkbox_new").prop("checked",!1).prop("disabled",!0),$(".mdl_checkbox_new_label_extra").append("(unchanged)"))))),"ready"==e&&(null==a.size?($(".mdl_checkbox_ready").remove(),$(".mdl_checkbox_ready_size").remove(),$(".mdl_checkbox_ready_label").remove()):($(".mdl_checkbox_ready_size").html(formatBytes(a.size)),void 0!==app.ajax.result.all_caseid_zips_local[redownload_manualdownloadlist_clicked_case_Id]&&void 0!==app.ajax.result.all_caseid_zips_local[redownload_manualdownloadlist_clicked_case_Id][e]&&(a.lastModified>app.ajax.result.all_caseid_zips_local[redownload_manualdownloadlist_clicked_case_Id][e].last_modified||($(".mdl_checkbox_ready").prop("checked",!1).prop("disabled",!0),$(".mdl_checkbox_ready_label_extra").append("(unchanged)")))))})),autoClosetimer(),$(".mdl_checkbox_example").on("click",(function(){$(".jconfirm-buttons").children().closest(".btn-primary").text("OK"),clearInterval(autoCloserefreshIntervalId)})),$(".mdl_checkbox_new").on("click",(function(){$(".jconfirm-buttons").children().closest(".btn-primary").text("OK"),clearInterval(autoCloserefreshIntervalId)})),$(".mdl_checkbox_ready").on("click",(function(){$(".jconfirm-buttons").children().closest(".btn-primary").text("OK"),clearInterval(autoCloserefreshIntervalId)}))):app_ops.manage_manualdownloadlist.profile.handlealertdisplayofappajaxresultsuccessisfalse(app.ajax.result.errors,redownload_manualdownloadlist_clicked_case_Id)}))},onAction:function(e){$(".jconfirm.jconfirm-light.jconfirm-open").remove()},buttons:{ok:{btnClass:"btn-primary text-white",keys:["enter"],text:eval("app.translations."+app.data.locale+".okay_text"),isHidden:!0,isDisabled:!0,action:function(){var e=this.$content.find(".mdl_checkbox_example").is(":checked"),a=this.$content.find(".mdl_checkbox_new").is(":checked"),t=this.$content.find(".mdl_checkbox_ready").is(":checked");if(!e&&!a&&!t)return $.alert("choose at least 1 folder"),$(".custom_loader_section").animate({opacity:0},{duration:500,complete:function(){$(".custom_loader_section").css("display","none"),$(".search_keynumber_input").prop("disabled",!1).css("cursor","").css("background-color","").css("border-color","")}}),!1;$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var l={case_id:redownload_manualdownloadlist_clicked_case_Id,mdl_checkbox_example:e,mdl_checkbox_new:a,mdl_checkbox_ready:t,array_of_job_zips_details:array_of_job_zips_details};app.util.fullscreenloading_start(),app.util.nprogressinit(),app.ajax.json(clicked_href,l,null,(function(){1==app.ajax.result.success?(window.manualdownloadlisttable.ajax.reload(null,!1),app.util.fullscreenloading_end(),window.manualdownloadlisttable.fixedHeader.adjust(),app.util.nprogressdone()):(app.util.fullscreenloading_end(),app.util.nprogressdone())}))}},cancel:{text:eval("app.translations."+app.data.locale+".cancel_text"),isHidden:!0,isDisabled:!0,action:function(){clearInterval(autoCloserefreshIntervalId),$(".jconfirm-buttons").children().closest(".btn-primary").text("OK"),$(".custom_loader_section").animate({opacity:0},{duration:500,complete:function(){$(".custom_loader_section").css("display","none"),$(".search_keynumber_input").prop("disabled",!1).css("cursor","").css("background-color","").css("border-color",""),jc_confirm_manualdownloadlisttable_row_redownload_button.close()}})}}}})})),$("i[name*='edit_custom_star_rating_comment_']").on("click",(function(e){e.preventDefault();var a=$(this).parent().attr("data-content"),t=$(this).parent(),l=$(this),s=$(this).parent().parent().data("case_id");if(1==$("#edit_star_rating_comment_input_"+s).is(":visible"))return!1;keep_track_of_last_clicked_item_to_react_after_reload="change_from_amount";e.target;e.preventDefault();var o=$(this).parent().parent().closest("tr"),n=$(this).parent().parent(),i=$(this).html(),r=(window.manualdownloadlisttable.row(o),$(this).parent().attr("data-content")),d=r.split("<br>").length-1,c=n.height();c+=20*d,r=r.replace(/(?:<br>)/g,"\r\n");o.data("rowindex");var _=o.data("encrypted_case_id");keep_track_of_last_clicked_item_data_attribute_to_react_after_reload=s;$(this).data("date_ts");var p=$('<textarea id="edit_star_rating_comment_input_'+s+'" cols="10" rows="5" charswidth="23"  style="white-space: pre-wrap; line-height: 15px; min-height: 30px; width: 100%; height: '+c+'px; display: block; z-index: 12; resize: vertical; color: black;"></textarea>');p.val(r),t.css("display","none"),n.append(p),$(".popover").popover("hide"),$(document).on("keydown","#edit_star_rating_comment_input_"+s,(function(e){var a=$(this),t=a.val(),l=new RegExp(a.attr("pattern"),"g");setTimeout((function(){var e=a.val();l.test(e)||a.val(t)}),0),e.keyCode,27==e.keyCode&&n.html(i)})),$("#edit_star_rating_comment_input_"+s).click((function(e){e.stopImmediatePropagation()})),$("#edit_star_rating_comment_input_"+s).focus((function(){})),$("#edit_star_rating_comment_input_"+s).focus(),$("#edit_star_rating_comment_input_"+s).blur((function(){var e=$("#edit_star_rating_comment_input_"+s).val();if(e=e.replace(/(?:\r\n|\r|\n)/g,"<br>"),a==e)t.css("display",""),$("#edit_star_rating_comment_input_"+s).remove();else{t.css("display",""),t.attr("data-content",e),$("#edit_star_rating_comment_input_"+s).remove(),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var n={case_id:s,encrypted_case_id:_,new_star_rating_custom_note:e};app.ajax.json(app.data.change_custom_star_rating_note_for_job,n,null,(function(){success_ajax_then_refresh=app.ajax.result.success,1==app.ajax.result.success?(t.css("display",""),t.attr("data-content",e),null==app.ajax.result.star_rating_comment&&(l.css("display","none"),t.attr("data-content","")),o.children().next(".last_updated_by").html('<span style="font-size: 8px;">'+app.ajax.result.last_updated_by_name+"</span>"),o.children().next(".last_updated").html(app.ajax.result.updated_at)):($("#edit_star_rating_comment_input_"+s).remove(),t.css("display",""),t.attr("data-content",a))}))}var i=null;$('[data-toggle="popover"]').popover({placement:"auto bottom",trigger:"manual",html:!0,animation:!1}).on("mouseenter",(function(){var e,a=this;e=a,i=setInterval((function(){$(e).popover("show")}),300),$(this).siblings(".popover").on("mouseleave",(function(){$(a).popover("hide")}))})).on("mouseleave",(function(){clearInterval(i);var e=this,a=function(){setTimeout((function(){$(".popover:hover").length?a():$(e).popover("hide")}),50)};a()}))}))}));var if_input_exactly_follows_regular_expression_pattern="";$(document).off("keydown drop",".search_keynumber_input").on("keydown drop",".search_keynumber_input",(function(e){var a=$(this),t=(a.val(),new RegExp(a.attr("pattern"),"g"));a.trigger("click"),setTimeout((function(){var e=a.val();if_input_exactly_follows_regular_expression_pattern=!!t.test(e)}),0),13==e.keyCode&&a.blur(),27==e.keyCode&&(a.val(""),a.blur())})),$(".search_keynumber_input").off("click").on("click",(function(e){e.stopImmediatePropagation(),$(".form_input input:focus+.label-name .content-name, .form_input input:valid+.label-name .content-name").animate({fontSize:"10px",color:"#008F68",background:"#FFFFFF",transform:"translateY(-30%)"},100),$(".form_input .label-name-after").animate({transform:"translateX(0px, 0)"},50)})),$(".search_keynumber_input").off("focus").on("focus",(function(){var e=$(this);window.setTimeout((function(){e.select()}),30)})),$(".search_keynumber_input").off("blur").on("blur",(function(){var input=$(this);if(""!==input.val()&&if_input_exactly_follows_regular_expression_pattern){var caseId_to_manually_download=input.val();input.prop("disabled",!0).css("cursor","not-allowed").css("background","").css("background-color","-internal-light-dark(rgba(239, 239, 239, 0.3), rgba(59, 59, 59, 0.3))").css("border-color","rgba(118, 118, 118, 0.3)"),$(".form_input").css("overflow","visible");var jc_confirm_search_keynumber_input_validation=$.confirm({title:"",content:'<div class="loader search_keynumber_input_loader" style="margin-left: 15px; height:88%; width:92.4%; display: block; margin-top: 7px; border-radius: 4px;"></div><span id="search_keynumber_input_loader_text" style="display: inline-block">Checking for Job ID = '+caseId_to_manually_download+'    ...     Please Wait</span>\n<span id="search_keynumber_input_text" style="display: none;">Download Job = '+caseId_to_manually_download+' ? The tool found :-</span>\n<table id="search_keynumber_input_table" cellspacing="0" width="100%" style="display: none; margin-top:12px"><tbody><tr><td style="width: 33.3%"><input type="checkbox" style="margin-bottom: 14px;" class="mdl_checkbox_example form-control" checked></td><td style="width: 33.3%"><input type="checkbox" style="margin-bottom: 14px;" class="mdl_checkbox_new form-control" checked></td><td style="width: 33.3%"><input type="checkbox" style="margin-bottom: 14px;" class="mdl_checkbox_ready form-control" checked></td></tr><tr><td style="width: 33.3%" class="text-center"><span class="mdl_checkbox_example_size"></span></td><td style="width: 33.3%" class="text-center"><span class="mdl_checkbox_new_size"></span></td><td style="width: 33.3%" class="text-center"><span class="mdl_checkbox_ready_size"></span></td></tr><tr><td style="width: 33.3%" class="text-center"><span class="mdl_checkbox_example_label">Examples</span></td><td style="width: 33.3%" class="text-center"><span class="mdl_checkbox_new_label">New</span></td><td style="width: 33.3%" class="text-center"><span class="mdl_checkbox_ready_label">Ready</span></td></tr><tr><td style="width: 33.3%" class="text-center"><span class="mdl_checkbox_example_label_extra"></span></td><td style="width: 33.3%" class="text-center"><span class="mdl_checkbox_new_label_extra"></span></td><td style="width: 33.3%" class="text-center"><span class="mdl_checkbox_ready_label_extra"></span></td></tr></tbody></table>',type:"orange",draggable:!0,dragWindowGap:0,backgroundDismiss:!1,escapeKey:"cancel",animateFromElement:!1,autoClose:!1,onOpen:function(){$(".custom_loader_section").css("display",""),$(".custom_loader_section").animate({opacity:1},{duration:500,complete:function(){}}),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var e={case_id:caseId_to_manually_download};app.ajax.json(app.data.manual_download_scan_initiate,e,null,(function(){1==app.ajax.result.success?app.ajax.jsonGET(app.data.urlGetZipDetailsOfJob,e,null,(function(){1==app.ajax.result.success?(jc_confirm_search_keynumber_input_validation.buttons.ok.show(),jc_confirm_search_keynumber_input_validation.buttons.cancel.show(),jc_confirm_search_keynumber_input_validation.buttons.ok.enable(),jc_confirm_search_keynumber_input_validation.buttons.cancel.enable(),$(".search_keynumber_input_loader").css("display","none"),$("#search_keynumber_input_loader_text").css("display","none"),$("#search_keynumber_input_text").css("display",""),$("#search_keynumber_input_table").css("display",""),array_of_job_zips_details=app.ajax.result.array_of_job_zips_details,$.each(app.ajax.result.array_of_job_zips_details,(function(e,a){"example"==e&&(null==a.size?($(".mdl_checkbox_example").remove(),$(".mdl_checkbox_example_size").remove(),$(".mdl_checkbox_example_label").remove()):($(".mdl_checkbox_example_size").html(formatBytes(a.size)),void 0!==app.ajax.result.all_caseid_zips_local[caseId_to_manually_download]&&void 0!==app.ajax.result.all_caseid_zips_local[caseId_to_manually_download][e]&&(a.lastModified>app.ajax.result.all_caseid_zips_local[caseId_to_manually_download][e].last_modified||($(".mdl_checkbox_example").prop("checked",!1).prop("disabled",!0),$(".mdl_checkbox_example_label_extra").append("(unchanged)"))))),"new"==e&&(null==a.size?($(".mdl_checkbox_new").remove(),$(".mdl_checkbox_new_size").remove(),$(".mdl_checkbox_new_label").remove()):($(".mdl_checkbox_new_size").html(formatBytes(a.size)),void 0!==app.ajax.result.all_caseid_zips_local[caseId_to_manually_download]&&void 0!==app.ajax.result.all_caseid_zips_local[caseId_to_manually_download][e]&&(a.lastModified>app.ajax.result.all_caseid_zips_local[caseId_to_manually_download][e].last_modified||($(".mdl_checkbox_new").prop("checked",!1).prop("disabled",!0),$(".mdl_checkbox_new_label_extra").append("(unchanged)"))))),"ready"==e&&(null==a.size?($(".mdl_checkbox_ready").remove(),$(".mdl_checkbox_ready_size").remove(),$(".mdl_checkbox_ready_label").remove()):($(".mdl_checkbox_ready_size").html(formatBytes(a.size)),void 0!==app.ajax.result.all_caseid_zips_local[caseId_to_manually_download]&&void 0!==app.ajax.result.all_caseid_zips_local[caseId_to_manually_download][e]&&(a.lastModified>app.ajax.result.all_caseid_zips_local[caseId_to_manually_download][e].last_modified||($(".mdl_checkbox_ready").prop("checked",!1).prop("disabled",!0),$(".mdl_checkbox_ready_label_extra").append("(unchanged)")))))})),autoClosetimer(),$(".mdl_checkbox_example").on("click",(function(){$(".jconfirm-buttons").children().closest(".btn-primary").text("OK"),clearInterval(autoCloserefreshIntervalId)})),$(".mdl_checkbox_new").on("click",(function(){$(".jconfirm-buttons").children().closest(".btn-primary").text("OK"),clearInterval(autoCloserefreshIntervalId)})),$(".mdl_checkbox_ready").on("click",(function(){$(".jconfirm-buttons").children().closest(".btn-primary").text("OK"),clearInterval(autoCloserefreshIntervalId)}))):app_ops.manage_manualdownloadlist.profile.handlealertdisplayofappajaxresultsuccessisfalse(app.ajax.result.errors,caseId_to_manually_download)})):app_ops.manage_manualdownloadlist.profile.handlealertdisplayofappajaxresultsuccessisfalse(app.ajax.result.errors,caseId_to_manually_download)}))},onAction:function(e){$(".jconfirm.jconfirm-light.jconfirm-open").remove()},buttons:{ok:{btnClass:"btn-primary text-white",keys:["enter"],text:eval("app.translations."+app.data.locale+".okay_text"),isHidden:!0,isDisabled:!0,action:function(){var e=this.$content.find(".mdl_checkbox_example").is(":checked"),a=this.$content.find(".mdl_checkbox_new").is(":checked"),t=this.$content.find(".mdl_checkbox_ready").is(":checked");if(!e&&!a&&!t)return $.alert("choose at least 1 folder"),$(".custom_loader_section").animate({opacity:0},{duration:500,complete:function(){$(".custom_loader_section").css("display","none"),input.prop("disabled",!1).css("cursor","").css("background-color","").css("border-color","")}}),!1;$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var l={case_id:caseId_to_manually_download,mdl_checkbox_example:e,mdl_checkbox_new:a,mdl_checkbox_ready:t};app.util.fullscreenloading_start(),app.util.nprogressinit(),app.ajax.json(app.data.manual_download_actually_start_downloading,l,null,(function(){1==app.ajax.result.success?(window.manualdownloadlisttable.ajax.reload(null,!1),$(".custom_loader_section").animate({opacity:0},{duration:500,complete:function(){$(".custom_loader_section").css("display","none"),$(".search_keynumber_input").prop("disabled",!1).css("cursor","").css("background-color","").css("border-color","")}})):app_ops.manage_manualdownloadlist.profile.handlealertdisplayofappajaxresultsuccessisfalse(app.ajax.result.errors,caseId_to_manually_download),app.util.fullscreenloading_end(),app.util.nprogressdone()}))}},cancel:{text:eval("app.translations."+app.data.locale+".cancel_text"),isHidden:!0,isDisabled:!0,action:function(){clearInterval(autoCloserefreshIntervalId),$(".jconfirm-buttons").children().closest(".btn-primary").text("OK"),$(".custom_loader_section").animate({opacity:0},{duration:500,complete:function(){$(".custom_loader_section").css("display","none"),input.prop("disabled",!1).css("cursor","").css("background-color","").css("border-color",""),jc_confirm_search_keynumber_input_validation.close()}})}}}})}else if($(".form_input").css("overflow","hidden"),input.prop("disabled",!1).css("cursor","").css("background-color","").css("border-color",""),if_input_exactly_follows_regular_expression_pattern||""===input.val()){$(".search_keynumber_input").css("background",""),$(".form_input input:focus+.label-name .content-name, .form_input input:valid+.label-name .content-name").animate({fontSize:"11px",color:"#000",background:"",transform:"translateY(0%)"},100);var width_of_search_keynumber_input=$(".search_keynumber_input").outerWidth();$(".form_input .label-name-after").animate({transform:"translateX(-"+width_of_search_keynumber_input+"px, 0)"},50)}else $(".search_keynumber_input").css("background","repeating-linear-gradient(45deg, #ffffff, #ffffff 10px, #ff9900 10px, #ff9900 20px)")})),$(".search_keynumber_input").off("drop").on("drop",(function(e){var a=$(this);window.setTimeout((function(){a.focus(),$(".form_input input:focus+.label-name .content-name, .form_input input:valid+.label-name .content-name").animate({fontSize:"10px",color:"#008F68",background:"#FFFFFF",transform:"translateY(-30%)"},100),$(".form_input .label-name-after").animate({transform:"translateX(0px, 0)"},50),a.blur()}),30)}))})),$("div[name*='edit_custom_star_rating_']").rateit({max:5,step:.5}),app_ops.manage_manualdownloadlist.profile.handle_show_hide_columns_on_this_table(),app_ops.manage_manualdownloadlist.profile.live_update_download_progress_of_manual_downloaded_jobs(json.data)},initComplete:function(e,a){app.data.section.indexOf("accounting"),app.data.auth_user_permissions.indexOf("WRITE accounting"),window.manualdownloadlisttable.column(app.conf.table.filterColumn.managemanualdownloadlistInfo.action)}});var counting_ctd=1,$period_datepicker=$(".period_datepicker");$period_datepicker.bind("keydown",(function(e){13==e.which&&e.stopImmediatePropagation(),27==e.which&&$(this).blur()})).datepicker({dateFormat:prefered_dateFormat,showMonthAfterYear:!0,numberOfMonths:2,showCurrentAtPos:1,changeMonth:!0,changeYear:!0,yearRange:"-2:+2",showOtherMonths:!1,selectOtherMonths:!1,toggleActive:!0,todayHighlight:!1,minDate:new Date(minD_YYYY,minD_MM,minD_DD),maxDate:new Date(maxD_YYYY,maxD_MM,maxD_DD),autoclose:!0,defaultDate:defaultDateVARIABLE,onSelect:function(){var e=$(".period_datepicker").val(),a=e.split(delimiter_for_splitting_variable),t=null,l=null,s=null,o=null;if("vi"===app.data.locale){t=parseInt(a[2])+"-"+parseInt(a[1])+"-"+parseInt(a[0]);l=parseInt(a[2]),s=parseInt(a[1]),o=parseInt(a[0])}else if("en"===app.data.locale){t=parseInt(a[2])+"-"+parseInt(a[1])+"-"+parseInt(a[0]);l=parseInt(a[2]),s=parseInt(a[1]),o=parseInt(a[0])}else if("de"===app.data.locale){t=parseInt(a[2])+"-"+parseInt(a[1])+"-"+parseInt(a[0]);l=parseInt(a[2]),s=parseInt(a[1]),o=parseInt(a[0])}var n=new Date(t),i=n.getFullYear(),r=n.toLocaleString("default",{month:"short"});$("#attendance_status_change_period").val(r+", "+i);var d={_token:$('meta[name="csrf-token"]').attr("content")};app.ajax.jsonGET(app.data.timesheet_period.gotoUrl+"/"+t,d,null,(function(){NProgress.start(),app.util.fullscreenloading_start(),success_ajax_then_refresh=app.ajax.result.success,1==app.ajax.result.success?(app.data.total_working_days=null,app.data.total_working_time=null,app.data.total_overtime=null,app.data.total_fines=null,$("#total_working_days").html("--"),$("#total_working_time").html("--:--:--"),$("#total_overtime").html("--:--:--"),$("#total_working_time_as_of_today").html("--:--:--"),$("#total_fines").html("--"),$("#attendance_status_change_period").val(r+", "+i),defaultDateVARIABLE=new Date(l,s,o),$period_datepicker.datepicker("option","defaultDate",defaultDateVARIABLE),$(".ui-state-active").removeClass("ui-state-active"),report_date_value=e,window.manualdownloadlisttable.settings()[0].jqXHR.abort(),window.manualdownloadlisttable.draw()):(NProgress.done(),app.util.fullscreenloading_end())}))},onClose:function(){var e=$(this).val();patt.test(e)},beforeShow:function(e,a){var t=$(".period_datepicker").offset().top,l=$(".period_datepicker").offset().left;setTimeout((function(){$("#ui-datepicker-div").css("position","realtive").css("top",t+16).css("left",l-353).css("z-index",102),$("#ui-datepicker-div").find(".ui-datepicker-current-day").removeClass("ui-datepicker-current-day").find("a").removeClass("ui-state-active")}),0)},onChangeMonthYear:function(){var e=$(".period_datepicker").offset().top,a=$(".period_datepicker").offset().left;setTimeout((function(){$("#ui-datepicker-div").css("position","realtive").css("top",e+16).css("left",a-353).css("z-index",102),$("#ui-datepicker-div").find(".ui-datepicker-current-day").removeClass("ui-datepicker-current-day").find("a").removeClass("ui-state-active")}),0)},beforeShowDay:function(e){var a=function(e){var a=new Date(e),t=""+(a.getMonth()+1),l=""+a.getDate(),s=a.getFullYear();t.length<2&&(t="0"+t);l.length<2&&(l="0"+l);return[s,t,l].join("-")}(e);your_dates=Object.keys(app.data.timesheet_period.range_array_days_formated).map((function(e){return app.data.timesheet_period.range_array_days_formated[e]}));var t=function(e){var a=new Date(e),t=""+(a.getMonth()+1),l=""+a.getDate(),s=a.getFullYear();return t.length<2&&(t="0"+t),l.length<2&&(l="0"+l),[s,t,l].join("-")}(app.data.timesheet_period.today);return a==t?[!0,"ui-state-active shift_planner_datepicker_today",""]:-1!=$.inArray(a,your_dates)?[!0,"ui-state-active",""]:[!0,"",""]}}),app_ops.manage_manualdownloadlist.profile.filter.byJobStatus(window.manualdownloadlisttable),app_ops.manage_manualdownloadlist.profile.filter.byGlobalSearch(window.manualdownloadlisttable),app_ops.manage_manualdownloadlist.profile.filter.byColVis(window.manualdownloadlisttable);var isSectionAccounting=app.data.section.indexOf("accounting"),canWRITEexport=app.data.auth_user_permissions.indexOf("WRITE export");$("select#status_filter").multiselect({columns:3,maxPlaceholderOpts:0,search:!0,texts:{placeholder:"All"}}),$("select#team_filter").multiselect({columns:2,maxPlaceholderOpts:0,search:!0,texts:{placeholder:"All"}}),$("select#position_filter").multiselect({columns:2,maxPlaceholderOpts:0,search:!0,texts:{placeholder:"All"}}),$("select#enabled_disabled_filter").multiselect({columns:2,maxPlaceholderOpts:0,search:!0,texts:{placeholder:"All"}}),$("select#jobstatus_filter").multiselect({columns:1,maxPlaceholderOpts:0,search:!0,texts:{placeholder:"All"}}),$("select#colVis_show_hide_filter").multiselect({columns:2,maxPlaceholderOpts:0,search:!0,texts:{placeholder:"None"}}),$("select#assignees_filter").multiselect({columns:2,maxPlaceholderOpts:0,search:!0,texts:{placeholder:"All"}});var filter_load=JSON.parse(sessionStorage.getItem("Br24_"+app.env()+"_managemanualdownloadlistTable_table_manualdownloadlistTable"));if(null!==filter_load){if(""!==filter_load.filters.global_search&&$("input[id='global_search_filter']").val(filter_load.filters.global_search),""!==filter_load.filters.status_cb){var array=filter_load.filters.status_cb.split("|");$("select#status_filter").val(array),$("select#status_filter").multiselect("reload")}if(""!==filter_load.filters.team_cb){var array=filter_load.filters.team_cb.split("|");$("select#team_filter").val(array),$("select#team_filter").multiselect("reload")}if(""!==filter_load.filters.position_cb){var array=filter_load.filters.position_cb.split("|");$("select#position_filter").val(array),$("select#position_filter").multiselect("reload")}if(""!==filter_load.filters.editor_level_cb){var array=filter_load.filters.editor_level_cb.split("|");$("select#editor_level_filter").val(array),$("select#editor_level_filter").multiselect("reload")}if(""!==filter_load.filters.job_status_cb){var array=filter_load.filters.job_status_cb.split("|");$("select#jobstatus_filter").val(array),$("select#jobstatus_filter").multiselect("reload")}if(""!==filter_load.filters.byEnabledDisabled){var array=filter_load.filters.byEnabledDisabled;$("select#enabled_disabled_filter").val(array),$("select#enabled_disabled_filter").multiselect("reload")}if(""!==filter_load.filters.byHideShowColumn_val){var array=filter_load.filters.byHideShowColumn_val;$("select#colVis_show_hide_filter").val(array),$("select#colVis_show_hide_filter").multiselect("reload")}if(""!==filter_load.filters.byShowColumn)var array=filter_load.filters.byShowColumn;if(""!==filter_load.filters.byHideShowColumn)var array=filter_load.filters.byHideShowColumn;if(""!==filter_load.filters.assignee_cb){var array=filter_load.filters.assignee_cb.split("|");$("select#assignees_filter").val(array),$("select#assignees_filter").multiselect("reload")}}else window.byHideShowColumn_value=["0","1","2","3","4","5","10","11","13","14"],$("select#colVis_show_hide_filter").val(window.byHideShowColumn_value),$("select#colVis_show_hide_filter").multiselect("reload"),$("select#jobstatus_filter").val(["1","3"]),$("select#jobstatus_filter").multiselect("reload"),byJobStatus_value="new|downloaded",window.manualdownloadlisttable.draw();function delay(e,a){var t=0;return function(){var l=this,s=arguments;clearTimeout(t),t=setTimeout((function(){e.apply(l,s)}),a||0)}}$('a[name="export"]').on("click",(function(){let e=$(this).data("action"),a=window.manualdownloadlisttable.ajax.params();window.open(e+"?"+$.param(a)+"&filename=manualdownloadlist-Info-"+app.data.timesheet_period.when+"&sheetname="+app.data.timesheet_period.when)})),$('a[name="clearallfilters"]').on("click",(function(){array=[],global_search_value="",byStatus_value="",byCompanyDepartment_value="",byCompanyPosition_value="",byEnabledDisabled_value="",byJobStatus_value="",byAssignee_value="",$("input[id='global_search_filter']").val(""),$("select#status_filter, select#team_filter, select#position_filter, select#enabled_disabled_filter, select#assignees_filter").val(array),$("select#status_filter, select#team_filter, select#position_filter, select#enabled_disabled_filter, select#assignees_filter").multiselect("reload"),$.xhrPool.abortAll(),clearInterval(window.autoPollrefreshIntervalId),clearInterval(window.autoPollrefreshIntervalId_ASAP),window.manualdownloadlisttable.settings()[0].jqXHR.abort(),window.manualdownloadlisttable.draw()})),$("#manualdownloadlistTable").on("length.dt",(function(e,a,t){$.xhrPool.abortAll(),clearInterval(window.autoPollrefreshIntervalId),clearInterval(window.autoPollrefreshIntervalId_ASAP),window.manualdownloadlisttable.settings()[0].jqXHR.abort()})),$("#manualdownloadlistTable").on("page.dt",(function(e,a,t){$.xhrPool.abortAll(),clearInterval(window.autoPollrefreshIntervalId),clearInterval(window.autoPollrefreshIntervalId_ASAP),window.manualdownloadlisttable.settings()[0].jqXHR.abort()})),$("select[id='enabled_disabled_filter']").on("change",(function(){var e=$("#enabled_disabled_filter option:selected").map((function(){return $(this).val()})).get();byEnabledDisabled_value=e,$.xhrPool.abortAll(),clearInterval(window.autoPollrefreshIntervalId),clearInterval(window.autoPollrefreshIntervalId_ASAP),window.manualdownloadlisttable.settings()[0].jqXHR.abort(),window.manualdownloadlisttable.draw()})),$("select[id='status_filter']").on("change",(function(){var e=$("#status_filter option:selected").map((function(){return $(this).val()})).get();byStatus_value=e,$.xhrPool.abortAll(),clearInterval(window.autoPollrefreshIntervalId),clearInterval(window.autoPollrefreshIntervalId_ASAP),window.manualdownloadlisttable.settings()[0].jqXHR.abort(),window.manualdownloadlisttable.draw()})),$("select[id='position_filter']").on("change",(function(){var e=$("#position_filter option:selected").map((function(){return $(this).text()})).get().join("|");byCompanyPosition_value=e,$.xhrPool.abortAll(),clearInterval(window.autoPollrefreshIntervalId),clearInterval(window.autoPollrefreshIntervalId_ASAP),window.manualdownloadlisttable.settings()[0].jqXHR.abort(),window.manualdownloadlisttable.draw()})),$("select[id='team_filter']").on("change",(function(){var e=$("#team_filter option:selected").map((function(){return $(this).text()})).get().join("|");byCompanyDepartment_value=e,$.xhrPool.abortAll(),clearInterval(window.autoPollrefreshIntervalId),clearInterval(window.autoPollrefreshIntervalId_ASAP),window.manualdownloadlisttable.settings()[0].jqXHR.abort(),window.manualdownloadlisttable.draw()})),$("select[id='jobstatus_filter']").on("change",(function(){var e=$("#jobstatus_filter option:selected").map((function(){return $(this).text()})).get().join("|");byJobStatus_value=e,$.xhrPool.abortAll(),clearInterval(window.autoPollrefreshIntervalId),clearInterval(window.autoPollrefreshIntervalId_ASAP),window.manualdownloadlisttable.settings()[0].jqXHR.abort(),window.manualdownloadlisttable.draw()})),$("input[id='global_search_filter']").on("drop search change keyup copy paste cut",delay((function(e){(app.util.globalSearchkeyCodesPressedAllowed(e.keyCode)||"drop"==e.type||"search"==e.type||"change"==e.type||13==e.keyCode)&&("!"==(global_search_value=$(this).val())||"@"==global_search_value||($.xhrPool.abortAll(),clearInterval(window.autoPollrefreshIntervalId),clearInterval(window.autoPollrefreshIntervalId_ASAP),window.manualdownloadlisttable.settings()[0].jqXHR.abort(),window.manualdownloadlisttable.draw()))}),300)),$("select[id='colVis_show_hide_filter']").on("change",(function(e){e.preventDefault(),app_ops.manage_manualdownloadlist.profile.handle_show_hide_columns_on_this_table()})),$("select[id='assignees_filter']").on("change",(function(){var e=$("#assignees_filter option:selected").map((function(){return $(this).text()})).get().join("|");console.log("assignees="+e),byAssignee_value=e,$.xhrPool.abortAll(),clearInterval(window.autoPollrefreshIntervalId),clearInterval(window.autoPollrefreshIntervalId_ASAP),window.manualdownloadlisttable.settings()[0].jqXHR.abort(),window.manualdownloadlisttable.draw()}))},handlealertdisplayofappajaxresultsuccessisfalse:function(array_of_errors,caseId_to_manually_download){function formatBytes(e,a){if(0==e)return"0 Bytes";var t=a||2,l=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,l)).toFixed(t))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][l]}var autoCloserefreshIntervalId2=null,countdownstartvalueseconds2=10,autoClosetimer2=function(){autoCloserefreshIntervalId2=setInterval((function(){0==(countdownstartvalueseconds2-=1)?($(".jconfirm-buttons").children().closest(".btn-primary").text("OK"),$(".jconfirm-buttons").children().closest(".btn-primary").trigger("click"),clearInterval(autoCloserefreshIntervalId2),countdownstartvalueseconds2=0):$(".jconfirm-buttons").children().closest(".btn-primary").text("OK ("+countdownstartvalueseconds2+")")}),1e3)},keeping_track_of_redownload_manualdownloadlist_X_anchor=!1,alert_string="Notice :-";$.each(array_of_errors,(function(e,a){alert_string=alert_string+"<br>"+a,console.log(a),a.includes("redownload_manualdownloadlist_X")&&(keeping_track_of_redownload_manualdownloadlist_X_anchor=!0)}));var jc_alert_re_download_option=$.alert({title:"",content:alert_string,draggable:!0,dragWindowGap:0,backgroundDismiss:!1,escapeKey:"ok",animateFromElement:!1,autoClose:!1,onOpen:function(){keeping_track_of_redownload_manualdownloadlist_X_anchor&&$("a[name='redownload_manualdownloadlist_X']").off("click").on("click",(function(event){jc_alert_re_download_option.close(),event.preventDefault();var clicked_href=$(this).attr("href"),array_of_job_zips_details=null,jc_confirm_choose_zips=$.confirm({title:"",content:'<div class="loader search_keynumber_input_loader" style="margin-left: 15px; height:88%; width:92.4%; display: block; margin-top: 7px; border-radius: 4px;"></div><span id="search_keynumber_input_loader_text" style="display: inline-block">Checking for Job ID = '+caseId_to_manually_download+'    ...     Please Wait</span>\n<span id="search_keynumber_input_text" style="display: none;">'+eval("app.translations."+app.data.locale+".are_you_sure_you_want_to_redownload_this_case")+" "+caseId_to_manually_download+' ? The tool found :-</span>\n<table id="search_keynumber_input_table" cellspacing="0" width="100%" style="display: none; margin-top:12px"><tbody><tr><td style="width: 33.3%"><input type="checkbox" style="margin-bottom: 14px;" class="mdl_checkbox_example form-control" checked></td><td style="width: 33.3%"><input type="checkbox" style="margin-bottom: 14px;" class="mdl_checkbox_new form-control" checked></td><td style="width: 33.3%"><input type="checkbox" style="margin-bottom: 14px;" class="mdl_checkbox_ready form-control" checked></td></tr><tr><td style="width: 33.3%" class="text-center"><span class="mdl_checkbox_example_size"></span></td><td style="width: 33.3%" class="text-center"><span class="mdl_checkbox_new_size"></span></td><td style="width: 33.3%" class="text-center"><span class="mdl_checkbox_ready_size"></span></td></tr><tr><td style="width: 33.3%" class="text-center"><span class="mdl_checkbox_example_label">Examples</span></td><td style="width: 33.3%" class="text-center"><span class="mdl_checkbox_new_label">New</span></td><td style="width: 33.3%" class="text-center"><span class="mdl_checkbox_ready_label">Ready</span></td></tr><tr><td style="width: 33.3%" class="text-center"><span class="mdl_checkbox_example_label_extra"></span></td><td style="width: 33.3%" class="text-center"><span class="mdl_checkbox_new_label_extra"></span></td><td style="width: 33.3%" class="text-center"><span class="mdl_checkbox_ready_label_extra"></span></td></tr></tbody></table>',type:"orange",draggable:!0,dragWindowGap:0,backgroundDismiss:!1,escapeKey:"cancel",animateFromElement:!1,autoClose:!1,onOpen:function(){$(".custom_loader_section").css("display",""),$(".custom_loader_section").animate({opacity:1},{duration:500,complete:function(){}}),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var e={case_id:caseId_to_manually_download};app.ajax.jsonGET(app.data.urlGetZipDetailsOfJob,e,null,(function(){1==app.ajax.result.success?(jc_confirm_choose_zips.buttons.ok.show(),jc_confirm_choose_zips.buttons.cancel.show(),jc_confirm_choose_zips.buttons.ok.enable(),jc_confirm_choose_zips.buttons.cancel.enable(),$(".search_keynumber_input_loader").css("display","none"),$("#search_keynumber_input_loader_text").css("display","none"),$("#search_keynumber_input_text").css("display",""),$("#search_keynumber_input_table").css("display",""),array_of_job_zips_details=app.ajax.result.array_of_job_zips_details,$.each(app.ajax.result.array_of_job_zips_details,(function(e,a){"example"==e&&(null==a.size?($(".mdl_checkbox_example").remove(),$(".mdl_checkbox_example_size").remove(),$(".mdl_checkbox_example_label").remove()):($(".mdl_checkbox_example_size").html(formatBytes(a.size)),void 0!==app.ajax.result.all_caseid_zips_local[caseId_to_manually_download]&&void 0!==app.ajax.result.all_caseid_zips_local[caseId_to_manually_download][e]&&(a.lastModified>app.ajax.result.all_caseid_zips_local[caseId_to_manually_download][e].last_modified||($(".mdl_checkbox_example").prop("checked",!1).prop("disabled",!0),$(".mdl_checkbox_example_label_extra").append("(unchanged)"))))),"new"==e&&(null==a.size?($(".mdl_checkbox_new").remove(),$(".mdl_checkbox_new_size").remove(),$(".mdl_checkbox_new_label").remove()):($(".mdl_checkbox_new_size").html(formatBytes(a.size)),void 0!==app.ajax.result.all_caseid_zips_local[caseId_to_manually_download]&&void 0!==app.ajax.result.all_caseid_zips_local[caseId_to_manually_download][e]&&(a.lastModified>app.ajax.result.all_caseid_zips_local[caseId_to_manually_download][e].last_modified||($(".mdl_checkbox_new").prop("checked",!1).prop("disabled",!0),$(".mdl_checkbox_new_label_extra").append("(unchanged)"))))),"ready"==e&&(null==a.size?($(".mdl_checkbox_ready").remove(),$(".mdl_checkbox_ready_size").remove(),$(".mdl_checkbox_ready_label").remove()):($(".mdl_checkbox_ready_size").html(formatBytes(a.size)),void 0!==app.ajax.result.all_caseid_zips_local[caseId_to_manually_download]&&void 0!==app.ajax.result.all_caseid_zips_local[caseId_to_manually_download][e]&&(a.lastModified>app.ajax.result.all_caseid_zips_local[caseId_to_manually_download][e].last_modified||($(".mdl_checkbox_ready").prop("checked",!1).prop("disabled",!0),$(".mdl_checkbox_ready_label_extra").append("(unchanged)")))))})),autoClosetimer2(),$(".mdl_checkbox_example").on("click",(function(){$(".jconfirm-buttons").children().closest(".btn-primary").text("OK"),clearInterval(autoCloserefreshIntervalId2)})),$(".mdl_checkbox_new").on("click",(function(){$(".jconfirm-buttons").children().closest(".btn-primary").text("OK"),clearInterval(autoCloserefreshIntervalId2)})),$(".mdl_checkbox_ready").on("click",(function(){$(".jconfirm-buttons").children().closest(".btn-primary").text("OK"),clearInterval(autoCloserefreshIntervalId2)}))):app_ops.manage_manualdownloadlist.profile.handlealertdisplayofappajaxresultsuccessisfalse(app.ajax.result.errors,caseId_to_manually_download)}))},onAction:function(e){$(".jconfirm.jconfirm-light.jconfirm-open").remove()},buttons:{ok:{btnClass:"btn-primary text-white",keys:["enter"],text:eval("app.translations."+app.data.locale+".okay_text"),isHidden:!0,isDisabled:!0,action:function(){var e=this.$content.find(".mdl_checkbox_example").is(":checked"),a=this.$content.find(".mdl_checkbox_new").is(":checked"),t=this.$content.find(".mdl_checkbox_ready").is(":checked");if(!e&&!a&&!t)return $.alert("choose at least 1 folder"),$(".custom_loader_section").animate({opacity:0},{duration:500,complete:function(){$(".custom_loader_section").css("display","none"),$(".search_keynumber_input").prop("disabled",!1).css("cursor","").css("background-color","").css("border-color","")}}),!1;$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var l={case_id:caseId_to_manually_download,mdl_checkbox_example:e,mdl_checkbox_new:a,mdl_checkbox_ready:t,array_of_job_zips_details:array_of_job_zips_details};app.util.fullscreenloading_start(),app.util.nprogressinit(),app.ajax.json(clicked_href,l,null,(function(){console.log(app.ajax.result),1==app.ajax.result.success?(window.manualdownloadlisttable.ajax.reload(null,!1),app.util.fullscreenloading_end(),window.manualdownloadlisttable.fixedHeader.adjust(),app.util.nprogressdone()):(app.util.fullscreenloading_end(),app.util.nprogressdone())}))}},cancel:{text:eval("app.translations."+app.data.locale+".cancel_text"),isHidden:!0,isDisabled:!0,action:function(){clearInterval(autoCloserefreshIntervalId2),$(".jconfirm-buttons").children().closest(".btn-primary").text("OK"),$(".custom_loader_section").animate({opacity:0},{duration:500,complete:function(){$(".custom_loader_section").css("display","none"),$(".search_keynumber_input").prop("disabled",!1).css("cursor","").css("background-color","").css("border-color",""),jc_confirm_choose_zips.close()}})}}}})}))},buttons:{ok:{btnClass:"text-white",keys:["enter"],text:eval("app.translations."+app.data.locale+".okay_text"),action:function(){}}}});$(".jconfirm-buttons").children().next(".btn-default").trigger("click"),$(".custom_loader_section").animate({opacity:0},{duration:500,complete:function(){$(".custom_loader_section").css("display","none"),$(".search_keynumber_input").prop("disabled",!1).css("cursor","").css("background-color","").css("border-color","")}})},handlefixedheaderpinning:function(){if("Chrome"==app.data.browser_detected){var e="";$(window).scroll((function(){clearTimeout(a),a=setTimeout((function(){var a=$(".visitor").outerHeight(!0);e!=a&&(window.manualdownloadlisttable.fixedHeader.headerOffset(a),window.manualdownloadlisttable.fixedHeader.adjust(),e=a)}),250)})),$(window).resize((function(){clearTimeout(t),t=setTimeout((function(){var a=$(".visitor").outerHeight(!0);e!=a&&(window.manualdownloadlisttable.fixedHeader.headerOffset(a),window.manualdownloadlisttable.fixedHeader.adjust(),e=a)}),250)}))}else if("Firefox"==app.data.browser_detected){var a,t;e="";$(window).scroll((function(){clearTimeout(a),a=setTimeout((function(){var a=$(".visitor").outerHeight(!0);e!=a&&(window.manualdownloadlisttable.fixedHeader.headerOffset(a),window.manualdownloadlisttable.fixedHeader.adjust(),e=a)}),250)})),$(window).resize((function(){clearTimeout(t),t=setTimeout((function(){var a=$(".visitor").outerHeight(!0);e!=a&&(window.manualdownloadlisttable.fixedHeader.headerOffset(a),window.manualdownloadlisttable.fixedHeader.adjust(),e=a)}),250)}))}},get_manualdownloadlistInfo_tab:function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});app.ajax.html(app.data.tabHTML_manualdownloadlistInfo,{},null,(function(){$("#manualdownloadlistInfo").html(app.ajax.result)}))},foreach_handle_error_display:function(e,a){a.indexOf("The period modifier field is required when period unit is 2.")>=0&&(a="The period modifier field is required when period unit is Weekly",(t="period_modifier_send").indexOf("fk_")>=0&&(t=t.replace("fk_",""),a=a.replace("fk ","")),"file"==t?($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong></strong></span>'),$(".file-caption-name").after('<span style="padding-top:13px; margin-left: -13px;" class="help-block"><strong>'+a+"</strong></span>"),$(".file-caption-main").css("padding-bottom","20px")):($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>")));a.indexOf(" must be a date after ")>=0&&((t=a.split(" must be a date after ")[0].split("The ")[1].replace(/ /g,"_")).indexOf("fk_")>=0&&(t=t.replace("fk_",""),a=a.replace("fk ","")),"file"==t?($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong></strong></span>'),$(".file-caption-name").after('<span style="padding-top:13px; margin-left: -13px;" class="help-block"><strong>'+a+"</strong></span>"),$(".file-caption-main").css("padding-bottom","20px")):($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>")));a.indexOf(" is required when ")>=0&&((t=a.split(" is required when ")[0].split("The ")[1].replace(/ /g,"_")).indexOf("fk_")>=0&&(t=t.replace("fk_",""),a=a.replace("fk ","")),"file"==t?($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong></strong></span>'),$(".file-caption-name").after('<span style="padding-top:13px; margin-left: -13px;" class="help-block"><strong>'+a+"</strong></span>"),$(".file-caption-main").css("padding-bottom","20px")):($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>")));a.indexOf(" already exisits.")>=0&&((t=a.split(" already exisits.")[0].split("The ")[1].replace(/ /g,"_")).indexOf("fk_")>=0&&(t=t.replace("fk_",""),a=a.replace("fk ","")),"file"==t?($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong></strong></span>'),$(".file-caption-name").after('<span style="padding-top:13px; margin-left: -13px;" class="help-block"><strong>'+a+"</strong></span>"),$(".file-caption-main").css("padding-bottom","20px")):($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>")));a.indexOf(" may only contain letters.")>=0&&((t=a.split(" may only contain letters.")[0].split("The ")[1].replace(/ /g,"_")).indexOf("fk_")>=0&&(t=t.replace("fk_",""),a=a.replace("fk ","")),"file"==t?($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong></strong></span>'),$(".file-caption-name").after('<span style="padding-top:13px; margin-left: -13px;" class="help-block"><strong>'+a+"</strong></span>"),$(".file-caption-main").css("padding-bottom","20px")):($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>")));a.indexOf(" may only contain letters, numbers and spaces.")>=0&&((t=a.split(" may only contain letters, numbers and spaces.")[0].split("The ")[1].replace(/ /g,"_")).indexOf("fk_")>=0&&(t=t.replace("fk_",""),a=a.replace("fk ","")),"file"==t?($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong></strong></span>'),$(".file-caption-name").after('<span style="padding-top:13px; margin-left: -13px;" class="help-block"><strong>'+a+"</strong></span>"),$(".file-caption-main").css("padding-bottom","20px")):($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>")));a.indexOf("The file must be a file of type:")>=0&&((t=a.split(" must be a file of type:")[0].split("The ")[1].replace(/ /g,"_")).indexOf("fk_")>=0&&(t=t.replace("fk_",""),a=a.replace("fk ","")),"file"==t?($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong></strong></span>'),$(".file-caption-name").after('<span style="padding-top:13px; margin-left: -13px;" class="help-block"><strong>'+a+"</strong></span>"),$(".file-caption-main").css("padding-bottom","20px")):($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>")));a.indexOf(" failed to upload.")>=0&&((t=a.split(" failed to upload.")[0].split("The ")[1].replace(/ /g,"_")).indexOf("fk_")>=0&&(t=t.replace("fk_",""),a=a.replace("fk ","")),"file"==t?($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong></strong></span>'),$(".file-caption-name").after('<span style="padding-top:13px; margin-left: -13px;" class="help-block"><strong>'+a+"</strong></span>"),$(".file-caption-main").css("padding-bottom","20px")):($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>")));a.indexOf(" number can only contain numbers.")>=0&&((t=a.split(" number can only contain numbers.")[0].split("The ")[1].replace(/ /g,"_")).indexOf("fk_")>=0&&(t=t.replace("fk_",""),a=a.replace("fk ","")),$("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>"));a.indexOf(" may not be greater than ")>=0&&((t=a.split(" may not be greater than ")[0].split("The ")[1].replace(/ /g,"_")).indexOf("fk_")>=0&&(t=t.replace("fk_",""),a=a.replace("fk ","")),$("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>"));a.indexOf(" number can only contain numbers.")>=0&&((t=a.split(" number can only contain numbers.")[0].split("The ")[1].replace(/ /g,"_")).indexOf("fk_")>=0&&(t=t.replace("fk_",""),a=a.replace("fk ","")),$("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>"));a.indexOf("must be a number.")>=0&&((t=a.split(" must be a number.")[0].split("The ")[1].replace(/ /g,"_")).indexOf("fk_")>=0&&(t=t.replace("fk_",""),a=a.replace("fk ","")),$("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>"));a.indexOf(" must only contain numbers")>=0&&((t=a.split(" must only contain numbers")[0].replace(/ /g,"_")).indexOf("fk_")>=0&&(t=t.replace("fk_",""),a=a.replace("fk ","")),t.indexOf("contact_phone")>=0&&(t="work_"+t),$("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>"));a.indexOf("is not a valid date.")>=0&&((t=a.split(" is not a valid date.")[0].split("The ")[1].replace(/ /g,"_")).indexOf("fk_")>=0&&(t=t.replace("fk_",""),a=a.replace("fk ","")),$("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>"));a.indexOf(" field is required.")>=0&&((t=a.split(" field")[0].split("The ")[1].replace(/ /g,"_")).indexOf("fk_")>=0&&(t=t.replace("fk_",""),a=a.replace("fk ","")),"file"==t?($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong></strong></span>'),$(".file-caption-name").after('<span style="padding-top:13px; margin-left: -13px;" class="help-block"><strong>'+a+"</strong></span>"),$(".file-caption-main").css("padding-bottom","20px")):($("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>")));if(a.indexOf(" must be at least ")>=0){var t=a.split(" must be at least")[0].split("The ")[1].replace(/ /g,"_");$("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>")}if(a.indexOf(" format is invalid.")>=0){t=a.split(" format is invalid.")[0].split("The ")[1].replace(/ /g,"_");$("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>")}if(a.indexOf(" field is required when ")>=0){t=a.split(" field is required when ")[0].split("The ")[1].replace(/ /g,"_");a=a.replace("fk ",""),$("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>")}if(a.indexOf(" must be between ")>=0){t=a.split(" must be between ")[0].split("The ")[1].replace(/ /g,"_");a=a.replace("fk ",""),$("#"+t).closest("td").addClass("has-error"),$("#"+t).after('<span class="help-block"><strong>'+a+"</strong></span>")}a.indexOf("Not Permitted")},handle_show_hide_columns_on_this_table:function(){var e=[],a=[],t=[],l=[],s=[],o=[],n=[];$("select[id='colVis_show_hide_filter'] option").each((function(t){e[t]=$(this).val(),a[t]=$("select[id='colVis_show_hide_filter'] option[value='"+$(this).val()+"']").attr("data-column")})),$.each($("select[id='colVis_show_hide_filter']").val(),(function(e,a){t[e]=a,l[e]=parseInt(a)+5,o[e]=parseInt(a)-1}));var i=e.filter((e=>-1===t.indexOf(e)));$.each(i,(function(e,a){s[e]=parseInt(a)+5,a<11?n[e]=parseInt(a)-1:11==a||(n[e]=parseInt(a)-2)}));var r=0,d=[];$.each(i,(function(t,l){var s=null;$.each(e,(function(e,a){a==l&&(s=e)}));var o=a[s];o=o.split(","),$.each(o,(function(e,a){d[r]=parseInt(a),r++}))}));r=0;var c=[];$.each(t,(function(t,l){var s=null;$.each(e,(function(e,a){a==l&&(s=e)}));var o=a[s];o=o.split(","),$.each(o,(function(e,a){c[r]=parseInt(a),r++}))})),window.byHideShowColumn_value=$("select[id='colVis_show_hide_filter']").val(),window.byShowColumn_value=c,window.byHideColumn_value=d,$.each(window.manualdownloadlisttable.columns().header(),(function(e,a){c.includes(e)&&($(a).removeClass("hidden"),$.each($(a).parent().prev().children(),(function(e,a){l.includes(e)&&$(a).removeClass("hidden")}))),d.includes(e)&&($(a).addClass("hidden"),$.each($(a).parent().prev().children(),(function(e,a){s.includes(e)&&$(a).addClass("hidden")})))})),$.each(window.manualdownloadlisttable.columns().footer(),(function(e,a){c.includes(e)&&($(a).removeClass("hidden"),$.each($(a).parent().next().children(),(function(e,a){o.includes(e)&&$(a).removeClass("hidden")}))),d.includes(e)&&($(a).addClass("hidden"),$.each($(a).parent().next().children(),(function(e,a){n.includes(e)&&$(a).addClass("hidden")})))})),window.manualdownloadlisttable.rows().every((function(e,a,t){$.each(this.node().children,(function(e,a){c.includes(e)&&$(a).removeClass("hidden"),d.includes(e)&&$(a).addClass("hidden")}))})),window.manualdownloadlisttable.fixedHeader.adjust();var _=JSON.parse(sessionStorage.getItem("Br24_"+app.env()+"_managemanualdownloadlistTable_table_manualdownloadlistTable"));if(null!==_){var p=_;p.filters={status_cb:_.filters.status_cb,team_cb:_.filters.team_cb,position_cb:_.filters.position_cb,editor_level_cb:_.filters.editor_level_cb,job_status_cb:_.filters.job_status_cb,assignee_cb:_.filters.assignee_cb,byEnabledDisabled:_.filters.byEnabledDisabled,byStatus:_.filters.byStatus,byTeam:_.filters.byTeam,byPosition:_.filters.byPosition,byEditor_level:_.filters.byEditor_level,byJobStatus:_.filters.byJobStatus,byAssignee:_.filters.byAssignee,byHideShowColumn_val:window.byHideShowColumn_value,byHideColumn:window.byHideColumn_value,byShowColumn:window.byShowColumn_value,locale_date_format:_.filters.locale_date_format,global_search:_.filters.global_search},sessionStorage.setItem("Br24_"+app.env()+"_managemanualdownloadlistTable_table_manualdownloadlistTable",JSON.stringify(p))}},sync_preview_required_status:function(e,a,t,l,s,o){if(""!==o){var n={_token:$('meta[name="csrf-token"]').attr("content"),case_id:e,encrypted_case_id:a,status:t,input_name:s.attr("name")};app.ajax.jsonGET(app.data.urlSyncReviewRequiredStatus,n,null,(function(){if(success_ajax_then_refresh=app.ajax.result.success,1==app.ajax.result.success)app.data.selectize_hashtag_list_formated_json=app.ajax.result.selectize_hashtag_list_formated_json,l.children().next(".last_updated_by").html('<span style="font-size: 8px;">'+app.ajax.result.last_updated_by_name+"</span>"),l.children().next(".last_updated").html(app.ajax.result.updated_at);else{s.is(":checked")?s.prop("checked",!1):s.prop("checked",!0);var e="Something went wrong";$.each(app.ajax.result.errors,(function(a,t){e=e+"<br>"+t})),e=e+"<br>"+app.ajax.result.caseId+" preview required state not changed",$.alert(e)}}))}else{s.is(":checked")?(s.prop("checked",!1),s.prop("disabled",!0)):(s.prop("checked",!0),s.prop("disabled",!1));var i=e+" preview required state not changed. Reason: Job has no assignees.";$.alert(i)}},live_update_download_progress_of_manual_downloaded_jobs:function(e){var a=Object.keys(app.data.currently_downloading_aria2c).map((function(e){return{[e]:app.data.currently_downloading_aria2c[e]}})),t=[];$.each(a,(function(a,l){$.each(l,(function(a,l){$.each(e,(function(e,l){a==l.case_id&&t.push(a)}))}))}));var l=1500*t.length;function s(e){if(0==e)return"0 Byte";var a=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,a),2)+" "+["Bytes","KB","MB","GiB","TB"][a]}function o(e){for(var a=e.split(":"),t=0,l=1;a.length>0;)t+=l*parseInt(a.pop(),10),l*=60;return t}function n(e){e=Number(e);var a=Math.floor(e/3600),t=Math.floor(e%3600/60),l=Math.floor(e%3600%60);return(a>0?a+"h":"")+(t>0?t+"m":"")+(l>=0?l+"s":"")}window.autoPollrefreshIntervalId=null,window.autoPollrefreshIntervalId_ASAP=null;var i=1e3;$.xhrPool_get_allowed_remaining=[],window.aklsdf_get_allowed_remaining=[],$.xhrPool_get_allowed_remaining.abortAll=function(){$(this).each((function(e,a){a.abort(),$.xhrPool_get_allowed_remaining.splice(e,1)}))};1e3==i&&(window.autoPollrefreshIntervalId_ASAP=setInterval((function(){$.each(t,(function(e,a){$.each(app.data.currently_downloading_aria2c[a],(function(e,a){if("example"==e)var t=a.encrypted_case_id,l=a.encrypted_type;"new"==e&&(t=a.encrypted_case_id,l=a.encrypted_type),"ready"==e&&(t=a.encrypted_case_id,l=a.encrypted_type),$.ajax({type:"GET",url:app.data.urlGetAria2cDownloadProgressDetailsOfCaseID+"/"+t+"/"+l,data:{},dataType:"json",async:!0,beforeSend:function(e){$.xhrPool_get_allowed_remaining.push(e),window.aklsdf_get_allowed_remaining.push(e)},complete:function(e){var a=$.xhrPool_get_allowed_remaining.indexOf(e);a>-1&&($.xhrPool_get_allowed_remaining.splice(a,1),window.aklsdf_get_allowed_remaining.splice(a,1))},success:function(e){if(app.util.isJson(e)){if(app.ajax.result=app.util.parseJson(e),app.ajax.result.error&&(this.error=!0,$.alert({title:'Alert!<span style="color: #FFF; font-size: 7px;">app.ajax.callGET.success</span>',content:app.ajax.result.error.msg})),1==app.ajax.result.success){if(null==app.ajax.result.file_count)var a="&nbsp;&nbsp;&nbsp;&nbsp;";else a=app.ajax.result.file_count;if("example"==app.ajax.result.type){var t=".iecd_"+app.ajax.result.caseId;$($(t).parent().parent().parent().parent().first().children().first().children()[0]).html(a)}if("new"==app.ajax.result.type&&(t=".incd_"+app.ajax.result.caseId,$($(t).parent().parent().parent().parent().first().children().first().children()[2]).html(a)),"ready"==app.ajax.result.type&&(t=".ircd_"+app.ajax.result.caseId,$($(t).parent().parent().parent().parent().first().children().first().children()[4]).html(a)),null!=app.ajax.result.latest_progress_details_array||null!=app.ajax.result.latest_progress_details_array)if(app.ajax.result.latest_progress_details_array.length>=1)if("moving_to_jobFolder"==app.ajax.result.state){$(t).parent().parent().parent().parent().first().css("padding-bottom",""),$(t).parent().parent().css("display",""),$(t).parent().parent().parent().css("display","").css("padding-top","");var l=s(app.ajax.result.latest_progress_details_array[0].replaceAll(new RegExp(",","g"),"")),i=n(o(app.ajax.result.latest_progress_details_array[2])),r=s(app.ajax.result.zip_size),d=app.ajax.result.latest_progress_details_array[2];$(t).html(l+"/"+r+"("+app.ajax.result.latest_progress_details_array[1]+")<br>ETA:"+i+" <i>"+d+"</i>")}else"downloading"==app.ajax.result.state?($(t).parent().parent().parent().parent().first().css("padding-bottom",""),$(t).parent().parent().css("display",""),$(t).parent().parent().parent().css("display","").css("padding-top",""),d=app.ajax.result.latest_progress_details_array[3]+"/s",$(t).html(app.ajax.result.latest_progress_details_array[1]+"<br>"+app.ajax.result.latest_progress_details_array[4]+" <i>"+d+"</i>")):"downloaded"==app.ajax.result.state?($(t).parent().parent().parent().parent().first().css("padding-bottom",""),$(t).parent().parent().css("display",""),$(t).parent().parent().parent().css("display","").css("padding-top",""),d=app.ajax.result.latest_progress_details_array[3],$(t).html("Unzip test = "+parseInt(app.ajax.result.latest_progress_details_array[0])+"/"+parseInt(app.ajax.result.latest_progress_details_array[5])+"<br><span style='font-size:4px'>"+d+"</span><br>"+app.ajax.result.latest_progress_details_array[4])):($(t).parent().parent().parent().parent().first().css("padding-bottom",""),$(t).parent().parent().css("display",""),$(t).parent().parent().parent().css("display","").css("padding-top",""),d=app.ajax.result.latest_progress_details_array[3],$(t).html("Unzipping = "+parseInt(app.ajax.result.latest_progress_details_array[0])+"/"+parseInt(app.ajax.result.latest_progress_details_array[5])+"<br><span style='font-size:4px'>"+d+"</span><br>"+app.ajax.result.latest_progress_details_array[4]));else"notified"!=app.ajax.result.state?($(t).parent().parent().parent().parent().first().css("padding-bottom",""),$(t).parent().parent().css("display",""),$(t).parent().parent().parent().css("display","").css("padding-top",""),1==app.ajax.result.finished&&"downloaded"==app.ajax.result.state?$(t).html(app.ajax.result.state+"... testing zip integrity..."):1==app.ajax.result.finished&&"moving_to_jobFolder"==app.ajax.result.state?$(t).html("checking file integrity..."):$(t).html(app.ajax.result.state)):$(document).ajaxStop((function(){console.log("all ajax requests finished"),window.location.reload()}))}}else $(null).html(e);"function"==typeof call_back&&call_back.call()},error:function(e){500!=e.status&&405!=e.status&&505!=e.status&&503!=e.status||($(".jconfirm-buttons").children().next(".btn-default").trigger("click"),$(".custom_loader_section").animate({opacity:0},{duration:500,complete:function(){$(".custom_loader_section").css("display","none"),$(".search_keynumber_input").prop("disabled",!1).css("cursor","").css("background-color","").css("border-color",""),clearInterval(window.autoPollrefreshIntervalId),clearInterval(window.autoPollrefreshIntervalId_ASAP)}}),$("#callGeterror").is(":visible")||$.alert({title:'Alert!<span id="callGeterror" style="color: #FFF; font-size: 7px;">app.ajax.callGET.error</span>',content:e.statusText+" : "+e.status}))}})}))})),clearInterval(window.autoPollrefreshIntervalId_ASAP)}),1e3)),window.autoPollrefreshIntervalId=setInterval((function(){0==(i-=1)?(clearInterval(window.autoPollrefreshIntervalId),i=0,t.length>0&&window.location.reload()):$.each(t,(function(e,a){$.each(app.data.currently_downloading_aria2c[a],(function(e,a){if("example"==e)var t=a.encrypted_case_id,l=a.encrypted_type;"new"==e&&(t=a.encrypted_case_id,l=a.encrypted_type),"ready"==e&&(t=a.encrypted_case_id,l=a.encrypted_type),$.ajax({type:"GET",url:app.data.urlGetAria2cDownloadProgressDetailsOfCaseID+"/"+t+"/"+l,data:{},dataType:"json",async:!0,beforeSend:function(e){$.xhrPool_get_allowed_remaining.push(e),window.aklsdf_get_allowed_remaining.push(e)},complete:function(e){var a=$.xhrPool_get_allowed_remaining.indexOf(e);a>-1&&($.xhrPool_get_allowed_remaining.splice(a,1),window.aklsdf_get_allowed_remaining.splice(a,1))},success:function(e){if(app.util.isJson(e)){if(app.ajax.result=app.util.parseJson(e),app.ajax.result.error&&(this.error=!0,$.alert({title:'Alert!<span style="color: #FFF; font-size: 7px;">app.ajax.callGET.success</span>',content:app.ajax.result.error.msg})),1==app.ajax.result.success){if(null==app.ajax.result.file_count)var a="&nbsp;&nbsp;&nbsp;&nbsp;";else a=app.ajax.result.file_count;if("example"==app.ajax.result.type){var t=".iecd_"+app.ajax.result.caseId;$($(t).parent().parent().parent().parent().first().children().first().children()[0]).html(a)}if("new"==app.ajax.result.type&&(t=".incd_"+app.ajax.result.caseId,$($(t).parent().parent().parent().parent().first().children().first().children()[2]).html(a)),"ready"==app.ajax.result.type&&(t=".ircd_"+app.ajax.result.caseId,$($(t).parent().parent().parent().parent().first().children().first().children()[4]).html(a)),null!=app.ajax.result.latest_progress_details_array||null!=app.ajax.result.latest_progress_details_array)if(app.ajax.result.latest_progress_details_array.length>=1)if("moving_to_jobFolder"==app.ajax.result.state){$(t).parent().parent().parent().parent().first().css("padding-bottom",""),$(t).parent().parent().css("display",""),$(t).parent().parent().parent().css("display","").css("padding-top","");var l=s(app.ajax.result.latest_progress_details_array[0].replaceAll(new RegExp(",","g"),"")),i=n(o(app.ajax.result.latest_progress_details_array[2])),r=s(app.ajax.result.zip_size),d=app.ajax.result.latest_progress_details_array[2];$(t).html(l+"/"+r+"("+app.ajax.result.latest_progress_details_array[1]+")<br>ETA:"+i+" <i>"+d+"</i>")}else"downloading"==app.ajax.result.state?($(t).parent().parent().parent().parent().first().css("padding-bottom",""),$(t).parent().parent().css("display",""),$(t).parent().parent().parent().css("display","").css("padding-top",""),d=app.ajax.result.latest_progress_details_array[3]+"/s",$(t).html(app.ajax.result.latest_progress_details_array[1]+"<br>"+app.ajax.result.latest_progress_details_array[4]+" <i>"+d+"</i>")):"downloaded"==app.ajax.result.state?($(t).parent().parent().parent().parent().first().css("padding-bottom",""),$(t).parent().parent().css("display",""),$(t).parent().parent().parent().css("display","").css("padding-top",""),d=app.ajax.result.latest_progress_details_array[3],$(t).html("Unzip test = "+parseInt(app.ajax.result.latest_progress_details_array[0])+"/"+parseInt(app.ajax.result.latest_progress_details_array[5])+"<br><span style='font-size:4px'>"+d+"</span><br>"+app.ajax.result.latest_progress_details_array[4])):($(t).parent().parent().parent().parent().first().css("padding-bottom",""),$(t).parent().parent().css("display",""),$(t).parent().parent().parent().css("display","").css("padding-top",""),d=app.ajax.result.latest_progress_details_array[3],$(t).html("Unzipping = "+parseInt(app.ajax.result.latest_progress_details_array[0])+"/"+parseInt(app.ajax.result.latest_progress_details_array[5])+"<br><span style='font-size:4px'>"+d+"</span><br>"+app.ajax.result.latest_progress_details_array[4]));else"notified"!=app.ajax.result.state?($(t).parent().parent().parent().parent().first().css("padding-bottom",""),$(t).parent().parent().css("display",""),$(t).parent().parent().parent().css("display","").css("padding-top",""),1==app.ajax.result.finished&&"downloaded"==app.ajax.result.state?$(t).html(app.ajax.result.state+"... testing zip integrity..."):1==app.ajax.result.finished&&"moving_to_jobFolder"==app.ajax.result.state?$(t).html("checking file integrity..."):$(t).html(app.ajax.result.state)):$(document).ajaxStop((function(){console.log("all ajax requests finished"),window.location.reload()}))}}else $(null).html(e);"function"==typeof call_back&&call_back.call()},error:function(e){500!=e.status&&405!=e.status&&505!=e.status&&503!=e.status||($(".jconfirm-buttons").children().next(".btn-default").trigger("click"),$(".custom_loader_section").animate({opacity:0},{duration:500,complete:function(){$(".custom_loader_section").css("display","none"),$(".search_keynumber_input").prop("disabled",!1).css("cursor","").css("background-color","").css("border-color",""),clearInterval(window.autoPollrefreshIntervalId),clearInterval(window.autoPollrefreshIntervalId_ASAP)}}),$("#callGeterror").is(":visible")||$.alert({title:'Alert!<span id="callGeterror" style="color: #FFF; font-size: 7px;">app.ajax.callGET.error</span>',content:e.statusText+" : "+e.status}))}})}))}))}),l)},filter:{byAssignee:function(e){var a=app.util.build.assignees();$("div#assignees_filter").html(a)},byColVis:function(e){var a=app.util.build.custom_visibility_buttons_manualdl();$("div#custom_visibility_buttons").html(a).css("margin-left","10px").addClass("dataTables_length")},byTeam:function(e){var a=app.util.build.team();$("div#team_filter").html(a),$("select[id='team_filter']").on("change",(function(){var a=$("#team_filter option:selected").map((function(){return $(this).text()})).get().join("|");a.indexOf("|")>=0||""==a?e.column(app.conf.table.filterColumn.managemanualdownloadlistInfo.team).search(a,!0,!1).draw():e.column(app.conf.table.filterColumn.managemanualdownloadlistInfo.team).search("^"+a+"$",!0,!1).draw()}))},byPosition:function(e){var a=app.util.build.position();$("div#position_filter").html(a),$("select[id='position_filter']").on("change",(function(){var a=$("#position_filter option:selected").map((function(){return $(this).text()})).get().join("|");a.indexOf("|")>=0||""==a?e.column(app.conf.table.filterColumn.managemanualdownloadlistInfo.position).search(a,!0,!1).draw():e.column(app.conf.table.filterColumn.managemanualdownloadlistInfo.position).search("^"+a+"$",!0,!1).draw()}))},byStatus:function(e){var a=app.util.build.status();$("div#status_filter").html(a),$("select[id='status_filter']").on("change",(function(){var a=$("#status_filter option:selected").map((function(){return $(this).val()})).get().join("|");e.column(app.conf.table.filterColumn.managemanualdownloadlistInfo.status+1).search(a,!0,!1).draw()}))},byEnabledDisabled:function(e){var a=app.util.build.enabled_disabled();$("div#enabled_disabled_filter").html(a),$("select[id='enabled_disabled_filter']").on("change",(function(){var a=$("#enabled_disabled_filter option:selected").map((function(){return $(this).val()})).get().join("|");e.column(app.conf.table.filterColumn.managemanualdownloadlistInfo.enabled_disabled).search(a,!0,!1).draw()}))},bySections:function(e){var a=app.util.build.sections();$("div#sections_filter").html(a),$("select[id='sections_filter']").on("change",(function(){var a=$("#sections_filter option:selected").map((function(){return $(this).text()})).get().join("|");e.column(app.conf.table.filterColumn.managemanualdownloadlistInfo.sections).search(a,!0,!1).draw()}))},byJobStatus:function(e){var a=app.util.build.jobstatus();$("div#jobstatus_filter").html(a),$("select[id='jobstatus_filter']").on("change",(function(){var e=$("#jobstatus_filter option:selected").map((function(){return $(this).text()})).get().join("|");window.manualdownloadlisttable.column(app.conf.table.filterColumn.managemanualdownloadlistInfo.jobstatus).search(e,!0,!1).draw()}))},exportExcel:function(e){var a=app.util.build.exportbutton(),t=a.search("data-action=")+13,l=app.data.URL_getmanualdownloadlistinfoExportExcel,s=[a.slice(0,t),l,a.slice(t)].join("");$("div#export_buttonlocation").html(s)},clearallfilter:function(e){var a=app.util.build.clearallfiltersbutton();$("div#clear_filter").html(a)},byGlobalSearch:function(e){var a=app.util.build.global_search();$("div#custom_global_filter").html(a)}}}}};
